<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentation</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" id="dark-theme">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" id="light-theme">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --bg-primary: #ffffff; --bg-secondary: #f8f9fa; --text-primary: #333333;
            --text-secondary: #666666; --border-color: #e1e5e9; --accent-color: #6366f1;
            --code-bg: #f8f9fa; --sidebar-bg: #ffffff; --shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        [data-theme="dark"] {
            --bg-primary: #0d1117; --bg-secondary: #161b22; --text-primary: #e6edf3;
            --text-secondary: #7d8590; --border-color: #30363d; --accent-color: #58a6ff;
            --code-bg: #161b22; --sidebar-bg: #0d1117; --shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
            line-height: 1.6; 
            background-color: var(--bg-primary); 
            color: var(--text-primary); 
            transition: all 0.3s ease;
            word-wrap: break-word;
            overflow-wrap: break-word;
            hyphens: auto;
        }
        
        .container { 
            display: flex; 
            min-height: 100vh;
            width: 100%;
            max-width: 100vw;
            overflow-x: hidden;
        }
        
        .sidebar { 
            width: 280px; 
            background-color: var(--sidebar-bg); 
            border-right: 1px solid var(--border-color); 
            position: fixed; 
            height: 100vh; 
            overflow-y: auto; 
            box-shadow: var(--shadow); 
            transition: transform 0.3s ease; 
            z-index: 200;
        }
        
        .main-content { 
            flex: 1; 
            margin-left: 280px; 
            transition: margin-left 0.3s ease;
            width: calc(100% - 280px);
            max-width: calc(100vw - 280px);
            overflow-x: hidden;
        }
        
        .header { 
            background-color: var(--sidebar-bg); 
            border-bottom: 1px solid var(--border-color); 
            padding: 1rem 2rem; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            position: sticky; 
            top: 0; 
            z-index: 100; 
            box-shadow: var(--shadow);
        }
        
        .theme-toggle { 
            background: none; 
            border: 2px solid var(--border-color); 
            padding: 0.5rem 1rem; 
            border-radius: 6px; 
            cursor: pointer; 
            color: var(--text-primary); 
            font-size: 0.9rem; 
            transition: all 0.2s ease;
            white-space: nowrap;
        }
        .theme-toggle:hover { background-color: var(--bg-secondary); }
        
        .mobile-menu-btn { 
            display: none; 
            background: none; 
            border: 2px solid var(--border-color); 
            padding: 0.5rem; 
            border-radius: 6px; 
            cursor: pointer; 
            color: var(--text-primary); 
            font-size: 1.2rem; 
            transition: all 0.2s ease;
        }
        .mobile-menu-btn:hover { background-color: var(--bg-secondary); }
        
        .mobile-overlay { 
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background-color: rgba(0, 0, 0, 0.5); 
            z-index: 150; 
            opacity: 0; 
            transition: opacity 0.3s ease;
            pointer-events: none;
        }
        .mobile-overlay.active { 
            opacity: 1; 
            pointer-events: auto;
        }
        
        .content { 
            padding: 2rem; 
            max-width: 1200px; 
            margin: 0 auto;
            width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        
        h1 { 
            font-size: clamp(1.8rem, 4vw, 2.5rem); 
            margin-bottom: 1rem; 
            color: var(--text-primary); 
            border-bottom: 3px solid var(--accent-color); 
            padding-bottom: 0.5rem;
            word-wrap: break-word;
            overflow-wrap: break-word;
            hyphens: auto;
        }
        
        h2 { 
            font-size: clamp(1.4rem, 3vw, 2rem); 
            margin: 2rem 0 1rem 0; 
            color: var(--text-primary); 
            border-bottom: 2px solid var(--border-color); 
            padding-bottom: 0.5rem;
            word-wrap: break-word;
            overflow-wrap: break-word;
            hyphens: auto;
        }
        
        .h2-link{
            font-weight:700;
        }
        
        h3 { 
            font-size: clamp(1.2rem, 2.5vw, 1.5rem); 
            margin: 1.5rem 0 1rem 0; 
            color: var(--accent-color);
            word-wrap: break-word;
            overflow-wrap: break-word;
            hyphens: auto;
        }
        
        p { 
            margin-bottom: 1rem; 
            color: var(--text-secondary);
            word-wrap: break-word;
            overflow-wrap: break-word;
            hyphens: auto;
            max-width: 100%;
        }
        
        .code-container { 
            position: relative; 
            margin: 1.5rem 0; 
            border-radius: 8px; 
            overflow: hidden; 
            box-shadow: var(--shadow);
            max-width: 100%;
        }
        
        .code-header { 
            background-color: var(--bg-secondary); 
            padding: 0.75rem 1rem; 
            border-bottom: 1px solid var(--border-color); 
            display: flex; 
            justify-content: space-between; 
            align-items: center;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        
        .copy-btn { 
            background: var(--accent-color); 
            color: white; 
            border: none; 
            padding: 0.4rem 0.8rem; 
            border-radius: 4px; 
            cursor: pointer; 
            font-size: 0.8rem;
            white-space: nowrap;
            transition: all 0.2s ease;
        }
        .copy-btn:hover { opacity: 0.9; }
        
        pre[class*="language-"] { 
            margin: 0 !important; 
            padding: 1rem !important;
            background: var(--code-bg) !important;
            border: none !important;
            border-radius: 0 !important;
            font-size: clamp(0.75rem, 2vw, 0.9rem) !important;
            line-height: 1.5 !important;
            overflow-x: auto !important;
            overflow-y: hidden !important;
            white-space: pre !important;
            word-wrap: normal !important;
            max-width: 100% !important;
            -webkit-overflow-scrolling: touch !important;
            scrollbar-width: thin !important;
            scrollbar-color: var(--accent-color) transparent !important;
        }
        
        pre[class*="language-"]::-webkit-scrollbar {
            height: 12px !important;
        }
        
        pre[class*="language-"]::-webkit-scrollbar-track {
            background: var(--bg-secondary) !important;
            border-radius: 6px !important;
        }
        
        pre[class*="language-"]::-webkit-scrollbar-thumb {
            background: var(--accent-color) !important;
            border-radius: 6px !important;
        }
        
        pre[class*="language-"]::-webkit-scrollbar-thumb:hover {
            background: var(--text-secondary) !important;
        }
        
        code[class*="language-"] { 
            background: transparent !important;
            font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace !important;
            font-size: inherit !important;
            color: inherit !important;
            white-space: pre !important;
            word-wrap: normal !important;
            display: inline-block !important;
            min-width: max-content !important;
            width: auto !important;
        }
        
        [data-theme="dark"] .token.comment, [data-theme="dark"] .token.prolog, [data-theme="dark"] .token.doctype, [data-theme="dark"] .token.cdata { color: #7d8590 !important; font-style: italic !important; }
        [data-theme="dark"] .token.punctuation { color: #e6edf3 !important; }
        [data-theme="dark"] .token.property, [data-theme="dark"] .token.tag, [data-theme="dark"] .token.boolean, [data-theme="dark"] .token.number, [data-theme="dark"] .token.constant, .token.symbol, .token.deleted { color: #ff7b72 !important; }
        [data-theme="dark"] .token.selector, .token.attr-name, .token.string, .token.char, .token.builtin, .token.inserted { color: #a5d6ff !important; }
        [data-theme="dark"] .token.operator, [data-theme="dark"] .token.entity, [data-theme="dark"] .token.url, .language-css .token.string, .style .token.string { color: #79c0ff !important; }
        [data-theme="dark"] .token.atrule, [data-theme="dark"] .token.attr-value, [data-theme="dark"] .token.keyword { color: #ff7b72 !important; }
        [data-theme="dark"] .token.function, [data-theme="dark"] .token.class-name { color: #d2a8ff !important; }
        [data-theme="dark"] .token.regex, [data-theme="dark"] .token.important, [data-theme="dark"] .token.variable { color: #ffa657 !important; }
        
        [data-theme="light"] .token.comment, [data-theme="light"] .token.prolog, [data-theme="light"] .token.doctype, [data-theme="light"] .token.cdata { color: #6a737d !important; }
        [data-theme="light"] .token.punctuation { color: #24292e !important; }
        [data-theme="light"] .token.property, .token.tag, .token.boolean, .token.number, .token.constant, .token.symbol, .token.deleted { color: #d73a49 !important; }
        [data-theme="light"] .token.selector, .token.attr-name, .token.string, .token.char, .token.builtin, .token.inserted { color: #032f62 !important; }
        [data-theme="light"] .token.operator, .token.entity, .token.url, .language-css .token.string, .style .token.string { color: #24292e !important; }
        [data-theme="light"] .token.atrule, .token.attr-value, .token.keyword { color: #d73a49 !important; }
        [data-theme="light"] .token.function, .token.class-name { color: #6f42c1 !important; }
        [data-theme="light"] .token.regex, [data-theme="light"] .token.important, [data-theme="light"] .token.variable { color: #e36209 !important; }
        
        .toc { padding: 1rem; }
        .toc ul { list-style: none; }
        .toc li { margin: 0.5rem 0; }
        .toc a { 
            color: var(--text-secondary); 
            text-decoration: none; 
            display: block; 
            padding: 0.5rem; 
            border-radius: 6px; 
            transition: all 0.2s ease; 
            font-size: 0.9rem;
            word-wrap: break-word;
            overflow-wrap: break-word;
        }

        .toc a.active {
            color: blue !important;
             background-color: #5ec7ff2a;
}


        .toc a:hover { background-color: #0077ff16}
        
        @media (max-width: 767px) { 
            .sidebar { 
                transform: translateX(-100%);
                width: 85vw;
                max-width: 320px;
            }
            .sidebar.mobile-open { transform: translateX(0); }
            .main-content { 
                margin-left: 0;
                width: 100%;
                max-width: 100vw;
                overflow-x: auto;
            }
            .mobile-menu-btn { display: block; }
            .mobile-overlay { display: block; }
            .header { 
                padding: 0.75rem 1rem;
                flex-wrap: wrap;
                gap: 0.5rem;
            }
            .content { 
                padding: 1rem;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }
            .theme-toggle {
                font-size: 0.8rem;
                padding: 0.4rem 0.8rem;
            }
            .code-header {
                padding: 0.5rem;
                font-size: 0.8rem;
            }
            .copy-btn {
                padding: 0.3rem 0.6rem;
                font-size: 0.7rem;
            }
            pre[class*="language-"] {
                padding: 0.75rem !important;
                font-size: 0.75rem !important;
            }
            pre[class*="language-"]::-webkit-scrollbar {
                height: 10px !important;
            }
            .toc {
                padding: 0.75rem;
            }
            .toc a {
                font-size: 0.8rem;
                padding: 0.4rem;
            }
        }
        
        @media (max-width: 480px) {
            h1 { font-size: 1.5rem; }
            h2 { font-size: 1.3rem; }
            h3 { font-size: 1.1rem; }
            .content { padding: 0.75rem; }
            .header { padding: 0.5rem; }
            .sidebar { width: 90vw; }
            pre[class*="language-"] {
                font-size: 0.7rem !important;
                padding: 0.5rem !important;
            }
        }
    </style>
</head>
<body data-theme="light">
    <div class="mobile-overlay" id="mobile-overlay"></div>
    
    <div class="container">
        <nav class="sidebar" id="sidebar">
            <div class="toc">
                <h3 style="padding: 0.5rem; color: var(--text-primary);">Table of Contents</h3>
                <ul id="toc-list"></ul>
            </div>
        </nav>
        <main class="main-content">
            <header class="header">
                <div style="display: flex; align-items: center; gap: 1rem;">
                    <button class="mobile-menu-btn" id="mobile-menu-btn">‚ò∞</button>
                    <h2 style="margin: 0; color: var(--text-primary);">Documentation</h2>
                </div>
                <button class="theme-toggle" id="theme-toggle">üåô Dark Mode</button>
            </header>
            <div class="content" id="content">
<h2 id="architecture-runtime-questions-51-70-">Architecture & Runtime (Questions 51-70)</h2>

<p><strong>51. What is Node.js? How is it different from browser JavaScript?</strong></p>

<p><strong>Answer:</strong> Node.js is a JavaScript runtime built on Chrome's V8 JavaScript engine that allows you to run JavaScript on the server-side, outside of a web browser.</p>

<p><strong>Key Differences:</strong></p>

<p>- <strong>Environment</strong>: Browser JS runs in browsers, Node.js runs on servers/computers</p>
<p>- <strong>APIs</strong>: Browser has DOM, Window, localStorage; Node.js has file system, process, networking APIs</p>
<p>- <strong>Module System</strong>: Browser uses ES modules, Node.js traditionally uses CommonJS</p>
<p>- <strong>Global Object</strong>: Browser has `window`, Node.js has `global`</p>
<p>- <strong>Security</strong>: Browser is sandboxed, Node.js has full system access</p>


<p><strong>Example:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Browser%20JavaScript%0Aconsole.log(window.location.href)%3B%20%2F%2F%20Works%20in%20browser%0Adocument.getElementById('myDiv')%3B%20%2F%2F%20DOM%20manipulation%0A%0A%2F%2F%20Node.js%0Aconsole.log(process.version)%3B%20%2F%2F%20Works%20in%20Node.js%0Aconst%20fs%20%3D%20require('fs')%3B%20%2F%2F%20File%20system%20access%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Browser JavaScript
console.log(window.location.href); // Works in browser
document.getElementById('myDiv'); // DOM manipulation

// Node.js
console.log(process.version); // Works in Node.js
const fs = require('fs'); // File system access
</code></pre>
</div>

<p>---</p>

<p><strong>52. Explain Node.js architecture. What roles do V8, LibUV, and the Event Loop play?</strong></p>

<p><strong>Answer:</strong> Node.js architecture consists of several key components:</p>

<p><strong>V8 Engine:</strong></p>

<p>- Google's JavaScript engine that compiles JS to machine code</p>
<p>- Handles memory management and garbage collection</p>
<p>- Executes JavaScript code</p>


<p><strong>LibUV:</strong></p>

<p>- C++ library that provides asynchronous I/O operations</p>
<p>- Handles file system, networking, timers, and child processes</p>
<p>- Manages the thread pool for blocking operations</p>


<p><strong>Event Loop:</strong></p>

<p>- Single-threaded loop that handles asynchronous callbacks</p>
<p>- Coordinates between V8 and LibUV</p>
<p>- Processes events and executes callbacks</p>


<p><strong>Example Architecture Flow:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">plaintext</span>
        <button class="copy-btn" data-code="JavaScript%20Code%20%E2%86%92%20V8%20Engine%20%E2%86%92%20Node.js%20Bindings%20%E2%86%92%20LibUV%20%E2%86%92%20System%20APIs%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%E2%86%93%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20Event%20Loop%20%E2%86%90%20Callback%20Queue%20%E2%86%90%20Async%20Operations%0A">Copy</button>
    </div>
    <pre><code class="language-plaintext">JavaScript Code ‚Üí V8 Engine ‚Üí Node.js Bindings ‚Üí LibUV ‚Üí System APIs
                     ‚Üì
                Event Loop ‚Üê Callback Queue ‚Üê Async Operations
</code></pre>
</div>

<p>---</p>

<p><strong>53. What makes Node.js non-blocking and asynchronous?</strong></p>

<p><strong>Answer:</strong> Node.js is non-blocking and asynchronous due to:</p>

<p><strong>Event-Driven Architecture:</strong></p>

<p>- Uses callbacks, promises, and async/await</p>
<p>- Operations don't wait for completion before moving to next line</p>


<p><strong>Event Loop:</strong></p>

<p>- Single thread that delegates I/O operations to system</p>
<p>- Continues processing while waiting for I/O completion</p>


<p><strong>LibUV Thread Pool:</strong></p>

<p>- Handles blocking operations in background threads</p>
<p>- Returns results via callbacks when complete</p>


<p><strong>Example:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Blocking%20(Synchronous)%0Aconst%20data%20%3D%20fs.readFileSync('large-file.txt')%3B%20%2F%2F%20Waits%20here%0Aconsole.log('This%20runs%20after%20file%20is%20read')%3B%0A%0A%2F%2F%20Non-blocking%20(Asynchronous)%0Afs.readFile('large-file.txt'%2C%20(err%2C%20data)%20%3D%3E%20%7B%0A%20%20console.log('File%20read%20complete')%3B%0A%7D)%3B%0Aconsole.log('This%20runs%20immediately')%3B%20%2F%2F%20Executes%20first%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Blocking (Synchronous)
const data = fs.readFileSync('large-file.txt'); // Waits here
console.log('This runs after file is read');

// Non-blocking (Asynchronous)
fs.readFile('large-file.txt', (err, data) =&gt; {
  console.log('File read complete');
});
console.log('This runs immediately'); // Executes first
</code></pre>
</div>

<p>---</p>

<p><strong>54. Explain the Node.js Event Loop phases in detail.</strong></p>

<p><strong>Answer:</strong> The Event Loop has 6 main phases:</p>

<p><strong>1. Timer Phase:</strong></p>

<p>- Executes callbacks scheduled by `setTimeout()` and `setInterval()`</p>


<p><strong>2. Pending Callbacks Phase:</strong></p>

<p>- Executes I/O callbacks deferred to the next loop iteration</p>


<p><strong>3. Idle, Prepare Phase:</strong></p>

<p>- Internal use only</p>


<p><strong>4. Poll Phase:</strong></p>

<p>- Fetches new I/O events and executes I/O-related callbacks</p>
<p>- Most important phase where Node.js spends most time</p>


<p><strong>5. Check Phase:</strong></p>

<p>- Executes `setImmediate()` callbacks</p>


<p><strong>6. Close Callbacks Phase:</strong></p>

<p>- Executes close event callbacks (e.g., `socket.on('close')`)</p>


<p><strong>Example:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="console.log('Start')%3B%0A%0AsetTimeout(()%20%3D%3E%20console.log('Timer')%2C%200)%3B%0AsetImmediate(()%20%3D%3E%20console.log('Immediate'))%3B%0A%0Aprocess.nextTick(()%20%3D%3E%20console.log('NextTick'))%3B%0A%0Aconsole.log('End')%3B%0A%0A%2F%2F%20Output%3A%20Start%20%E2%86%92%20End%20%E2%86%92%20NextTick%20%E2%86%92%20Immediate%20%E2%86%92%20Timer%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">console.log('Start');

setTimeout(() =&gt; console.log('Timer'), 0);
setImmediate(() =&gt; console.log('Immediate'));

process.nextTick(() =&gt; console.log('NextTick'));

console.log('End');

// Output: Start ‚Üí End ‚Üí NextTick ‚Üí Immediate ‚Üí Timer
</code></pre>
</div>

<p>---</p>

<p><strong>55. What is the difference between `process.nextTick()` and `setImmediate()`?</strong></p>

<p><strong>Answer:</strong></p>

<p><strong>process.nextTick():</strong></p>

<p>- Highest priority, executes before any other async operation</p>
<p>- Executes at the end of current phase, before moving to next phase</p>
<p>- Can cause starvation if used recursively</p>


<p><strong>setImmediate():</strong></p>

<p>- Executes in the Check phase of event loop</p>
<p>- Lower priority than `process.nextTick()`</p>
<p>- Designed to execute after I/O events</p>


<p><strong>Example:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="console.log('Start')%3B%0A%0AsetImmediate(()%20%3D%3E%20console.log('setImmediate'))%3B%0Aprocess.nextTick(()%20%3D%3E%20console.log('nextTick%201'))%3B%0Aprocess.nextTick(()%20%3D%3E%20console.log('nextTick%202'))%3B%0A%0AsetTimeout(()%20%3D%3E%20console.log('setTimeout')%2C%200)%3B%0A%0Aconsole.log('End')%3B%0A%0A%2F%2F%20Output%3A%20Start%20%E2%86%92%20End%20%E2%86%92%20nextTick%201%20%E2%86%92%20nextTick%202%20%E2%86%92%20setImmediate%20%E2%86%92%20setTimeout%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">console.log('Start');

setImmediate(() =&gt; console.log('setImmediate'));
process.nextTick(() =&gt; console.log('nextTick 1'));
process.nextTick(() =&gt; console.log('nextTick 2'));

setTimeout(() =&gt; console.log('setTimeout'), 0);

console.log('End');

// Output: Start ‚Üí End ‚Üí nextTick 1 ‚Üí nextTick 2 ‚Üí setImmediate ‚Üí setTimeout
</code></pre>
</div>

<p>---</p>

<p><strong>56. What is the role of the libuv library in Node.js?</strong></p>

<p><strong>Answer:</strong> LibUV is a C++ library that provides:</p>

<p><strong>Asynchronous I/O Operations:</strong></p>

<p>- File system operations</p>
<p>- Network operations (TCP, UDP, pipes)</p>
<p>- DNS resolution</p>


<p><strong>Event Loop Implementation:</strong></p>

<p>- Cross-platform event loop</p>
<p>- Handles different OS-specific mechanisms (epoll, kqueue, IOCP)</p>


<p><strong>Thread Pool Management:</strong></p>

<p>- Manages worker threads for blocking operations</p>
<p>- Default size: 4 threads (configurable via UV_THREADPOOL_SIZE)</p>


<p><strong>System Integration:</strong></p>

<p>- Process and signal handling</p>
<p>- High-resolution timers</p>
<p>- Child process spawning</p>


<p><strong>Example:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20These%20operations%20use%20LibUV's%20thread%20pool%0Aconst%20fs%20%3D%20require('fs')%3B%0Aconst%20crypto%20%3D%20require('crypto')%3B%0A%0Afs.readFile('file.txt'%2C%20callback)%3B%20%2F%2F%20File%20I%2FO%0Acrypto.pbkdf2('secret'%2C%20'salt'%2C%20100000%2C%2064%2C%20'sha512'%2C%20callback)%3B%20%2F%2F%20CPU-intensive%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// These operations use LibUV's thread pool
const fs = require('fs');
const crypto = require('crypto');

fs.readFile('file.txt', callback); // File I/O
crypto.pbkdf2('secret', 'salt', 100000, 64, 'sha512', callback); // CPU-intensive
</code></pre>
</div>

<p>---</p>

<p><strong>57. How does Node.js handle concurrency without threads?</strong></p>

<p><strong>Answer:</strong> Node.js achieves concurrency through:</p>

<p><strong>Event-Driven Model:</strong></p>

<p>- Single main thread handles all JavaScript execution</p>
<p>- Delegates I/O operations to system/thread pool</p>
<p>- Uses callbacks/promises for async coordination</p>


<p><strong>Non-blocking I/O:</strong></p>

<p>- Operations don't block the main thread</p>
<p>- System handles multiple I/O operations simultaneously</p>
<p>- Results returned via event notifications</p>


<p><strong>Event Loop:</strong></p>

<p>- Continuously processes events and callbacks</p>
<p>- Multiplexes multiple operations on single thread</p>


<p><strong>Example:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Handling%201000%20concurrent%20requests%0Aconst%20http%20%3D%20require('http')%3B%0A%0Aconst%20server%20%3D%20http.createServer((req%2C%20res)%20%3D%3E%20%7B%0A%20%20%2F%2F%20Each%20request%20is%20handled%20asynchronously%0A%20%20%2F%2F%20No%20new%20thread%20created%20per%20request%0A%20%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20res.end('Response%20after%201%20second')%3B%0A%20%20%7D%2C%201000)%3B%0A%7D)%3B%0A%0Aserver.listen(3000)%3B%20%2F%2F%20Can%20handle%20thousands%20of%20concurrent%20connections%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Handling 1000 concurrent requests
const http = require('http');

const server = http.createServer((req, res) =&gt; {
  // Each request is handled asynchronously
  // No new thread created per request
  setTimeout(() =&gt; {
    res.end('Response after 1 second');
  }, 1000);
});

server.listen(3000); // Can handle thousands of concurrent connections
</code></pre>
</div>

<p>---</p>

<p><strong>58. What is the thread pool in Node.js and when is it used?</strong></p>

<p><strong>Answer:</strong> The thread pool is a collection of worker threads managed by LibUV for blocking operations.</p>

<p><strong>When Used:</strong></p>

<p>- File system operations (except `fs.watch()`)</p>
<p>- DNS lookups (`dns.lookup()`)</p>
<p>- CPU-intensive crypto operations</p>
<p>- Some zlib operations</p>


<p><strong>Default Configuration:</strong></p>

<p>- 4 threads by default</p>
<p>- Configurable via `UV_THREADPOOL_SIZE` environment variable</p>
<p>- Maximum recommended: number of CPU cores</p>


<p><strong>Example:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20These%20operations%20use%20thread%20pool%0Aconst%20fs%20%3D%20require('fs')%3B%0Aconst%20crypto%20%3D%20require('crypto')%3B%0A%0A%2F%2F%20File%20operations%0Afs.readFile('large-file.txt'%2C%20callback)%3B%0Afs.writeFile('output.txt'%2C%20data%2C%20callback)%3B%0A%0A%2F%2F%20Crypto%20operations%0Acrypto.pbkdf2('password'%2C%20'salt'%2C%20100000%2C%2064%2C%20'sha512'%2C%20callback)%3B%0A%0A%2F%2F%20Configure%20thread%20pool%20size%0Aprocess.env.UV_THREADPOOL_SIZE%20%3D%208%3B%20%2F%2F%20Must%20be%20set%20before%20requiring%20modules%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// These operations use thread pool
const fs = require('fs');
const crypto = require('crypto');

// File operations
fs.readFile('large-file.txt', callback);
fs.writeFile('output.txt', data, callback);

// Crypto operations
crypto.pbkdf2('password', 'salt', 100000, 64, 'sha512', callback);

// Configure thread pool size
process.env.UV_THREADPOOL_SIZE = 8; // Must be set before requiring modules
</code></pre>
</div>

<p>---</p>

<p><strong>59. Why is Node.js single-threaded yet handles multiple requests?</strong></p>

<p><strong>Answer:</strong> Node.js appears single-threaded but actually uses multiple threads efficiently:</p>

<p><strong>Main Thread (Event Loop):</strong></p>

<p>- Single JavaScript execution thread</p>
<p>- Handles all synchronous code and callbacks</p>
<p>- Never blocks on I/O operations</p>


<p><strong>Background Threads:</strong></p>

<p>- LibUV thread pool for blocking operations</p>
<p>- System threads for network I/O</p>
<p>- Separate threads for different types of work</p>


<p><strong>Concurrency Model:</strong></p>

<p>- Multiplexing: One thread handles many connections</p>
<p>- Event-driven: Responds to events rather than creating threads</p>
<p>- Asynchronous: Operations don't block main thread</p>


<p><strong>Example:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20http%20%3D%20require('http')%3B%0A%0Aconst%20server%20%3D%20http.createServer((req%2C%20res)%20%3D%3E%20%7B%0A%20%20%2F%2F%20This%20callback%20runs%20on%20main%20thread%0A%20%20%2F%2F%20But%20can%20handle%20thousands%20of%20concurrent%20requests%0A%20%20%0A%20%20%2F%2F%20Simulate%20async%20work%0A%20%20setImmediate(()%20%3D%3E%20%7B%0A%20%20%20%20res.end(%60Handled%20request%20%24%7BDate.now()%7D%60)%3B%0A%20%20%7D)%3B%0A%7D)%3B%0A%0A%2F%2F%20One%20server%20instance%20handles%20all%20requests%0Aserver.listen(3000)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const http = require('http');

const server = http.createServer((req, res) =&gt; {
  // This callback runs on main thread
  // But can handle thousands of concurrent requests
  
  // Simulate async work
  setImmediate(() =&gt; {
    res.end(`Handled request ${Date.now()}`);
  });
});

// One server instance handles all requests
server.listen(3000);
</code></pre>
</div>

<p>---</p>

<p><strong>60. What are the limitations of Node.js?</strong></p>

<p><strong>Answer:</strong> Node.js has several limitations:</p>

<p><strong>CPU-Intensive Tasks:</strong></p>

<p>- Single-threaded nature makes it poor for heavy computation</p>
<p>- Can block the event loop</p>


<p><strong>Memory Usage:</strong></p>

<p>- V8 has memory limits (default ~1.4GB on 64-bit)</p>
<p>- Not suitable for memory-intensive applications</p>


<p><strong>Callback Complexity:</strong></p>

<p>- Callback hell (though mitigated by promises/async-await)</p>
<p>- Error handling can be complex</p>


<p><strong>Rapid API Changes:</strong></p>

<p>- Fast-moving ecosystem</p>
<p>- Breaking changes between versions</p>


<p><strong>Example of CPU-intensive limitation:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20This%20blocks%20the%20event%20loop%0Afunction%20fibonacci(n)%20%7B%0A%20%20if%20(n%20%3C%202)%20return%20n%3B%0A%20%20return%20fibonacci(n%20-%201)%20%2B%20fibonacci(n%20-%202)%3B%0A%7D%0A%0A%2F%2F%20Bad%3A%20Blocks%20all%20other%20requests%0Aapp.get('%2Ffib%2F%3An'%2C%20(req%2C%20res)%20%3D%3E%20%7B%0A%20%20const%20result%20%3D%20fibonacci(parseInt(req.params.n))%3B%20%2F%2F%20Blocks!%0A%20%20res.json(%7B%20result%20%7D)%3B%0A%7D)%3B%0A%0A%2F%2F%20Better%3A%20Use%20worker%20threads%20for%20CPU-intensive%20tasks%0Aconst%20%7B%20Worker%2C%20isMainThread%2C%20parentPort%20%7D%20%3D%20require('worker_threads')%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// This blocks the event loop
function fibonacci(n) {
  if (n &lt; 2) return n;
  return fibonacci(n - 1) + fibonacci(n - 2);
}

// Bad: Blocks all other requests
app.get('/fib/:n', (req, res) =&gt; {
  const result = fibonacci(parseInt(req.params.n)); // Blocks!
  res.json({ result });
});

// Better: Use worker threads for CPU-intensive tasks
const { Worker, isMainThread, parentPort } = require('worker_threads');
</code></pre>
</div>

<p>---</p>

<p><strong>61. What is the difference between microtasks and macrotasks?</strong></p>

<p><strong>Answer:</strong></p>

<p><strong>Microtasks (High Priority):</strong></p>

<p>- `process.nextTick()` callbacks</p>
<p>- Promise `.then()`, `.catch()`, `.finally()` callbacks</p>
<p>- `queueMicrotask()` callbacks</p>
<p>- Execute before any macrotasks</p>


<p><strong>Macrotasks (Lower Priority):</strong></p>

<p>- `setTimeout()`, `setInterval()` callbacks</p>
<p>- `setImmediate()` callbacks</p>
<p>- I/O operations</p>
<p>- UI rendering (in browsers)</p>


<p><strong>Execution Order:</strong></p>

<p>1. Current synchronous code</p>
<p>2. All microtasks</p>
<p>3. One macrotask</p>
<p>4. All microtasks again</p>
<p>5. Repeat</p>


<p><strong>Example:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="console.log('1')%3B%0A%0AsetTimeout(()%20%3D%3E%20console.log('2')%2C%200)%3B%20%2F%2F%20Macrotask%0A%0APromise.resolve().then(()%20%3D%3E%20console.log('3'))%3B%20%2F%2F%20Microtask%0A%0Aprocess.nextTick(()%20%3D%3E%20console.log('4'))%3B%20%2F%2F%20Microtask%20(highest%20priority)%0A%0Aconsole.log('5')%3B%0A%0A%2F%2F%20Output%3A%201%20%E2%86%92%205%20%E2%86%92%204%20%E2%86%92%203%20%E2%86%92%202%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">console.log('1');

setTimeout(() =&gt; console.log('2'), 0); // Macrotask

Promise.resolve().then(() =&gt; console.log('3')); // Microtask

process.nextTick(() =&gt; console.log('4')); // Microtask (highest priority)

console.log('5');

// Output: 1 ‚Üí 5 ‚Üí 4 ‚Üí 3 ‚Üí 2
</code></pre>
</div>

<p>---</p>

<p><strong>62. How does Node.js handle I/O operations internally?</strong></p>

<p><strong>Answer:</strong> Node.js handles I/O through a sophisticated system:</p>

<p><strong>Network I/O:</strong></p>

<p>- Uses system calls (epoll on Linux, kqueue on macOS, IOCP on Windows)</p>
<p>- Handled directly by event loop</p>
<p>- No thread pool involvement</p>


<p><strong>File System I/O:</strong></p>

<p>- Uses LibUV thread pool</p>
<p>- Blocking operations run in background threads</p>
<p>- Results returned via callbacks</p>


<p><strong>Process:</strong></p>

<p>1. I/O operation initiated</p>
<p>2. Operation delegated to appropriate handler</p>
<p>3. Main thread continues execution</p>
<p>4. Completion notification triggers callback</p>
<p>5. Callback executed in next event loop iteration</p>


<p><strong>Example:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20fs%20%3D%20require('fs')%3B%0Aconst%20net%20%3D%20require('net')%3B%0A%0A%2F%2F%20File%20I%2FO%20-%20uses%20thread%20pool%0Afs.readFile('data.txt'%2C%20(err%2C%20data)%20%3D%3E%20%7B%0A%20%20console.log('File%20read%20complete')%3B%0A%7D)%3B%0A%0A%2F%2F%20Network%20I%2FO%20-%20uses%20event%20loop%20directly%0Aconst%20server%20%3D%20net.createServer((socket)%20%3D%3E%20%7B%0A%20%20socket.on('data'%2C%20(data)%20%3D%3E%20%7B%0A%20%20%20%20console.log('Data%20received')%3B%0A%20%20%7D)%3B%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const fs = require('fs');
const net = require('net');

// File I/O - uses thread pool
fs.readFile('data.txt', (err, data) =&gt; {
  console.log('File read complete');
});

// Network I/O - uses event loop directly
const server = net.createServer((socket) =&gt; {
  socket.on('data', (data) =&gt; {
    console.log('Data received');
  });
});
</code></pre>
</div>

<p>---</p>

<p><strong>63. What is the purpose of the `process` object?</strong></p>

<p><strong>Answer:</strong> The `process` object provides information and control over the current Node.js process.</p>

<p><strong>Key Properties:</strong></p>

<p>- `process.argv`: Command line arguments</p>
<p>- `process.env`: Environment variables</p>
<p>- `process.pid`: Process ID</p>
<p>- `process.version`: Node.js version</p>
<p>- `process.platform`: Operating system</p>


<p><strong>Key Methods:</strong></p>

<p>- `process.exit()`: Exit the process</p>
<p>- `process.nextTick()`: Schedule callback</p>
<p>- `process.cwd()`: Current working directory</p>
<p>- `process.chdir()`: Change directory</p>


<p><strong>Example:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Command%20line%20arguments%0Aconsole.log(process.argv)%3B%20%2F%2F%20%5B'node'%2C%20'script.js'%2C%20'arg1'%2C%20'arg2'%5D%0A%0A%2F%2F%20Environment%20variables%0Aconsole.log(process.env.NODE_ENV)%3B%20%2F%2F%20'development'%0A%0A%2F%2F%20Process%20information%0Aconsole.log(%60PID%3A%20%24%7Bprocess.pid%7D%60)%3B%0Aconsole.log(%60Platform%3A%20%24%7Bprocess.platform%7D%60)%3B%0Aconsole.log(%60Node%20version%3A%20%24%7Bprocess.version%7D%60)%3B%0A%0A%2F%2F%20Process%20control%0Aprocess.on('SIGINT'%2C%20()%20%3D%3E%20%7B%0A%20%20console.log('Received%20SIGINT%2C%20graceful%20shutdown...')%3B%0A%20%20process.exit(0)%3B%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Command line arguments
console.log(process.argv); // ['node', 'script.js', 'arg1', 'arg2']

// Environment variables
console.log(process.env.NODE_ENV); // 'development'

// Process information
console.log(`PID: ${process.pid}`);
console.log(`Platform: ${process.platform}`);
console.log(`Node version: ${process.version}`);

// Process control
process.on('SIGINT', () =&gt; {
  console.log('Received SIGINT, graceful shutdown...');
  process.exit(0);
});
</code></pre>
</div>

<p>---</p>

<p><strong>64. What is the `global` object in Node.js?</strong></p>

<p><strong>Answer:</strong> The `global` object is Node.js equivalent of the browser's `window` object - it's the global namespace.</p>

<p><strong>Properties:</strong></p>

<p>- `global.console`: Console object</p>
<p>- `global.process`: Process object</p>
<p>- `global.Buffer`: Buffer constructor</p>
<p>- `global.__dirname`: Current directory (in modules)</p>
<p>- `global.__filename`: Current file (in modules)</p>


<p><strong>Usage:</strong></p>

<p>- Variables declared without `var`/`let`/`const` become global properties</p>
<p>- Accessible from any module</p>
<p>- Should be used sparingly to avoid pollution</p>


<p><strong>Example:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Setting%20global%20variables%0Aglobal.myGlobalVar%20%3D%20'Hello%20World'%3B%0Aglobal.config%20%3D%20%7B%20port%3A%203000%2C%20env%3A%20'development'%20%7D%3B%0A%0A%2F%2F%20Accessing%20from%20another%20module%0Aconsole.log(global.myGlobalVar)%3B%20%2F%2F%20'Hello%20World'%0A%0A%2F%2F%20Check%20if%20variable%20exists%20globally%0Aif%20('myGlobalVar'%20in%20global)%20%7B%0A%20%20console.log('Global%20variable%20exists')%3B%0A%7D%0A%0A%2F%2F%20Better%20practice%3A%20use%20module.exports%20instead%20of%20global%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Setting global variables
global.myGlobalVar = 'Hello World';
global.config = { port: 3000, env: 'development' };

// Accessing from another module
console.log(global.myGlobalVar); // 'Hello World'

// Check if variable exists globally
if ('myGlobalVar' in global) {
  console.log('Global variable exists');
}

// Better practice: use module.exports instead of global
</code></pre>
</div>

<p>---</p>

<p><strong>65. What are `__dirname` and `__filename`?</strong></p>

<p><strong>Answer:</strong> These are special variables available in every module that provide path information.</p>

<p><strong>`__dirname`:</strong></p>

<p>- Absolute path of the directory containing the current module</p>
<p>- Excludes the filename</p>


<p><strong>`__filename`:</strong></p>

<p>- Absolute path of the current module file</p>
<p>- Includes the filename</p>


<p><strong>Example:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20File%3A%20%2Fhome%2Fuser%2Fproject%2Fsrc%2Futils%2Fhelper.js%0A%0Aconsole.log(__dirname)%3B%20%20%2F%2F%20'%2Fhome%2Fuser%2Fproject%2Fsrc%2Futils'%0Aconsole.log(__filename)%3B%20%2F%2F%20'%2Fhome%2Fuser%2Fproject%2Fsrc%2Futils%2Fhelper.js'%0A%0A%2F%2F%20Common%20usage%0Aconst%20path%20%3D%20require('path')%3B%0A%0A%2F%2F%20Join%20paths%20safely%0Aconst%20configPath%20%3D%20path.join(__dirname%2C%20'..'%2C%20'config'%2C%20'app.json')%3B%0A%0A%2F%2F%20Read%20file%20relative%20to%20current%20module%0Aconst%20fs%20%3D%20require('fs')%3B%0Aconst%20packageJson%20%3D%20fs.readFileSync(path.join(__dirname%2C%20'..%2F..%2Fpackage.json'))%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// File: /home/user/project/src/utils/helper.js

console.log(__dirname);  // '/home/user/project/src/utils'
console.log(__filename); // '/home/user/project/src/utils/helper.js'

// Common usage
const path = require('path');

// Join paths safely
const configPath = path.join(__dirname, '..', 'config', 'app.json');

// Read file relative to current module
const fs = require('fs');
const packageJson = fs.readFileSync(path.join(__dirname, '../../package.json'));
</code></pre>
</div>

<p>---</p>

<p><strong>66. How can you read environment variables in Node.js?</strong></p>

<p><strong>Answer:</strong> Environment variables are accessed through `process.env` object.</p>

<p><strong>Reading Variables:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Reading%20environment%20variables%0Aconst%20port%20%3D%20process.env.PORT%20%7C%7C%203000%3B%0Aconst%20nodeEnv%20%3D%20process.env.NODE_ENV%20%7C%7C%20'development'%3B%0Aconst%20dbUrl%20%3D%20process.env.DATABASE_URL%3B%0A%0Aconsole.log(%60Server%20running%20on%20port%20%24%7Bport%7D%60)%3B%0Aconsole.log(%60Environment%3A%20%24%7BnodeEnv%7D%60)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Reading environment variables
const port = process.env.PORT || 3000;
const nodeEnv = process.env.NODE_ENV || 'development';
const dbUrl = process.env.DATABASE_URL;

console.log(`Server running on port ${port}`);
console.log(`Environment: ${nodeEnv}`);
</code></pre>
</div>

<p><strong>Setting Variables:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20Command%20line%0ANODE_ENV%3Dproduction%20PORT%3D8080%20node%20app.js%0A%0A%23%20.env%20file%20(with%20dotenv%20package)%0APORT%3D3000%0ADATABASE_URL%3Dmongodb%3A%2F%2Flocalhost%3A27017%2Fmyapp%0AJWT_SECRET%3Dmysecretkey%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># Command line
NODE_ENV=production PORT=8080 node app.js

# .env file (with dotenv package)
PORT=3000
DATABASE_URL=mongodb://localhost:27017/myapp
JWT_SECRET=mysecretkey
</code></pre>
</div>

<p><strong>Using dotenv:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Install%3A%20npm%20install%20dotenv%0Arequire('dotenv').config()%3B%0A%0A%2F%2F%20Now%20you%20can%20use%20process.env%20variables%0Aconst%20config%20%3D%20%7B%0A%20%20port%3A%20process.env.PORT%2C%0A%20%20dbUrl%3A%20process.env.DATABASE_URL%2C%0A%20%20jwtSecret%3A%20process.env.JWT_SECRET%0A%7D%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Install: npm install dotenv
require('dotenv').config();

// Now you can use process.env variables
const config = {
  port: process.env.PORT,
  dbUrl: process.env.DATABASE_URL,
  jwtSecret: process.env.JWT_SECRET
};
</code></pre>
</div>

<p>---</p>

<p><strong>67. What is the REPL in Node.js?</strong></p>

<p><strong>Answer:</strong> REPL stands for Read-Eval-Print-Loop - it's an interactive shell for Node.js.</p>

<p><strong>Features:</strong></p>

<p>- <strong>Read</strong>: Takes user input</p>
<p>- <strong>Eval</strong>: Evaluates the input</p>
<p>- <strong>Print</strong>: Prints the result</p>
<p>- <strong>Loop</strong>: Repeats the process</p>


<p><strong>Usage:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20Start%20REPL%0A%24%20node%0A%0A%23%20Interactive%20session%0A%3E%202%20%2B%203%0A5%0A%3E%20const%20name%20%3D%20'John'%0Aundefined%0A%3E%20name%0A'John'%0A%3E%20.help%20%20%2F%2F%20Show%20help%0A%3E%20.exit%20%20%2F%2F%20Exit%20REPL%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># Start REPL
$ node

# Interactive session
&gt; 2 + 3
5
&gt; const name = 'John'
undefined
&gt; name
'John'
&gt; .help  // Show help
&gt; .exit  // Exit REPL
</code></pre>
</div>

<p><strong>REPL Commands:</strong></p>

<p>- `.help`: Show help</p>
<p>- `.exit`: Exit REPL</p>
<p>- `.save filename`: Save session to file</p>
<p>- `.load filename`: Load file into session</p>
<p>- `.clear`: Clear context</p>


<p><strong>Custom REPL:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20repl%20%3D%20require('repl')%3B%0A%0A%2F%2F%20Create%20custom%20REPL%0Aconst%20myRepl%20%3D%20repl.start('my-app%3E%20')%3B%0A%0A%2F%2F%20Add%20custom%20commands%0AmyRepl.defineCommand('hello'%2C%20%7B%0A%20%20help%3A%20'Say%20hello'%2C%0A%20%20action(name)%20%7B%0A%20%20%20%20console.log(%60Hello%20%24%7Bname%20%7C%7C%20'World'%7D!%60)%3B%0A%20%20%20%20this.displayPrompt()%3B%0A%20%20%7D%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const repl = require('repl');

// Create custom REPL
const myRepl = repl.start('my-app&gt; ');

// Add custom commands
myRepl.defineCommand('hello', {
  help: 'Say hello',
  action(name) {
    console.log(`Hello ${name || 'World'}!`);
    this.displayPrompt();
  }
});
</code></pre>
</div>

<p>---</p>

<p><strong>68. How does garbage collection work in V8?</strong></p>

<p><strong>Answer:</strong> V8 uses generational garbage collection with two main spaces:</p>

<p><strong>Young Generation (New Space):</strong></p>

<p>- Short-lived objects</p>
<p>- Uses Scavenge algorithm (copying collector)</p>
<p>- Fast collection, frequent runs</p>
<p>- Objects surviving multiple collections promoted to old space</p>


<p><strong>Old Generation (Old Space):</strong></p>

<p>- Long-lived objects</p>
<p>- Uses Mark-Sweep and Mark-Compact algorithms</p>
<p>- Slower collection, less frequent runs</p>


<p><strong>Collection Process:</strong></p>

<p>1. <strong>Mark</strong>: Identify reachable objects</p>
<p>2. <strong>Sweep</strong>: Free unreachable objects</p>
<p>3. <strong>Compact</strong>: Defragment memory</p>


<p><strong>Example:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Monitor%20garbage%20collection%0Aconst%20v8%20%3D%20require('v8')%3B%0A%0A%2F%2F%20Get%20heap%20statistics%0Aconsole.log(v8.getHeapStatistics())%3B%0A%0A%2F%2F%20Force%20garbage%20collection%20(--expose-gc%20flag%20required)%0Aif%20(global.gc)%20%7B%0A%20%20global.gc()%3B%0A%20%20console.log('Garbage%20collection%20forced')%3B%0A%7D%0A%0A%2F%2F%20Monitor%20memory%20usage%0AsetInterval(()%20%3D%3E%20%7B%0A%20%20const%20memUsage%20%3D%20process.memoryUsage()%3B%0A%20%20console.log(%60Memory%3A%20%24%7BMath.round(memUsage.heapUsed%20%2F%201024%20%2F%201024)%7D%20MB%60)%3B%0A%7D%2C%201000)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Monitor garbage collection
const v8 = require('v8');

// Get heap statistics
console.log(v8.getHeapStatistics());

// Force garbage collection (--expose-gc flag required)
if (global.gc) {
  global.gc();
  console.log('Garbage collection forced');
}

// Monitor memory usage
setInterval(() =&gt; {
  const memUsage = process.memoryUsage();
  console.log(`Memory: ${Math.round(memUsage.heapUsed / 1024 / 1024)} MB`);
}, 1000);
</code></pre>
</div>

<p>---</p>

<p><strong>69. What are signals (SIGINT, SIGTERM) in Node.js?</strong></p>

<p><strong>Answer:</strong> Signals are system-level notifications sent to processes for various events.</p>

<p><strong>Common Signals:</strong></p>

<p>- <strong>SIGINT</strong>: Interrupt signal (Ctrl+C)</p>
<p>- <strong>SIGTERM</strong>: Termination request</p>
<p>- <strong>SIGUSR1</strong>: User-defined signal 1 (Node.js debugger)</p>
<p>- <strong>SIGUSR2</strong>: User-defined signal 2</p>
<p>- <strong>SIGHUP</strong>: Hang up signal</p>


<p><strong>Handling Signals:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Graceful%20shutdown%20on%20SIGINT%20(Ctrl%2BC)%0Aprocess.on('SIGINT'%2C%20()%20%3D%3E%20%7B%0A%20%20console.log('Received%20SIGINT%2C%20shutting%20down%20gracefully...')%3B%0A%20%20%0A%20%20%2F%2F%20Close%20server%0A%20%20server.close(()%20%3D%3E%20%7B%0A%20%20%20%20console.log('Server%20closed')%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Close%20database%20connections%0A%20%20%20%20db.close(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20console.log('Database%20closed')%3B%0A%20%20%20%20%20%20process.exit(0)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D)%3B%0A%7D)%3B%0A%0A%2F%2F%20Handle%20SIGTERM%20(process%20manager%20termination)%0Aprocess.on('SIGTERM'%2C%20()%20%3D%3E%20%7B%0A%20%20console.log('Received%20SIGTERM%2C%20shutting%20down...')%3B%0A%20%20process.exit(0)%3B%0A%7D)%3B%0A%0A%2F%2F%20Handle%20uncaught%20exceptions%0Aprocess.on('uncaughtException'%2C%20(err)%20%3D%3E%20%7B%0A%20%20console.error('Uncaught%20Exception%3A'%2C%20err)%3B%0A%20%20process.exit(1)%3B%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Graceful shutdown on SIGINT (Ctrl+C)
process.on('SIGINT', () =&gt; {
  console.log('Received SIGINT, shutting down gracefully...');
  
  // Close server
  server.close(() =&gt; {
    console.log('Server closed');
    
    // Close database connections
    db.close(() =&gt; {
      console.log('Database closed');
      process.exit(0);
    });
  });
});

// Handle SIGTERM (process manager termination)
process.on('SIGTERM', () =&gt; {
  console.log('Received SIGTERM, shutting down...');
  process.exit(0);
});

// Handle uncaught exceptions
process.on('uncaughtException', (err) =&gt; {
  console.error('Uncaught Exception:', err);
  process.exit(1);
});
</code></pre>
</div>

<p>---</p>

<p><strong>70. How do you handle unhandled promise rejections?</strong></p>

<p><strong>Answer:</strong> Unhandled promise rejections occur when a promise is rejected but no `.catch()` handler is attached.</p>

<p><strong>Detection:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Global%20handler%20for%20unhandled%20rejections%0Aprocess.on('unhandledRejection'%2C%20(reason%2C%20promise)%20%3D%3E%20%7B%0A%20%20console.error('Unhandled%20Rejection%20at%3A'%2C%20promise%2C%20'reason%3A'%2C%20reason)%3B%0A%20%20%0A%20%20%2F%2F%20Log%20the%20error%0A%20%20logger.error('Unhandled%20Promise%20Rejection'%2C%20%7B%20reason%2C%20promise%20%7D)%3B%0A%20%20%0A%20%20%2F%2F%20Graceful%20shutdown%0A%20%20process.exit(1)%3B%0A%7D)%3B%0A%0A%2F%2F%20Global%20handler%20for%20uncaught%20exceptions%0Aprocess.on('uncaughtException'%2C%20(err)%20%3D%3E%20%7B%0A%20%20console.error('Uncaught%20Exception%3A'%2C%20err)%3B%0A%20%20process.exit(1)%3B%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Global handler for unhandled rejections
process.on('unhandledRejection', (reason, promise) =&gt; {
  console.error('Unhandled Rejection at:', promise, 'reason:', reason);
  
  // Log the error
  logger.error('Unhandled Promise Rejection', { reason, promise });
  
  // Graceful shutdown
  process.exit(1);
});

// Global handler for uncaught exceptions
process.on('uncaughtException', (err) =&gt; {
  console.error('Uncaught Exception:', err);
  process.exit(1);
});
</code></pre>
</div>

<p><strong>Prevention:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Bad%3A%20Unhandled%20rejection%0Aasync%20function%20badExample()%20%7B%0A%20%20throw%20new%20Error('Something%20went%20wrong')%3B%0A%7D%0AbadExample()%3B%20%2F%2F%20Unhandled%20rejection!%0A%0A%2F%2F%20Good%3A%20Proper%20error%20handling%0Aasync%20function%20goodExample()%20%7B%0A%20%20try%20%7B%0A%20%20%20%20await%20someAsyncOperation()%3B%0A%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20console.error('Error%3A'%2C%20error)%3B%0A%20%20%7D%0A%7D%0A%0A%2F%2F%20Good%3A%20With%20.catch()%0AsomeAsyncOperation()%0A%20%20.then(result%20%3D%3E%20console.log(result))%0A%20%20.catch(error%20%3D%3E%20console.error(error))%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Bad: Unhandled rejection
async function badExample() {
  throw new Error('Something went wrong');
}
badExample(); // Unhandled rejection!

// Good: Proper error handling
async function goodExample() {
  try {
    await someAsyncOperation();
  } catch (error) {
    console.error('Error:', error);
  }
}

// Good: With .catch()
someAsyncOperation()
  .then(result =&gt; console.log(result))
  .catch(error =&gt; console.error(error));
</code></pre>
</div>

<p>---</p>

<p>Thought for 2sPerfect! Let me continue with the <strong>Modules & Package Management</strong> section (Questions 71-90).</p>

<h2 id="modules-package-management-questions-71-90-">Modules & Package Management (Questions 71-90)</h2>

<p><strong>71. What is the difference between CommonJS and ES6 modules?</strong></p>

<p><strong>Answer:</strong> These are two different module systems in JavaScript/Node.js:</p>

<p><strong>CommonJS (Traditional Node.js):</strong></p>

<p>- Uses `require()` and `module.exports`</p>
<p>- Synchronous loading</p>
<p>- Dynamic imports possible</p>
<p>- Default in Node.js < 14</p>


<p><strong>ES6 Modules (Modern Standard):</strong></p>

<p>- Uses `import` and `export`</p>
<p>- Asynchronous loading</p>
<p>- Static analysis possible</p>
<p>- Standard across browsers and Node.js</p>


<p><strong>Example:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20CommonJS%0A%2F%2F%20math.js%0Afunction%20add(a%2C%20b)%20%7B%20return%20a%20%2B%20b%3B%20%7D%0Amodule.exports%20%3D%20%7B%20add%20%7D%3B%0A%0A%2F%2F%20app.js%0Aconst%20%7B%20add%20%7D%20%3D%20require('.%2Fmath')%3B%0Aconst%20result%20%3D%20add(2%2C%203)%3B%0A%0A%2F%2F%20ES6%20Modules%0A%2F%2F%20math.mjs%0Aexport%20function%20add(a%2C%20b)%20%7B%20return%20a%20%2B%20b%3B%20%7D%0A%0A%2F%2F%20app.mjs%0Aimport%20%7B%20add%20%7D%20from%20'.%2Fmath.mjs'%3B%0Aconst%20result%20%3D%20add(2%2C%203)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// CommonJS
// math.js
function add(a, b) { return a + b; }
module.exports = { add };

// app.js
const { add } = require('./math');
const result = add(2, 3);

// ES6 Modules
// math.mjs
export function add(a, b) { return a + b; }

// app.mjs
import { add } from './math.mjs';
const result = add(2, 3);
</code></pre>
</div>

<p>---</p>

<p><strong>72. How do you create and export modules in Node.js?</strong></p>

<p><strong>Answer:</strong> There are multiple ways to create and export modules:</p>

<p><strong>Method 1: module.exports (Object)</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20calculator.js%0Afunction%20add(a%2C%20b)%20%7B%20return%20a%20%2B%20b%3B%20%7D%0Afunction%20subtract(a%2C%20b)%20%7B%20return%20a%20-%20b%3B%20%7D%0A%0Amodule.exports%20%3D%20%7B%0A%20%20add%2C%0A%20%20subtract%2C%0A%20%20PI%3A%203.14159%0A%7D%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// calculator.js
function add(a, b) { return a + b; }
function subtract(a, b) { return a - b; }

module.exports = {
  add,
  subtract,
  PI: 3.14159
};
</code></pre>
</div>

<p><strong>Method 2: exports (Individual)</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20utils.js%0Aexports.formatDate%20%3D%20(date)%20%3D%3E%20date.toISOString()%3B%0Aexports.capitalize%20%3D%20(str)%20%3D%3E%20str.charAt(0).toUpperCase()%20%2B%20str.slice(1)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// utils.js
exports.formatDate = (date) =&gt; date.toISOString();
exports.capitalize = (str) =&gt; str.charAt(0).toUpperCase() + str.slice(1);
</code></pre>
</div>

<p><strong>Method 3: Single Function/Class</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20logger.js%0Aclass%20Logger%20%7B%0A%20%20log(message)%20%7B%20console.log(%60%5BLOG%5D%20%24%7Bmessage%7D%60)%3B%20%7D%0A%7D%0A%0Amodule.exports%20%3D%20Logger%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// logger.js
class Logger {
  log(message) { console.log(`[LOG] ${message}`); }
}

module.exports = Logger;
</code></pre>
</div>

<p><strong>Method 4: ES6 Modules</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20modern.mjs%0Aexport%20const%20config%20%3D%20%7B%20port%3A%203000%20%7D%3B%0Aexport%20function%20start()%20%7B%20console.log('Starting...')%3B%20%7D%0Aexport%20default%20class%20App%20%7B%20%7D%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// modern.mjs
export const config = { port: 3000 };
export function start() { console.log('Starting...'); }
export default class App { }
</code></pre>
</div>

<p>---</p>

<p><strong>73. What is the `require()` function and how does it work?</strong></p>

<p><strong>Answer:</strong> `require()` is CommonJS function that loads and caches modules.</p>

<p><strong>How it works:</strong></p>

<p>1. <strong>Resolving</strong>: Find the module file</p>
<p>2. <strong>Loading</strong>: Read the file content</p>
<p>3. <strong>Wrapping</strong>: Wrap in function with module context</p>
<p>4. <strong>Evaluation</strong>: Execute the wrapped function</p>
<p>5. <strong>Caching</strong>: Store result in `require.cache`</p>


<p><strong>Module Resolution Order:</strong></p>

<p>1. Core modules (fs, http, etc.)</p>
<p>2. File modules (./file.js, ../file.js)</p>
<p>3. node_modules directories (traversing up)</p>


<p><strong>Example:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Module%20wrapper%20(what%20Node.js%20does%20internally)%0A(function(exports%2C%20require%2C%20module%2C%20__filename%2C%20__dirname)%20%7B%0A%20%20%2F%2F%20Your%20module%20code%20here%0A%20%20const%20fs%20%3D%20require('fs')%3B%0A%20%20module.exports%20%3D%20%7B%20data%3A%20'hello'%20%7D%3B%0A%7D)%3B%0A%0A%2F%2F%20Usage%20examples%0Aconst%20fs%20%3D%20require('fs')%3B%20%20%20%20%20%20%20%20%20%20%20%2F%2F%20Core%20module%0Aconst%20myModule%20%3D%20require('.%2Fmy')%3B%20%20%20%2F%2F%20Local%20file%0Aconst%20express%20%3D%20require('express')%3B%20%2F%2F%20npm%20package%0A%0A%2F%2F%20Check%20cache%0Aconsole.log(require.cache)%3B%20%2F%2F%20Shows%20all%20cached%20modules%0Adelete%20require.cache%5Brequire.resolve('.%2Fmy')%5D%3B%20%2F%2F%20Clear%20cache%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Module wrapper (what Node.js does internally)
(function(exports, require, module, __filename, __dirname) {
  // Your module code here
  const fs = require('fs');
  module.exports = { data: 'hello' };
});

// Usage examples
const fs = require('fs');           // Core module
const myModule = require('./my');   // Local file
const express = require('express'); // npm package

// Check cache
console.log(require.cache); // Shows all cached modules
delete require.cache[require.resolve('./my')]; // Clear cache
</code></pre>
</div>

<p>---</p>

<p><strong>74. What is `module.exports` vs `exports`?</strong></p>

<p><strong>Answer:</strong> Both are used for exporting, but they work differently:</p>

<p><strong>module.exports:</strong></p>

<p>- The actual object that gets returned by `require()`</p>
<p>- Can be reassigned to any value</p>
<p>- Has higher precedence</p>


<p><strong>exports:</strong></p>

<p>- A reference to `module.exports`</p>
<p>- Cannot be reassigned (only properties can be added)</p>
<p>- Shorthand for `module.exports`</p>


<p><strong>Example:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20%E2%9C%85%20Correct%20usage%0Aexports.name%20%3D%20'John'%3B%0Aexports.age%20%3D%2030%3B%0A%2F%2F%20Same%20as%3A%20module.exports.name%20%3D%20'John'%3B%20module.exports.age%20%3D%2030%3B%0A%0A%2F%2F%20%E2%9C%85%20Correct%20usage%0Amodule.exports%20%3D%20%7B%0A%20%20name%3A%20'John'%2C%0A%20%20age%3A%2030%0A%7D%3B%0A%0A%2F%2F%20%E2%9D%8C%20Wrong%20-%20breaks%20the%20reference%0Aexports%20%3D%20%7B%20name%3A%20'John'%20%7D%3B%20%2F%2F%20This%20won't%20work!%0A%0A%2F%2F%20%E2%9C%85%20Correct%20-%20reassigning%20module.exports%0Amodule.exports%20%3D%20%7B%20name%3A%20'John'%20%7D%3B%0A%0A%2F%2F%20%E2%9D%8C%20Wrong%20-%20exports%20is%20now%20different%20from%20module.exports%0Amodule.exports%20%3D%20%7B%20name%3A%20'John'%20%7D%3B%0Aexports.age%20%3D%2030%3B%20%2F%2F%20This%20won't%20be%20exported!%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// ‚úÖ Correct usage
exports.name = 'John';
exports.age = 30;
// Same as: module.exports.name = 'John'; module.exports.age = 30;

// ‚úÖ Correct usage
module.exports = {
  name: 'John',
  age: 30
};

// ‚ùå Wrong - breaks the reference
exports = { name: 'John' }; // This won't work!

// ‚úÖ Correct - reassigning module.exports
module.exports = { name: 'John' };

// ‚ùå Wrong - exports is now different from module.exports
module.exports = { name: 'John' };
exports.age = 30; // This won't be exported!
</code></pre>
</div>

<p>---</p>

<p><strong>75. How does Node.js module caching work?</strong></p>

<p><strong>Answer:</strong> Node.js caches modules after first load to improve performance and ensure singleton behavior.</p>

<p><strong>Caching Mechanism:</strong></p>

<p>- Modules cached by resolved filename</p>
<p>- Subsequent `require()` calls return cached version</p>
<p>- Cache stored in `require.cache` object</p>
<p>- Modules execute only once</p>


<p><strong>Example:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20counter.js%0Alet%20count%20%3D%200%3B%0Amodule.exports%20%3D%20%7B%0A%20%20increment%3A%20()%20%3D%3E%20%2B%2Bcount%2C%0A%20%20getCount%3A%20()%20%3D%3E%20count%0A%7D%3B%0A%0A%2F%2F%20app.js%0Aconst%20counter1%20%3D%20require('.%2Fcounter')%3B%0Aconst%20counter2%20%3D%20require('.%2Fcounter')%3B%20%2F%2F%20Returns%20cached%20version%0A%0Acounter1.increment()%3B%0Aconsole.log(counter2.getCount())%3B%20%2F%2F%201%20(same%20instance!)%0A%0A%2F%2F%20Clear%20cache%0Adelete%20require.cache%5Brequire.resolve('.%2Fcounter')%5D%3B%0Aconst%20counter3%20%3D%20require('.%2Fcounter')%3B%20%2F%2F%20Fresh%20instance%0Aconsole.log(counter3.getCount())%3B%20%2F%2F%200%20(new%20instance)%0A%0A%2F%2F%20View%20all%20cached%20modules%0Aconsole.log(Object.keys(require.cache))%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// counter.js
let count = 0;
module.exports = {
  increment: () =&gt; ++count,
  getCount: () =&gt; count
};

// app.js
const counter1 = require('./counter');
const counter2 = require('./counter'); // Returns cached version

counter1.increment();
console.log(counter2.getCount()); // 1 (same instance!)

// Clear cache
delete require.cache[require.resolve('./counter')];
const counter3 = require('./counter'); // Fresh instance
console.log(counter3.getCount()); // 0 (new instance)

// View all cached modules
console.log(Object.keys(require.cache));
</code></pre>
</div>

<p>---</p>

<p><strong>76. What is the purpose of `package.json`?</strong></p>

<p><strong>Answer:</strong> `package.json` is the manifest file for Node.js projects containing metadata and configuration.</p>

<p><strong>Key Sections:</strong></p>

<p>- <strong>Metadata</strong>: name, version, description, author</p>
<p>- <strong>Dependencies</strong>: runtime and development dependencies</p>
<p>- <strong>Scripts</strong>: Custom commands</p>
<p>- <strong>Configuration</strong>: Entry points, engines, etc.</p>


<p><strong>Example:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">json</span>
        <button class="copy-btn" data-code="%7B%0A%20%20%22name%22%3A%20%22my-app%22%2C%0A%20%20%22version%22%3A%20%221.0.0%22%2C%0A%20%20%22description%22%3A%20%22A%20sample%20Node.js%20application%22%2C%0A%20%20%22main%22%3A%20%22index.js%22%2C%0A%20%20%22scripts%22%3A%20%7B%0A%20%20%20%20%22start%22%3A%20%22node%20index.js%22%2C%0A%20%20%20%20%22dev%22%3A%20%22nodemon%20index.js%22%2C%0A%20%20%20%20%22test%22%3A%20%22jest%22%2C%0A%20%20%20%20%22build%22%3A%20%22webpack%20--mode%20production%22%0A%20%20%7D%2C%0A%20%20%22dependencies%22%3A%20%7B%0A%20%20%20%20%22express%22%3A%20%22%5E4.18.0%22%2C%0A%20%20%20%20%22mongoose%22%3A%20%22%5E6.0.0%22%0A%20%20%7D%2C%0A%20%20%22devDependencies%22%3A%20%7B%0A%20%20%20%20%22nodemon%22%3A%20%22%5E2.0.0%22%2C%0A%20%20%20%20%22jest%22%3A%20%22%5E28.0.0%22%0A%20%20%7D%2C%0A%20%20%22engines%22%3A%20%7B%0A%20%20%20%20%22node%22%3A%20%22%3E%3D14.0.0%22%0A%20%20%7D%2C%0A%20%20%22keywords%22%3A%20%5B%22web%22%2C%20%22api%22%2C%20%22nodejs%22%5D%2C%0A%20%20%22author%22%3A%20%22Your%20Name%22%2C%0A%20%20%22license%22%3A%20%22MIT%22%0A%7D%0A">Copy</button>
    </div>
    <pre><code class="language-json">{
  "name": "my-app",
  "version": "1.0.0",
  "description": "A sample Node.js application",
  "main": "index.js",
  "scripts": {
    "start": "node index.js",
    "dev": "nodemon index.js",
    "test": "jest",
    "build": "webpack --mode production"
  },
  "dependencies": {
    "express": "^4.18.0",
    "mongoose": "^6.0.0"
  },
  "devDependencies": {
    "nodemon": "^2.0.0",
    "jest": "^28.0.0"
  },
  "engines": {
    "node": "&gt;=14.0.0"
  },
  "keywords": ["web", "api", "nodejs"],
  "author": "Your Name",
  "license": "MIT"
}
</code></pre>
</div>

<p>---</p>

<p><strong>77. What is npm and how do you use it?</strong></p>

<p><strong>Answer:</strong> npm (Node Package Manager) is the default package manager for Node.js.</p>

<p><strong>Core Functions:</strong></p>

<p>- Install packages from npm registry</p>
<p>- Manage project dependencies</p>
<p>- Run scripts</p>
<p>- Publish packages</p>


<p><strong>Common Commands:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20Initialize%20project%0Anpm%20init%0Anpm%20init%20-y%20%20%23%20Skip%20questions%0A%0A%23%20Install%20packages%0Anpm%20install%20express%20%20%20%20%20%20%20%20%20%20%23%20Production%20dependency%0Anpm%20install%20-D%20nodemon%20%20%20%20%20%20%23%20Development%20dependency%0Anpm%20install%20-g%20pm2%20%20%20%20%20%20%20%20%20%20%23%20Global%20installation%0A%0A%23%20Install%20from%20package.json%0Anpm%20install%0A%0A%23%20Update%20packages%0Anpm%20update%0Anpm%20update%20express%0A%0A%23%20Remove%20packages%0Anpm%20uninstall%20express%0Anpm%20uninstall%20-D%20nodemon%0A%0A%23%20Run%20scripts%0Anpm%20start%0Anpm%20run%20dev%0Anpm%20test%0A%0A%23%20View%20information%0Anpm%20list%20%20%20%20%20%20%20%20%20%20%20%23%20Installed%20packages%0Anpm%20outdated%20%20%20%20%20%20%20%23%20Outdated%20packages%0Anpm%20audit%20%20%20%20%20%20%20%20%20%20%23%20Security%20vulnerabilities%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># Initialize project
npm init
npm init -y  # Skip questions

# Install packages
npm install express          # Production dependency
npm install -D nodemon      # Development dependency
npm install -g pm2          # Global installation

# Install from package.json
npm install

# Update packages
npm update
npm update express

# Remove packages
npm uninstall express
npm uninstall -D nodemon

# Run scripts
npm start
npm run dev
npm test

# View information
npm list           # Installed packages
npm outdated       # Outdated packages
npm audit          # Security vulnerabilities
</code></pre>
</div>

<p>---</p>

<p><strong>78. What is the difference between dependencies and devDependencies?</strong></p>

<p><strong>Answer:</strong></p>

<p><strong>dependencies:</strong></p>

<p>- Required for application to run in production</p>
<p>- Installed in production environments</p>
<p>- Examples: express, mongoose, lodash</p>


<p><strong>devDependencies:</strong></p>

<p>- Only needed during development</p>
<p>- Not installed in production (with `npm install --production`)</p>
<p>- Examples: testing frameworks, build tools, linters</p>


<p><strong>Example:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">json</span>
        <button class="copy-btn" data-code="%7B%0A%20%20%22dependencies%22%3A%20%7B%0A%20%20%20%20%22express%22%3A%20%22%5E4.18.0%22%2C%20%20%20%20%20%20%2F%2F%20Web%20framework%20(needed%20in%20production)%0A%20%20%20%20%22mongoose%22%3A%20%22%5E6.0.0%22%2C%20%20%20%20%20%20%2F%2F%20Database%20ORM%20(needed%20in%20production)%0A%20%20%20%20%22bcrypt%22%3A%20%22%5E5.0.0%22%20%20%20%20%20%20%20%20%20%2F%2F%20Password%20hashing%20(needed%20in%20production)%0A%20%20%7D%2C%0A%20%20%22devDependencies%22%3A%20%7B%0A%20%20%20%20%22nodemon%22%3A%20%22%5E2.0.0%22%2C%20%20%20%20%20%20%20%2F%2F%20Development%20server%20(dev%20only)%0A%20%20%20%20%22jest%22%3A%20%22%5E28.0.0%22%2C%20%20%20%20%20%20%20%20%20%2F%2F%20Testing%20framework%20(dev%20only)%0A%20%20%20%20%22eslint%22%3A%20%22%5E8.0.0%22%20%20%20%20%20%20%20%20%20%2F%2F%20Code%20linter%20(dev%20only)%0A%20%20%7D%0A%7D%0A">Copy</button>
    </div>
    <pre><code class="language-json">{
  "dependencies": {
    "express": "^4.18.0",      // Web framework (needed in production)
    "mongoose": "^6.0.0",      // Database ORM (needed in production)
    "bcrypt": "^5.0.0"         // Password hashing (needed in production)
  },
  "devDependencies": {
    "nodemon": "^2.0.0",       // Development server (dev only)
    "jest": "^28.0.0",         // Testing framework (dev only)
    "eslint": "^8.0.0"         // Code linter (dev only)
  }
}
</code></pre>
</div>

<p><strong>Installation:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20Install%20all%20dependencies%0Anpm%20install%0A%0A%23%20Install%20only%20production%20dependencies%0Anpm%20install%20--production%0Anpm%20install%20--only%3Dprod%0A%0A%23%20Install%20only%20development%20dependencies%0Anpm%20install%20--only%3Ddev%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># Install all dependencies
npm install

# Install only production dependencies
npm install --production
npm install --only=prod

# Install only development dependencies
npm install --only=dev
</code></pre>
</div>

<p>---</p>

<p><strong>79. What is semantic versioning (semver)?</strong></p>

<p><strong>Answer:</strong> Semantic versioning is a versioning scheme using three numbers: MAJOR.MINOR.PATCH</p>

<p><strong>Version Format:</strong></p>

<p>- <strong>MAJOR</strong>: Breaking changes (incompatible API changes)</p>
<p>- <strong>MINOR</strong>: New features (backward compatible)</p>
<p>- <strong>PATCH</strong>: Bug fixes (backward compatible)</p>


<p><strong>npm Version Ranges:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">json</span>
        <button class="copy-btn" data-code="%7B%0A%20%20%22dependencies%22%3A%20%7B%0A%20%20%20%20%22express%22%3A%20%224.18.2%22%2C%20%20%20%20%20%20%2F%2F%20Exact%20version%0A%20%20%20%20%22mongoose%22%3A%20%22~6.5.0%22%2C%20%20%20%20%20%2F%2F%20Patch%20updates%20(6.5.x)%0A%20%20%20%20%22lodash%22%3A%20%22%5E4.17.0%22%2C%20%20%20%20%20%20%2F%2F%20Minor%20updates%20(4.x.x)%0A%20%20%20%20%22axios%22%3A%20%22%3E%3D1.0.0%22%2C%20%20%20%20%20%20%20%2F%2F%20Greater%20than%20or%20equal%0A%20%20%20%20%22moment%22%3A%20%221.0.0%20-%202.0.0%22%20%2F%2F%20Range%0A%20%20%7D%0A%7D%0A">Copy</button>
    </div>
    <pre><code class="language-json">{
  "dependencies": {
    "express": "4.18.2",      // Exact version
    "mongoose": "~6.5.0",     // Patch updates (6.5.x)
    "lodash": "^4.17.0",      // Minor updates (4.x.x)
    "axios": "&gt;=1.0.0",       // Greater than or equal
    "moment": "1.0.0 - 2.0.0" // Range
  }
}
</code></pre>
</div>

<p><strong>Version Symbols:</strong></p>

<p>- `^4.17.0`: Compatible within major version (4.x.x)</p>
<p>- `~4.17.0`: Compatible within minor version (4.17.x)</p>
<p>- `4.17.0`: Exact version only</p>


<p><strong>Example:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20Update%20version%0Anpm%20version%20patch%20%20%23%201.0.0%20%E2%86%92%201.0.1%0Anpm%20version%20minor%20%20%23%201.0.1%20%E2%86%92%201.1.0%0Anpm%20version%20major%20%20%23%201.1.0%20%E2%86%92%202.0.0%0A%0A%23%20Check%20versions%0Anpm%20list%0Anpm%20outdated%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># Update version
npm version patch  # 1.0.0 ‚Üí 1.0.1
npm version minor  # 1.0.1 ‚Üí 1.1.0
npm version major  # 1.1.0 ‚Üí 2.0.0

# Check versions
npm list
npm outdated
</code></pre>
</div>

<p>---</p>

<p><strong>80. How do you create a global npm package?</strong></p>

<p><strong>Answer:</strong> Creating a global npm package involves several steps:</p>

<p><strong>1. Package Structure:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">plaintext</span>
        <button class="copy-btn" data-code="my-cli-tool%2F%0A%E2%94%9C%E2%94%80%E2%94%80%20package.json%0A%E2%94%9C%E2%94%80%E2%94%80%20bin%2F%0A%E2%94%82%20%20%20%E2%94%94%E2%94%80%E2%94%80%20my-tool%0A%E2%94%9C%E2%94%80%E2%94%80%20lib%2F%0A%E2%94%82%20%20%20%E2%94%94%E2%94%80%E2%94%80%20index.js%0A%E2%94%94%E2%94%80%E2%94%80%20README.md%0A">Copy</button>
    </div>
    <pre><code class="language-plaintext">my-cli-tool/
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ bin/
‚îÇ   ‚îî‚îÄ‚îÄ my-tool
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îî‚îÄ‚îÄ index.js
‚îî‚îÄ‚îÄ README.md
</code></pre>
</div>

<p><strong>2. package.json Configuration:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">json</span>
        <button class="copy-btn" data-code="%7B%0A%20%20%22name%22%3A%20%22my-cli-tool%22%2C%0A%20%20%22version%22%3A%20%221.0.0%22%2C%0A%20%20%22description%22%3A%20%22A%20sample%20CLI%20tool%22%2C%0A%20%20%22main%22%3A%20%22lib%2Findex.js%22%2C%0A%20%20%22bin%22%3A%20%7B%0A%20%20%20%20%22my-tool%22%3A%20%22.%2Fbin%2Fmy-tool%22%0A%20%20%7D%2C%0A%20%20%22preferGlobal%22%3A%20true%2C%0A%20%20%22engines%22%3A%20%7B%0A%20%20%20%20%22node%22%3A%20%22%3E%3D12.0.0%22%0A%20%20%7D%2C%0A%20%20%22keywords%22%3A%20%5B%22cli%22%2C%20%22tool%22%5D%2C%0A%20%20%22author%22%3A%20%22Your%20Name%22%2C%0A%20%20%22license%22%3A%20%22MIT%22%0A%7D%0A">Copy</button>
    </div>
    <pre><code class="language-json">{
  "name": "my-cli-tool",
  "version": "1.0.0",
  "description": "A sample CLI tool",
  "main": "lib/index.js",
  "bin": {
    "my-tool": "./bin/my-tool"
  },
  "preferGlobal": true,
  "engines": {
    "node": "&gt;=12.0.0"
  },
  "keywords": ["cli", "tool"],
  "author": "Your Name",
  "license": "MIT"
}
</code></pre>
</div>

<p><strong>3. Executable Script (bin/my-tool):</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%23!%2Fusr%2Fbin%2Fenv%20node%0A%0Aconst%20program%20%3D%20require('commander')%3B%0Aconst%20%7B%20version%20%7D%20%3D%20require('..%2Fpackage.json')%3B%0A%0Aprogram%0A%20%20.version(version)%0A%20%20.description('My%20CLI%20tool')%0A%20%20.option('-v%2C%20--verbose'%2C%20'Verbose%20output')%0A%20%20.parse(process.argv)%3B%0A%0Aconsole.log('Hello%20from%20my%20CLI%20tool!')%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">#!/usr/bin/env node

const program = require('commander');
const { version } = require('../package.json');

program
  .version(version)
  .description('My CLI tool')
  .option('-v, --verbose', 'Verbose output')
  .parse(process.argv);

console.log('Hello from my CLI tool!');
</code></pre>
</div>

<p><strong>4. Publishing:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20Login%20to%20npm%0Anpm%20login%0A%0A%23%20Publish%20package%0Anpm%20publish%0A%0A%23%20Install%20globally%0Anpm%20install%20-g%20my-cli-tool%0A%0A%23%20Use%20the%20tool%0Amy-tool%20--help%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># Login to npm
npm login

# Publish package
npm publish

# Install globally
npm install -g my-cli-tool

# Use the tool
my-tool --help
</code></pre>
</div>

<p>---</p>

<p><strong>81. What is `package-lock.json` and why is it important?</strong></p>

<p><strong>Answer:</strong> `package-lock.json` is an automatically generated file that locks dependency versions for consistent installs.</p>

<p><strong>Purpose:</strong></p>

<p>- <strong>Deterministic installs</strong>: Same versions across environments</p>
<p>- <strong>Security</strong>: Prevents malicious package substitution</p>
<p>- <strong>Performance</strong>: Faster installs with cached metadata</p>
<p>- <strong>Dependency tree</strong>: Complete dependency resolution</p>


<p><strong>Key Features:</strong></p>

<p>- Locks exact versions of all dependencies and sub-dependencies</p>
<p>- Contains integrity hashes for security</p>
<p>- Tracks dependency resolution metadata</p>
<p>- Should be committed to version control</p>


<p><strong>Example Structure:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">json</span>
        <button class="copy-btn" data-code="%7B%0A%20%20%22name%22%3A%20%22my-app%22%2C%0A%20%20%22version%22%3A%20%221.0.0%22%2C%0A%20%20%22lockfileVersion%22%3A%202%2C%0A%20%20%22requires%22%3A%20true%2C%0A%20%20%22packages%22%3A%20%7B%0A%20%20%20%20%22%22%3A%20%7B%0A%20%20%20%20%20%20%22name%22%3A%20%22my-app%22%2C%0A%20%20%20%20%20%20%22version%22%3A%20%221.0.0%22%2C%0A%20%20%20%20%20%20%22dependencies%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%22express%22%3A%20%22%5E4.18.0%22%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%2C%0A%20%20%20%20%22node_modules%2Fexpress%22%3A%20%7B%0A%20%20%20%20%20%20%22version%22%3A%20%224.18.2%22%2C%0A%20%20%20%20%20%20%22resolved%22%3A%20%22https%3A%2F%2Fregistry.npmjs.org%2Fexpress%2F-%2Fexpress-4.18.2.tgz%22%2C%0A%20%20%20%20%20%20%22integrity%22%3A%20%22sha512-...%22%2C%0A%20%20%20%20%20%20%22dependencies%22%3A%20%7B%0A%20%20%20%20%20%20%20%20%22accepts%22%3A%20%22~1.3.8%22%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A">Copy</button>
    </div>
    <pre><code class="language-json">{
  "name": "my-app",
  "version": "1.0.0",
  "lockfileVersion": 2,
  "requires": true,
  "packages": {
    "": {
      "name": "my-app",
      "version": "1.0.0",
      "dependencies": {
        "express": "^4.18.0"
      }
    },
    "node_modules/express": {
      "version": "4.18.2",
      "resolved": "https://registry.npmjs.org/express/-/express-4.18.2.tgz",
      "integrity": "sha512-...",
      "dependencies": {
        "accepts": "~1.3.8"
      }
    }
  }
}
</code></pre>
</div>

<p>---</p>

<p><strong>82. How do you handle different Node.js versions in a project?</strong></p>

<p><strong>Answer:</strong> There are several tools and methods to manage Node.js versions:</p>

<p><strong>1. .nvmrc File:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20.nvmrc%0A14.18.0%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># .nvmrc
14.18.0
</code></pre>
</div>

<p><strong>2. package.json Engines:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">json</span>
        <button class="copy-btn" data-code="%7B%0A%20%20%22engines%22%3A%20%7B%0A%20%20%20%20%22node%22%3A%20%22%3E%3D14.0.0%22%2C%0A%20%20%20%20%22npm%22%3A%20%22%3E%3D6.0.0%22%0A%20%20%7D%0A%7D%0A">Copy</button>
    </div>
    <pre><code class="language-json">{
  "engines": {
    "node": "&gt;=14.0.0",
    "npm": "&gt;=6.0.0"
  }
}
</code></pre>
</div>

<p><strong>3. Using nvm (Node Version Manager):</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20Install%20specific%20version%0Anvm%20install%2016.14.0%0Anvm%20use%2016.14.0%0A%0A%23%20Use%20version%20from%20.nvmrc%0Anvm%20use%0A%0A%23%20Set%20default%20version%0Anvm%20alias%20default%2016.14.0%0A%0A%23%20List%20installed%20versions%0Anvm%20list%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># Install specific version
nvm install 16.14.0
nvm use 16.14.0

# Use version from .nvmrc
nvm use

# Set default version
nvm alias default 16.14.0

# List installed versions
nvm list
</code></pre>
</div>

<p><strong>4. Using Docker:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">dockerfile</span>
        <button class="copy-btn" data-code="FROM%20node%3A16.14.0-alpine%0AWORKDIR%20%2Fapp%0ACOPY%20package*.json%20.%2F%0ARUN%20npm%20install%0ACOPY%20.%20.%0AEXPOSE%203000%0ACMD%20%5B%22npm%22%2C%20%22start%22%5D%0A">Copy</button>
    </div>
    <pre><code class="language-dockerfile">FROM node:16.14.0-alpine
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
EXPOSE 3000
CMD ["npm", "start"]
</code></pre>
</div>

<p><strong>5. CI/CD Configuration:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">yaml</span>
        <button class="copy-btn" data-code="%23%20.github%2Fworkflows%2Ftest.yml%0Aname%3A%20Test%0Aon%3A%20%5Bpush%2C%20pull_request%5D%0Ajobs%3A%0A%20%20test%3A%0A%20%20%20%20runs-on%3A%20ubuntu-latest%0A%20%20%20%20strategy%3A%0A%20%20%20%20%20%20matrix%3A%0A%20%20%20%20%20%20%20%20node-version%3A%20%5B14.x%2C%2016.x%2C%2018.x%5D%0A%20%20%20%20steps%3A%0A%20%20%20%20%20%20-%20uses%3A%20actions%2Fcheckout%40v2%0A%20%20%20%20%20%20-%20uses%3A%20actions%2Fsetup-node%40v2%0A%20%20%20%20%20%20%20%20with%3A%0A%20%20%20%20%20%20%20%20%20%20node-version%3A%20%24%7B%7B%20matrix.node-version%20%7D%7D%0A%20%20%20%20%20%20-%20run%3A%20npm%20install%0A%20%20%20%20%20%20-%20run%3A%20npm%20test%0A">Copy</button>
    </div>
    <pre><code class="language-yaml"># .github/workflows/test.yml
name: Test
on: [push, pull_request]
jobs:
  test:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        node-version: [14.x, 16.x, 18.x]
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v2
        with:
          node-version: ${{ matrix.node-version }}
      - run: npm install
      - run: npm test
</code></pre>
</div>

<p>---</p>

<p><strong>83. What are peer dependencies?</strong></p>

<p><strong>Answer:</strong> Peer dependencies specify packages that your package expects to be installed by the consuming application.</p>

<p><strong>Use Cases:</strong></p>

<p>- Plugin systems (webpack plugins, babel plugins)</p>
<p>- Framework extensions (React components)</p>
<p>- Avoiding duplicate installations of large libraries</p>


<p><strong>Example:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">json</span>
        <button class="copy-btn" data-code="%7B%0A%20%20%22name%22%3A%20%22my-react-component%22%2C%0A%20%20%22peerDependencies%22%3A%20%7B%0A%20%20%20%20%22react%22%3A%20%22%3E%3D16.8.0%22%2C%0A%20%20%20%20%22react-dom%22%3A%20%22%3E%3D16.8.0%22%0A%20%20%7D%2C%0A%20%20%22peerDependenciesMeta%22%3A%20%7B%0A%20%20%20%20%22react-dom%22%3A%20%7B%0A%20%20%20%20%20%20%22optional%22%3A%20true%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A">Copy</button>
    </div>
    <pre><code class="language-json">{
  "name": "my-react-component",
  "peerDependencies": {
    "react": "&gt;=16.8.0",
    "react-dom": "&gt;=16.8.0"
  },
  "peerDependenciesMeta": {
    "react-dom": {
      "optional": true
    }
  }
}
</code></pre>
</div>

<p><strong>Installation Behavior:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20npm%207%2B%20automatically%20installs%20peer%20dependencies%0Anpm%20install%20my-react-component%0A%0A%23%20npm%206%20and%20below%20shows%20warnings%0Anpm%20WARN%20my-react-component%401.0.0%20requires%20a%20peer%20of%20react%40%3E%3D16.8.0%0A%0A%23%20Manual%20installation%0Anpm%20install%20react%20react-dom%20my-react-component%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># npm 7+ automatically installs peer dependencies
npm install my-react-component

# npm 6 and below shows warnings
npm WARN my-react-component@1.0.0 requires a peer of react@&gt;=16.8.0

# Manual installation
npm install react react-dom my-react-component
</code></pre>
</div>

<p><strong>Plugin Example:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20webpack-plugin.js%0Amodule.exports%20%3D%20class%20MyWebpackPlugin%20%7B%0A%20%20apply(compiler)%20%7B%0A%20%20%20%20%2F%2F%20Expects%20webpack%20to%20be%20available%0A%20%20%20%20compiler.hooks.done.tap('MyPlugin'%2C%20(stats)%20%3D%3E%20%7B%0A%20%20%20%20%20%20console.log('Build%20completed!')%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%7D%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// webpack-plugin.js
module.exports = class MyWebpackPlugin {
  apply(compiler) {
    // Expects webpack to be available
    compiler.hooks.done.tap('MyPlugin', (stats) =&gt; {
      console.log('Build completed!');
    });
  }
};
</code></pre>
</div>

<p>---</p>

<p><strong>84. How do you publish a package to npm?</strong></p>

<p><strong>Answer:</strong> Publishing to npm involves several steps:</p>

<p><strong>1. Prepare Package:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">json</span>
        <button class="copy-btn" data-code="%7B%0A%20%20%22name%22%3A%20%22my-awesome-package%22%2C%0A%20%20%22version%22%3A%20%221.0.0%22%2C%0A%20%20%22description%22%3A%20%22An%20awesome%20Node.js%20package%22%2C%0A%20%20%22main%22%3A%20%22index.js%22%2C%0A%20%20%22files%22%3A%20%5B%0A%20%20%20%20%22index.js%22%2C%0A%20%20%20%20%22lib%2F%22%2C%0A%20%20%20%20%22README.md%22%0A%20%20%5D%2C%0A%20%20%22keywords%22%3A%20%5B%22awesome%22%2C%20%22nodejs%22%5D%2C%0A%20%20%22author%22%3A%20%22Your%20Name%20%3Cemail%40example.com%3E%22%2C%0A%20%20%22license%22%3A%20%22MIT%22%2C%0A%20%20%22repository%22%3A%20%7B%0A%20%20%20%20%22type%22%3A%20%22git%22%2C%0A%20%20%20%20%22url%22%3A%20%22https%3A%2F%2Fgithub.com%2Fusername%2Fmy-awesome-package.git%22%0A%20%20%7D%0A%7D%0A">Copy</button>
    </div>
    <pre><code class="language-json">{
  "name": "my-awesome-package",
  "version": "1.0.0",
  "description": "An awesome Node.js package",
  "main": "index.js",
  "files": [
    "index.js",
    "lib/",
    "README.md"
  ],
  "keywords": ["awesome", "nodejs"],
  "author": "Your Name &lt;email@example.com&gt;",
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "https://github.com/username/my-awesome-package.git"
  }
}
</code></pre>
</div>

<p><strong>2. Create Account and Login:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20Create%20account%20at%20npmjs.com%0Anpm%20adduser%0A%23%20or%0Anpm%20login%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># Create account at npmjs.com
npm adduser
# or
npm login
</code></pre>
</div>

<p><strong>3. Prepare for Publishing:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20Check%20what%20will%20be%20published%0Anpm%20pack%0Atar%20-tzf%20my-awesome-package-1.0.0.tgz%0A%0A%23%20Run%20tests%0Anpm%20test%0A%0A%23%20Check%20package%0Anpm%20run%20lint%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># Check what will be published
npm pack
tar -tzf my-awesome-package-1.0.0.tgz

# Run tests
npm test

# Check package
npm run lint
</code></pre>
</div>

<p><strong>4. Publish:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20Publish%20public%20package%0Anpm%20publish%0A%0A%23%20Publish%20scoped%20package%0Anpm%20publish%20--access%20public%0A%0A%23%20Publish%20beta%20version%0Anpm%20publish%20--tag%20beta%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># Publish public package
npm publish

# Publish scoped package
npm publish --access public

# Publish beta version
npm publish --tag beta
</code></pre>
</div>

<p><strong>5. Update Versions:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20Update%20version%20and%20publish%0Anpm%20version%20patch%20%26%26%20npm%20publish%0Anpm%20version%20minor%20%26%26%20npm%20publish%0Anpm%20version%20major%20%26%26%20npm%20publish%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># Update version and publish
npm version patch && npm publish
npm version minor && npm publish
npm version major && npm publish
</code></pre>
</div>

<p>---</p>

<p><strong>85. What is the difference between `npm install` and `npm ci`?</strong></p>

<p><strong>Answer:</strong></p>

<p><strong>npm install:</strong></p>

<p>- Installs dependencies from package.json</p>
<p>- Updates package-lock.json if needed</p>
<p>- Can install individual packages</p>
<p>- Slower but more flexible</p>


<p><strong>npm ci:</strong></p>

<p>- Installs from package-lock.json only</p>
<p>- Requires package-lock.json to exist</p>
<p>- Deletes node_modules before installing</p>
<p>- Faster and more reliable for CI/CD</p>


<p><strong>Comparison:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20Development%0Anpm%20install%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Install%2Fupdate%20dependencies%0Anpm%20install%20express%20%20%20%20%20%20%23%20Add%20new%20package%0A%0A%23%20Production%2FCI%0Anpm%20ci%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Clean%2C%20fast%2C%20reproducible%20install%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># Development
npm install              # Install/update dependencies
npm install express      # Add new package

# Production/CI
npm ci                   # Clean, fast, reproducible install
</code></pre>
</div>

<p><strong>When to use npm ci:</strong></p>

<p>- Continuous Integration/Deployment</p>
<p>- Production deployments</p>
<p>- Docker builds</p>
<p>- When you want exact dependency versions</p>


<p><strong>Example CI Pipeline:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">yaml</span>
        <button class="copy-btn" data-code="steps%3A%0A%20%20-%20name%3A%20Install%20dependencies%0A%20%20%20%20run%3A%20npm%20ci%20%20%23%20Not%20npm%20install%0A%20%20%0A%20%20-%20name%3A%20Run%20tests%0A%20%20%20%20run%3A%20npm%20test%0A%20%20%0A%20%20-%20name%3A%20Build%0A%20%20%20%20run%3A%20npm%20run%20build%0A">Copy</button>
    </div>
    <pre><code class="language-yaml">steps:
  - name: Install dependencies
    run: npm ci  # Not npm install
  
  - name: Run tests
    run: npm test
  
  - name: Build
    run: npm run build
</code></pre>
</div>

<p>---</p>

<p><strong>86. How do you create private npm packages?</strong></p>

<p><strong>Answer:</strong> Private packages can be created using npm's private registry or alternative registries.</p>

<p><strong>1. npm Private Packages:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">json</span>
        <button class="copy-btn" data-code="%7B%0A%20%20%22name%22%3A%20%22%40mycompany%2Fprivate-package%22%2C%0A%20%20%22version%22%3A%20%221.0.0%22%2C%0A%20%20%22private%22%3A%20true%2C%0A%20%20%22publishConfig%22%3A%20%7B%0A%20%20%20%20%22registry%22%3A%20%22https%3A%2F%2Fregistry.npmjs.org%2F%22%0A%20%20%7D%0A%7D%0A">Copy</button>
    </div>
    <pre><code class="language-json">{
  "name": "@mycompany/private-package",
  "version": "1.0.0",
  "private": true,
  "publishConfig": {
    "registry": "https://registry.npmjs.org/"
  }
}
</code></pre>
</div>

<p><strong>2. Publishing Private Package:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20Requires%20paid%20npm%20account%0Anpm%20publish%20--access%20restricted%0A%0A%23%20For%20scoped%20packages%0Anpm%20publish%20--access%20private%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># Requires paid npm account
npm publish --access restricted

# For scoped packages
npm publish --access private
</code></pre>
</div>

<p><strong>3. Installing Private Packages:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20Login%20with%20access%20to%20private%20packages%0Anpm%20login%0A%0A%23%20Install%20private%20package%0Anpm%20install%20%40mycompany%2Fprivate-package%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># Login with access to private packages
npm login

# Install private package
npm install @mycompany/private-package
</code></pre>
</div>

<p><strong>4. Alternative: Private Registry:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20Using%20Verdaccio%20(self-hosted)%0Anpm%20install%20-g%20verdaccio%0Averdaccio%0A%0A%23%20Configure%20registry%0Anpm%20set%20registry%20http%3A%2F%2Flocalhost%3A4873%2F%0A%0A%23%20Publish%20to%20private%20registry%0Anpm%20publish%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># Using Verdaccio (self-hosted)
npm install -g verdaccio
verdaccio

# Configure registry
npm set registry http://localhost:4873/

# Publish to private registry
npm publish
</code></pre>
</div>

<p><strong>5. .npmrc Configuration:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20.npmrc%0A%40mycompany%3Aregistry%3Dhttps%3A%2F%2Fnpm.mycompany.com%2F%0A%2F%2Fnpm.mycompany.com%2F%3A_authToken%3D%24%7BNPM_TOKEN%7D%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># .npmrc
@mycompany:registry=https://npm.mycompany.com/
//npm.mycompany.com/:_authToken=${NPM_TOKEN}
</code></pre>
</div>

<p>---</p>

<p><strong>87. What are npm scripts and how do you use them?</strong></p>

<p><strong>Answer:</strong> npm scripts are custom commands defined in package.json that can be executed with `npm run`.</p>

<p><strong>Basic Scripts:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">json</span>
        <button class="copy-btn" data-code="%7B%0A%20%20%22scripts%22%3A%20%7B%0A%20%20%20%20%22start%22%3A%20%22node%20server.js%22%2C%0A%20%20%20%20%22dev%22%3A%20%22nodemon%20server.js%22%2C%0A%20%20%20%20%22test%22%3A%20%22jest%22%2C%0A%20%20%20%20%22build%22%3A%20%22webpack%20--mode%20production%22%2C%0A%20%20%20%20%22lint%22%3A%20%22eslint%20src%2F%22%2C%0A%20%20%20%20%22clean%22%3A%20%22rm%20-rf%20dist%2F%22%0A%20%20%7D%0A%7D%0A">Copy</button>
    </div>
    <pre><code class="language-json">{
  "scripts": {
    "start": "node server.js",
    "dev": "nodemon server.js",
    "test": "jest",
    "build": "webpack --mode production",
    "lint": "eslint src/",
    "clean": "rm -rf dist/"
  }
}
</code></pre>
</div>

<p><strong>Running Scripts:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20Special%20scripts%20(no%20'run'%20needed)%0Anpm%20start%0Anpm%20test%0A%0A%23%20Custom%20scripts%20(need%20'run')%0Anpm%20run%20dev%0Anpm%20run%20build%0Anpm%20run%20lint%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># Special scripts (no 'run' needed)
npm start
npm test

# Custom scripts (need 'run')
npm run dev
npm run build
npm run lint
</code></pre>
</div>

<p><strong>Advanced Scripts:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">json</span>
        <button class="copy-btn" data-code="%7B%0A%20%20%22scripts%22%3A%20%7B%0A%20%20%20%20%22prebuild%22%3A%20%22npm%20run%20clean%22%2C%0A%20%20%20%20%22build%22%3A%20%22webpack%20--mode%20production%22%2C%0A%20%20%20%20%22postbuild%22%3A%20%22npm%20run%20test%22%2C%0A%20%20%20%20%0A%20%20%20%20%22start%3Adev%22%3A%20%22NODE_ENV%3Ddevelopment%20node%20server.js%22%2C%0A%20%20%20%20%22start%3Aprod%22%3A%20%22NODE_ENV%3Dproduction%20node%20server.js%22%2C%0A%20%20%20%20%0A%20%20%20%20%22test%3Aunit%22%3A%20%22jest%20--testPathPattern%3Dunit%22%2C%0A%20%20%20%20%22test%3Aintegration%22%3A%20%22jest%20--testPathPattern%3Dintegration%22%2C%0A%20%20%20%20%22test%3Awatch%22%3A%20%22jest%20--watch%22%2C%0A%20%20%20%20%0A%20%20%20%20%22deploy%22%3A%20%22npm%20run%20build%20%26%26%20npm%20run%20test%20%26%26%20git%20push%20heroku%20main%22%0A%20%20%7D%0A%7D%0A">Copy</button>
    </div>
    <pre><code class="language-json">{
  "scripts": {
    "prebuild": "npm run clean",
    "build": "webpack --mode production",
    "postbuild": "npm run test",
    
    "start:dev": "NODE_ENV=development node server.js",
    "start:prod": "NODE_ENV=production node server.js",
    
    "test:unit": "jest --testPathPattern=unit",
    "test:integration": "jest --testPathPattern=integration",
    "test:watch": "jest --watch",
    
    "deploy": "npm run build && npm run test && git push heroku main"
  }
}
</code></pre>
</div>

<p><strong>Script Features:</strong></p>

<p>- <strong>Pre/Post hooks</strong>: `prebuild`, `postbuild`</p>
<p>- <strong>Environment variables</strong>: `NODE_ENV=production`</p>
<p>- <strong>Cross-platform</strong>: Use packages like `cross-env`</p>
<p>- <strong>Parallel execution</strong>: Use `npm-run-all`</p>


<p>---</p>

<p><strong>88. How do you handle security vulnerabilities in npm packages?</strong></p>

<p><strong>Answer:</strong> npm provides several tools and practices for handling security vulnerabilities:</p>

<p><strong>1. npm audit:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20Check%20for%20vulnerabilities%0Anpm%20audit%0A%0A%23%20Get%20detailed%20report%0Anpm%20audit%20--audit-level%20moderate%0A%0A%23%20Fix%20automatically%0Anpm%20audit%20fix%0A%0A%23%20Force%20fix%20(may%20break%20compatibility)%0Anpm%20audit%20fix%20--force%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># Check for vulnerabilities
npm audit

# Get detailed report
npm audit --audit-level moderate

# Fix automatically
npm audit fix

# Force fix (may break compatibility)
npm audit fix --force
</code></pre>
</div>

<p><strong>2. Security Best Practices:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20Keep%20dependencies%20updated%0Anpm%20update%0Anpm%20outdated%0A%0A%23%20Use%20exact%20versions%20for%20critical%20packages%0A%22express%22%3A%20%224.18.2%22%20%20%23%20Instead%20of%20%22%5E4.18.2%22%0A%0A%23%20Regular%20security%20audits%0Anpm%20audit%20--production%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># Keep dependencies updated
npm update
npm outdated

# Use exact versions for critical packages
"express": "4.18.2"  # Instead of "^4.18.2"

# Regular security audits
npm audit --production
</code></pre>
</div>

<p><strong>3. .npmrc Security Configuration:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20.npmrc%0Aaudit-level%3Dmoderate%0Afund%3Dfalse%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># .npmrc
audit-level=moderate
fund=false
</code></pre>
</div>

<p><strong>4. Alternative Tools:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20Snyk%20(third-party%20security%20tool)%0Anpm%20install%20-g%20snyk%0Asnyk%20test%0Asnyk%20fix%0A%0A%23%20npm-check-updates%0Anpm%20install%20-g%20npm-check-updates%0Ancu%20-u%20%20%23%20Update%20package.json%0Anpm%20install%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># Snyk (third-party security tool)
npm install -g snyk
snyk test
snyk fix

# npm-check-updates
npm install -g npm-check-updates
ncu -u  # Update package.json
npm install
</code></pre>
</div>

<p><strong>5. CI/CD Security Checks:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">yaml</span>
        <button class="copy-btn" data-code="%23%20GitHub%20Actions%0A-%20name%3A%20Security%20Audit%0A%20%20run%3A%20npm%20audit%20--audit-level%20high%0A%0A-%20name%3A%20Check%20for%20outdated%20packages%0A%20%20run%3A%20npm%20outdated%0A">Copy</button>
    </div>
    <pre><code class="language-yaml"># GitHub Actions
- name: Security Audit
  run: npm audit --audit-level high

- name: Check for outdated packages
  run: npm outdated
</code></pre>
</div>

<p><strong>6. Package Verification:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20Verify%20package%20integrity%0Anpm%20install%20--package-lock-only%0Anpm%20ci%20--audit%0A%0A%23%20Check%20package%20signatures%0Anpm%20config%20set%20audit-level%20moderate%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># Verify package integrity
npm install --package-lock-only
npm ci --audit

# Check package signatures
npm config set audit-level moderate
</code></pre>
</div>

<p>---</p>

<p><strong>89. What is the node_modules folder and how does it work?</strong></p>

<p><strong>Answer:</strong> `node_modules` is where npm installs package dependencies for your project.</p>

<p><strong>Structure:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">plaintext</span>
        <button class="copy-btn" data-code="node_modules%2F%0A%E2%94%9C%E2%94%80%E2%94%80%20express%2F%0A%E2%94%82%20%20%20%E2%94%9C%E2%94%80%E2%94%80%20package.json%0A%E2%94%82%20%20%20%E2%94%9C%E2%94%80%E2%94%80%20index.js%0A%E2%94%82%20%20%20%E2%94%94%E2%94%80%E2%94%80%20node_modules%2F%20%20%20%20%20%23%20Express's%20dependencies%0A%E2%94%82%20%20%20%20%20%20%20%E2%94%94%E2%94%80%E2%94%80%20accepts%2F%0A%E2%94%9C%E2%94%80%E2%94%80%20mongoose%2F%0A%E2%94%82%20%20%20%E2%94%9C%E2%94%80%E2%94%80%20package.json%0A%E2%94%82%20%20%20%E2%94%94%E2%94%80%E2%94%80%20lib%2F%0A%E2%94%94%E2%94%80%E2%94%80%20.bin%2F%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23%20Executable%20scripts%0A%20%20%20%20%E2%94%9C%E2%94%80%E2%94%80%20nodemon%0A%20%20%20%20%E2%94%94%E2%94%80%E2%94%80%20jest%0A">Copy</button>
    </div>
    <pre><code class="language-plaintext">node_modules/
‚îú‚îÄ‚îÄ express/
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îú‚îÄ‚îÄ index.js
‚îÇ   ‚îî‚îÄ‚îÄ node_modules/     # Express's dependencies
‚îÇ       ‚îî‚îÄ‚îÄ accepts/
‚îú‚îÄ‚îÄ mongoose/
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îî‚îÄ‚îÄ lib/
‚îî‚îÄ‚îÄ .bin/                 # Executable scripts
    ‚îú‚îÄ‚îÄ nodemon
    ‚îî‚îÄ‚îÄ jest
</code></pre>
</div>

<p><strong>How Module Resolution Works:</strong></p>

<p>1. Check current directory's `node_modules`</p>
<p>2. Check parent directory's `node_modules`</p>
<p>3. Continue up the directory tree</p>
<p>4. Check global `node_modules`</p>


<p><strong>Example:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20From%20%2Fproject%2Fsrc%2Futils%2Fhelper.js%0Arequire('express')%3B%0A%0A%2F%2F%20Node.js%20searches%3A%0A%2F%2F%201.%20%2Fproject%2Fsrc%2Futils%2Fnode_modules%2Fexpress%0A%2F%2F%202.%20%2Fproject%2Fsrc%2Fnode_modules%2Fexpress%0A%2F%2F%203.%20%2Fproject%2Fnode_modules%2Fexpress%20%20%E2%86%90%20Found!%0A%2F%2F%204.%20%2Fnode_modules%2Fexpress%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// From /project/src/utils/helper.js
require('express');

// Node.js searches:
// 1. /project/src/utils/node_modules/express
// 2. /project/src/node_modules/express
// 3. /project/node_modules/express  ‚Üê Found!
// 4. /node_modules/express
</code></pre>
</div>

<p><strong>Best Practices:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20Don't%20commit%20node_modules%0Aecho%20%22node_modules%2F%22%20%3E%3E%20.gitignore%0A%0A%23%20Clean%20install%0Arm%20-rf%20node_modules%20package-lock.json%0Anpm%20install%0A%0A%23%20Check%20disk%20usage%0Adu%20-sh%20node_modules%2F%0A%0A%23%20Find%20duplicate%20packages%0Anpm%20ls%20--depth%3D0%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># Don't commit node_modules
echo "node_modules/" &gt;&gt; .gitignore

# Clean install
rm -rf node_modules package-lock.json
npm install

# Check disk usage
du -sh node_modules/

# Find duplicate packages
npm ls --depth=0
</code></pre>
</div>

<p>---</p>

<p><strong>90. How do you optimize npm package installation?</strong></p>

<p><strong>Answer:</strong> Several strategies can optimize npm package installation:</p>

<p><strong>1. Use npm ci in Production:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20Faster%2C%20more%20reliable%0Anpm%20ci%0A%0A%23%20Instead%20of%0Anpm%20install%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># Faster, more reliable
npm ci

# Instead of
npm install
</code></pre>
</div>

<p><strong>2. Configure npm for Speed:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20.npmrc%0Aregistry%3Dhttps%3A%2F%2Fregistry.npmjs.org%2F%0Acache%3D%2Ftmp%2F.npm%0Aprefer-offline%3Dtrue%0Aprogress%3Dfalse%0Aaudit%3Dfalse%0Afund%3Dfalse%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># .npmrc
registry=https://registry.npmjs.org/
cache=/tmp/.npm
prefer-offline=true
progress=false
audit=false
fund=false
</code></pre>
</div>

<p><strong>3. Use Package Caching:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20Docker%20example%0ACOPY%20package*.json%20.%2F%0ARUN%20npm%20ci%20--only%3Dproduction%20%26%26%20npm%20cache%20clean%20--force%0ACOPY%20.%20.%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># Docker example
COPY package*.json ./
RUN npm ci --only=production && npm cache clean --force
COPY . .
</code></pre>
</div>

<p><strong>4. Optimize Dependencies:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">json</span>
        <button class="copy-btn" data-code="%7B%0A%20%20%22dependencies%22%3A%20%7B%0A%20%20%20%20%22lodash%22%3A%20%22%5E4.17.21%22%0A%20%20%7D%2C%0A%20%20%22devDependencies%22%3A%20%7B%0A%20%20%20%20%22lodash%22%3A%20%22%5E4.17.21%22%20%20%2F%2F%20Avoid%20duplicates%0A%20%20%7D%0A%7D%0A">Copy</button>
    </div>
    <pre><code class="language-json">{
  "dependencies": {
    "lodash": "^4.17.21"
  },
  "devDependencies": {
    "lodash": "^4.17.21"  // Avoid duplicates
  }
}
</code></pre>
</div>

<p><strong>5. Use Yarn for Better Performance:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20Yarn%20is%20often%20faster%0Ayarn%20install%0Ayarn%20install%20--frozen-lockfile%20%20%23%20Like%20npm%20ci%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># Yarn is often faster
yarn install
yarn install --frozen-lockfile  # Like npm ci
</code></pre>
</div>

<p><strong>6. Bundle Analysis:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20Find%20large%20packages%0Anpm%20ls%20--depth%3D0%20--long%0Anpx%20bundle-phobia-cli%0A%0A%23%20Remove%20unused%20dependencies%0Anpx%20depcheck%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># Find large packages
npm ls --depth=0 --long
npx bundle-phobia-cli

# Remove unused dependencies
npx depcheck
</code></pre>
</div>

<p><strong>7. Production Optimizations:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20Install%20only%20production%20dependencies%0Anpm%20ci%20--only%3Dproduction%0A%0A%23%20Clean%20up%20after%20install%0Anpm%20cache%20clean%20--force%0Arm%20-rf%20%2Ftmp%2F*%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># Install only production dependencies
npm ci --only=production

# Clean up after install
npm cache clean --force
rm -rf /tmp/*
</code></pre>
</div>

<p>---</p>

<p>Thought for 1sPerfect! Let me continue with the <strong>File System & Streams</strong> section (Questions 91-110).</p>

<h2 id="file-system-streams-questions-91-110-">File System & Streams (Questions 91-110)</h2>

<p><strong>91. How do you read and write files in Node.js?</strong></p>

<p><strong>Answer:</strong> Node.js provides the `fs` module for file system operations with both synchronous and asynchronous methods.</p>

<p><strong>Reading Files:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20fs%20%3D%20require('fs')%3B%0A%0A%2F%2F%20Asynchronous%20(recommended)%0Afs.readFile('data.txt'%2C%20'utf8'%2C%20(err%2C%20data)%20%3D%3E%20%7B%0A%20%20if%20(err)%20throw%20err%3B%0A%20%20console.log(data)%3B%0A%7D)%3B%0A%0A%2F%2F%20Synchronous%20(blocks%20event%20loop)%0Atry%20%7B%0A%20%20const%20data%20%3D%20fs.readFileSync('data.txt'%2C%20'utf8')%3B%0A%20%20console.log(data)%3B%0A%7D%20catch%20(err)%20%7B%0A%20%20console.error(err)%3B%0A%7D%0A%0A%2F%2F%20Promise-based%20(modern%20approach)%0Aconst%20fsPromises%20%3D%20require('fs').promises%3B%0Aasync%20function%20readFileAsync()%20%7B%0A%20%20try%20%7B%0A%20%20%20%20const%20data%20%3D%20await%20fsPromises.readFile('data.txt'%2C%20'utf8')%3B%0A%20%20%20%20console.log(data)%3B%0A%20%20%7D%20catch%20(err)%20%7B%0A%20%20%20%20console.error(err)%3B%0A%20%20%7D%0A%7D%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const fs = require('fs');

// Asynchronous (recommended)
fs.readFile('data.txt', 'utf8', (err, data) =&gt; {
  if (err) throw err;
  console.log(data);
});

// Synchronous (blocks event loop)
try {
  const data = fs.readFileSync('data.txt', 'utf8');
  console.log(data);
} catch (err) {
  console.error(err);
}

// Promise-based (modern approach)
const fsPromises = require('fs').promises;
async function readFileAsync() {
  try {
    const data = await fsPromises.readFile('data.txt', 'utf8');
    console.log(data);
  } catch (err) {
    console.error(err);
  }
}
</code></pre>
</div>

<p><strong>Writing Files:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Asynchronous%20write%0Afs.writeFile('output.txt'%2C%20'Hello%20World'%2C%20'utf8'%2C%20(err)%20%3D%3E%20%7B%0A%20%20if%20(err)%20throw%20err%3B%0A%20%20console.log('File%20saved!')%3B%0A%7D)%3B%0A%0A%2F%2F%20Synchronous%20write%0Afs.writeFileSync('output.txt'%2C%20'Hello%20World'%2C%20'utf8')%3B%0A%0A%2F%2F%20Promise-based%20write%0Aawait%20fsPromises.writeFile('output.txt'%2C%20'Hello%20World'%2C%20'utf8')%3B%0A%0A%2F%2F%20Append%20to%20file%0Afs.appendFile('log.txt'%2C%20'New%20log%20entry%5Cn'%2C%20(err)%20%3D%3E%20%7B%0A%20%20if%20(err)%20throw%20err%3B%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Asynchronous write
fs.writeFile('output.txt', 'Hello World', 'utf8', (err) =&gt; {
  if (err) throw err;
  console.log('File saved!');
});

// Synchronous write
fs.writeFileSync('output.txt', 'Hello World', 'utf8');

// Promise-based write
await fsPromises.writeFile('output.txt', 'Hello World', 'utf8');

// Append to file
fs.appendFile('log.txt', 'New log entry\n', (err) =&gt; {
  if (err) throw err;
});
</code></pre>
</div>

<p>---</p>

<p><strong>92. What is the difference between synchronous and asynchronous file operations?</strong></p>

<p><strong>Answer:</strong></p>

<p><strong>Synchronous Operations:</strong></p>

<p>- Block the event loop until completion</p>
<p>- Return results directly</p>
<p>- Can cause performance issues</p>
<p>- Suitable for initialization or CLI tools</p>


<p><strong>Asynchronous Operations:</strong></p>

<p>- Non-blocking, use callbacks/promises</p>
<p>- Don't halt other operations</p>
<p>- Better for server applications</p>
<p>- Recommended for production</p>


<p><strong>Example:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20fs%20%3D%20require('fs')%3B%0A%0Aconsole.log('Start')%3B%0A%0A%2F%2F%20Synchronous%20-%20blocks%20execution%0Aconsole.log('Reading%20file%20synchronously...')%3B%0Aconst%20syncData%20%3D%20fs.readFileSync('large-file.txt'%2C%20'utf8')%3B%0Aconsole.log('Sync%20read%20complete')%3B%0A%0A%2F%2F%20Asynchronous%20-%20non-blocking%0Aconsole.log('Reading%20file%20asynchronously...')%3B%0Afs.readFile('large-file.txt'%2C%20'utf8'%2C%20(err%2C%20asyncData)%20%3D%3E%20%7B%0A%20%20console.log('Async%20read%20complete')%3B%0A%7D)%3B%0A%0Aconsole.log('End')%3B%0A%0A%2F%2F%20Output%3A%20Start%20%E2%86%92%20Reading%20file%20synchronously...%20%E2%86%92%20Sync%20read%20complete%20%E2%86%92%20Reading%20file%20asynchronously...%20%E2%86%92%20End%20%E2%86%92%20Async%20read%20complete%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const fs = require('fs');

console.log('Start');

// Synchronous - blocks execution
console.log('Reading file synchronously...');
const syncData = fs.readFileSync('large-file.txt', 'utf8');
console.log('Sync read complete');

// Asynchronous - non-blocking
console.log('Reading file asynchronously...');
fs.readFile('large-file.txt', 'utf8', (err, asyncData) =&gt; {
  console.log('Async read complete');
});

console.log('End');

// Output: Start ‚Üí Reading file synchronously... ‚Üí Sync read complete ‚Üí Reading file asynchronously... ‚Üí End ‚Üí Async read complete
</code></pre>
</div>

<p><strong>Performance Impact:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Bad%3A%20Blocks%20server%20for%20all%20requests%0Aapp.get('%2Fsync'%2C%20(req%2C%20res)%20%3D%3E%20%7B%0A%20%20const%20data%20%3D%20fs.readFileSync('large-file.txt')%3B%20%2F%2F%20Blocks!%0A%20%20res.send(data)%3B%0A%7D)%3B%0A%0A%2F%2F%20Good%3A%20Non-blocking%0Aapp.get('%2Fasync'%2C%20(req%2C%20res)%20%3D%3E%20%7B%0A%20%20fs.readFile('large-file.txt'%2C%20(err%2C%20data)%20%3D%3E%20%7B%0A%20%20%20%20if%20(err)%20return%20res.status(500).send('Error')%3B%0A%20%20%20%20res.send(data)%3B%0A%20%20%7D)%3B%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Bad: Blocks server for all requests
app.get('/sync', (req, res) =&gt; {
  const data = fs.readFileSync('large-file.txt'); // Blocks!
  res.send(data);
});

// Good: Non-blocking
app.get('/async', (req, res) =&gt; {
  fs.readFile('large-file.txt', (err, data) =&gt; {
    if (err) return res.status(500).send('Error');
    res.send(data);
  });
});
</code></pre>
</div>

<p>---</p>

<p><strong>93. What are streams in Node.js and why are they useful?</strong></p>

<p><strong>Answer:</strong> Streams are objects that handle reading/writing data piece by piece, rather than loading everything into memory at once.</p>

<p><strong>Types of Streams:</strong></p>

<p>- <strong>Readable</strong>: Read data (fs.createReadStream)</p>
<p>- <strong>Writable</strong>: Write data (fs.createWriteStream)</p>
<p>- <strong>Duplex</strong>: Both read and write (TCP socket)</p>
<p>- <strong>Transform</strong>: Modify data while reading/writing (zlib)</p>


<p><strong>Benefits:</strong></p>

<p>- <strong>Memory efficient</strong>: Process large files without loading entirely</p>
<p>- <strong>Time efficient</strong>: Start processing before all data is available</p>
<p>- <strong>Composable</strong>: Chain streams together with pipes</p>


<p><strong>Example:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20fs%20%3D%20require('fs')%3B%0A%0A%2F%2F%20Without%20streams%20-%20loads%20entire%20file%20into%20memory%0Afs.readFile('huge-file.txt'%2C%20(err%2C%20data)%20%3D%3E%20%7B%0A%20%20%2F%2F%201GB%20file%20%3D%201GB%20RAM%20usage%0A%20%20console.log(data.length)%3B%0A%7D)%3B%0A%0A%2F%2F%20With%20streams%20-%20processes%20chunks%0Aconst%20readStream%20%3D%20fs.createReadStream('huge-file.txt')%3B%0Alet%20totalSize%20%3D%200%3B%0A%0AreadStream.on('data'%2C%20(chunk)%20%3D%3E%20%7B%0A%20%20totalSize%20%2B%3D%20chunk.length%3B%0A%20%20console.log(%60Received%20%24%7Bchunk.length%7D%20bytes%60)%3B%0A%7D)%3B%0A%0AreadStream.on('end'%2C%20()%20%3D%3E%20%7B%0A%20%20console.log(%60Total%20size%3A%20%24%7BtotalSize%7D%20bytes%60)%3B%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const fs = require('fs');

// Without streams - loads entire file into memory
fs.readFile('huge-file.txt', (err, data) =&gt; {
  // 1GB file = 1GB RAM usage
  console.log(data.length);
});

// With streams - processes chunks
const readStream = fs.createReadStream('huge-file.txt');
let totalSize = 0;

readStream.on('data', (chunk) =&gt; {
  totalSize += chunk.length;
  console.log(`Received ${chunk.length} bytes`);
});

readStream.on('end', () =&gt; {
  console.log(`Total size: ${totalSize} bytes`);
});
</code></pre>
</div>

<p>---</p>

<p><strong>94. How do you create readable and writable streams?</strong></p>

<p><strong>Answer:</strong></p>

<p><strong>Creating Readable Streams:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20%7B%20Readable%20%7D%20%3D%20require('stream')%3B%0A%0A%2F%2F%20Method%201%3A%20Extend%20Readable%20class%0Aclass%20MyReadable%20extends%20Readable%20%7B%0A%20%20constructor(options)%20%7B%0A%20%20%20%20super(options)%3B%0A%20%20%20%20this.counter%20%3D%200%3B%0A%20%20%7D%0A%20%20%0A%20%20_read()%20%7B%0A%20%20%20%20if%20(this.counter%20%3C%205)%20%7B%0A%20%20%20%20%20%20this.push(%60Data%20chunk%20%24%7Bthis.counter%7D%5Cn%60)%3B%0A%20%20%20%20%20%20this.counter%2B%2B%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20this.push(null)%3B%20%2F%2F%20End%20stream%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A%0Aconst%20readable%20%3D%20new%20MyReadable()%3B%0Areadable.on('data'%2C%20(chunk)%20%3D%3E%20console.log(chunk.toString()))%3B%0A%0A%2F%2F%20Method%202%3A%20Using%20Readable.from()%0Aconst%20readable2%20%3D%20Readable.from(%5B'Hello'%2C%20'World'%2C%20'Stream'%5D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const { Readable } = require('stream');

// Method 1: Extend Readable class
class MyReadable extends Readable {
  constructor(options) {
    super(options);
    this.counter = 0;
  }
  
  _read() {
    if (this.counter &lt; 5) {
      this.push(`Data chunk ${this.counter}\n`);
      this.counter++;
    } else {
      this.push(null); // End stream
    }
  }
}

const readable = new MyReadable();
readable.on('data', (chunk) =&gt; console.log(chunk.toString()));

// Method 2: Using Readable.from()
const readable2 = Readable.from(['Hello', 'World', 'Stream']);
</code></pre>
</div>

<p><strong>Creating Writable Streams:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20%7B%20Writable%20%7D%20%3D%20require('stream')%3B%0A%0A%2F%2F%20Method%201%3A%20Extend%20Writable%20class%0Aclass%20MyWritable%20extends%20Writable%20%7B%0A%20%20_write(chunk%2C%20encoding%2C%20callback)%20%7B%0A%20%20%20%20console.log(%60Writing%3A%20%24%7Bchunk.toString()%7D%60)%3B%0A%20%20%20%20callback()%3B%20%2F%2F%20Signal%20completion%0A%20%20%7D%0A%7D%0A%0Aconst%20writable%20%3D%20new%20MyWritable()%3B%0Awritable.write('Hello')%3B%0Awritable.write('World')%3B%0Awritable.end()%3B%0A%0A%2F%2F%20Method%202%3A%20File%20write%20stream%0Aconst%20fileStream%20%3D%20fs.createWriteStream('output.txt')%3B%0AfileStream.write('Hello%20World')%3B%0AfileStream.end()%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const { Writable } = require('stream');

// Method 1: Extend Writable class
class MyWritable extends Writable {
  _write(chunk, encoding, callback) {
    console.log(`Writing: ${chunk.toString()}`);
    callback(); // Signal completion
  }
}

const writable = new MyWritable();
writable.write('Hello');
writable.write('World');
writable.end();

// Method 2: File write stream
const fileStream = fs.createWriteStream('output.txt');
fileStream.write('Hello World');
fileStream.end();
</code></pre>
</div>

<p>---</p>

<p><strong>95. What is the `pipe()` method and how does it work?</strong></p>

<p><strong>Answer:</strong> The `pipe()` method connects a readable stream to a writable stream, automatically handling data flow and backpressure.</p>

<p><strong>Basic Usage:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20fs%20%3D%20require('fs')%3B%0A%0A%2F%2F%20Copy%20file%20using%20streams%0Aconst%20readStream%20%3D%20fs.createReadStream('input.txt')%3B%0Aconst%20writeStream%20%3D%20fs.createWriteStream('output.txt')%3B%0A%0AreadStream.pipe(writeStream)%3B%0A%0A%2F%2F%20Equivalent%20to%3A%0AreadStream.on('data'%2C%20(chunk)%20%3D%3E%20%7B%0A%20%20writeStream.write(chunk)%3B%0A%7D)%3B%0AreadStream.on('end'%2C%20()%20%3D%3E%20%7B%0A%20%20writeStream.end()%3B%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const fs = require('fs');

// Copy file using streams
const readStream = fs.createReadStream('input.txt');
const writeStream = fs.createWriteStream('output.txt');

readStream.pipe(writeStream);

// Equivalent to:
readStream.on('data', (chunk) =&gt; {
  writeStream.write(chunk);
});
readStream.on('end', () =&gt; {
  writeStream.end();
});
</code></pre>
</div>

<p><strong>Chaining Pipes:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20zlib%20%3D%20require('zlib')%3B%0A%0Afs.createReadStream('input.txt')%0A%20%20.pipe(zlib.createGzip())%20%2F%2F%20Compress%0A%20%20.pipe(fs.createWriteStream('output.txt.gz'))%3B%20%2F%2F%20Write%20compressed%0A%0A%2F%2F%20HTTP%20example%0Aconst%20server%20%3D%20http.createServer((req%2C%20res)%20%3D%3E%20%7B%0A%20%20if%20(req.method%20%3D%3D%3D%20'GET')%20%7B%0A%20%20%20%20fs.createReadStream('large-file.pdf')%0A%20%20%20%20%20%20.pipe(res)%3B%20%2F%2F%20Stream%20directly%20to%20response%0A%20%20%7D%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const zlib = require('zlib');

fs.createReadStream('input.txt')
  .pipe(zlib.createGzip()) // Compress
  .pipe(fs.createWriteStream('output.txt.gz')); // Write compressed

// HTTP example
const server = http.createServer((req, res) =&gt; {
  if (req.method === 'GET') {
    fs.createReadStream('large-file.pdf')
      .pipe(res); // Stream directly to response
  }
});
</code></pre>
</div>

<p><strong>Error Handling:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20%7B%20pipeline%20%7D%20%3D%20require('stream')%3B%0A%0Apipeline(%0A%20%20fs.createReadStream('input.txt')%2C%0A%20%20zlib.createGzip()%2C%0A%20%20fs.createWriteStream('output.txt.gz')%2C%0A%20%20(err)%20%3D%3E%20%7B%0A%20%20%20%20if%20(err)%20%7B%0A%20%20%20%20%20%20console.error('Pipeline%20failed%3A'%2C%20err)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20console.log('Pipeline%20succeeded')%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const { pipeline } = require('stream');

pipeline(
  fs.createReadStream('input.txt'),
  zlib.createGzip(),
  fs.createWriteStream('output.txt.gz'),
  (err) =&gt; {
    if (err) {
      console.error('Pipeline failed:', err);
    } else {
      console.log('Pipeline succeeded');
    }
  }
);
</code></pre>
</div>

<p>---</p>

<p><strong>96. How do you handle large files efficiently?</strong></p>

<p><strong>Answer:</strong> Use streams and chunked processing to handle large files without memory issues.</p>

<p><strong>Streaming Large Files:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20fs%20%3D%20require('fs')%3B%0A%0A%2F%2F%20Bad%3A%20Loads%20entire%20file%20into%20memory%0Aapp.get('%2Fdownload-bad'%2C%20(req%2C%20res)%20%3D%3E%20%7B%0A%20%20fs.readFile('large-video.mp4'%2C%20(err%2C%20data)%20%3D%3E%20%7B%0A%20%20%20%20res.send(data)%3B%20%2F%2F%202GB%20file%20%3D%202GB%20RAM!%0A%20%20%7D)%3B%0A%7D)%3B%0A%0A%2F%2F%20Good%3A%20Stream%20the%20file%0Aapp.get('%2Fdownload-good'%2C%20(req%2C%20res)%20%3D%3E%20%7B%0A%20%20const%20stream%20%3D%20fs.createReadStream('large-video.mp4')%3B%0A%20%20stream.pipe(res)%3B%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const fs = require('fs');

// Bad: Loads entire file into memory
app.get('/download-bad', (req, res) =&gt; {
  fs.readFile('large-video.mp4', (err, data) =&gt; {
    res.send(data); // 2GB file = 2GB RAM!
  });
});

// Good: Stream the file
app.get('/download-good', (req, res) =&gt; {
  const stream = fs.createReadStream('large-video.mp4');
  stream.pipe(res);
});
</code></pre>
</div>

<p><strong>Processing Large Files:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20readline%20%3D%20require('readline')%3B%0A%0A%2F%2F%20Process%20large%20CSV%20line%20by%20line%0Aasync%20function%20processLargeCSV(filename)%20%7B%0A%20%20const%20fileStream%20%3D%20fs.createReadStream(filename)%3B%0A%20%20const%20rl%20%3D%20readline.createInterface(%7B%0A%20%20%20%20input%3A%20fileStream%2C%0A%20%20%20%20crlfDelay%3A%20Infinity%0A%20%20%7D)%3B%0A%0A%20%20let%20lineCount%20%3D%200%3B%0A%20%20for%20await%20(const%20line%20of%20rl)%20%7B%0A%20%20%20%20%2F%2F%20Process%20each%20line%20individually%0A%20%20%20%20const%20data%20%3D%20line.split('%2C')%3B%0A%20%20%20%20await%20processRecord(data)%3B%0A%20%20%20%20lineCount%2B%2B%3B%0A%20%20%20%20%0A%20%20%20%20if%20(lineCount%20%25%2010000%20%3D%3D%3D%200)%20%7B%0A%20%20%20%20%20%20console.log(%60Processed%20%24%7BlineCount%7D%20lines%60)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const readline = require('readline');

// Process large CSV line by line
async function processLargeCSV(filename) {
  const fileStream = fs.createReadStream(filename);
  const rl = readline.createInterface({
    input: fileStream,
    crlfDelay: Infinity
  });

  let lineCount = 0;
  for await (const line of rl) {
    // Process each line individually
    const data = line.split(',');
    await processRecord(data);
    lineCount++;
    
    if (lineCount % 10000 === 0) {
      console.log(`Processed ${lineCount} lines`);
    }
  }
}
</code></pre>
</div>

<p><strong>Chunked Upload Handling:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="app.post('%2Fupload'%2C%20(req%2C%20res)%20%3D%3E%20%7B%0A%20%20const%20writeStream%20%3D%20fs.createWriteStream('uploaded-file.dat')%3B%0A%20%20%0A%20%20req.on('data'%2C%20(chunk)%20%3D%3E%20%7B%0A%20%20%20%20writeStream.write(chunk)%3B%0A%20%20%7D)%3B%0A%20%20%0A%20%20req.on('end'%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20writeStream.end()%3B%0A%20%20%20%20res.send('Upload%20complete')%3B%0A%20%20%7D)%3B%0A%20%20%0A%20%20req.on('error'%2C%20(err)%20%3D%3E%20%7B%0A%20%20%20%20writeStream.destroy()%3B%0A%20%20%20%20res.status(500).send('Upload%20failed')%3B%0A%20%20%7D)%3B%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">app.post('/upload', (req, res) =&gt; {
  const writeStream = fs.createWriteStream('uploaded-file.dat');
  
  req.on('data', (chunk) =&gt; {
    writeStream.write(chunk);
  });
  
  req.on('end', () =&gt; {
    writeStream.end();
    res.send('Upload complete');
  });
  
  req.on('error', (err) =&gt; {
    writeStream.destroy();
    res.status(500).send('Upload failed');
  });
});
</code></pre>
</div>

<p>---</p>

<p><strong>97. What is the difference between `fs.createReadStream()` and `fs.readFile()`?</strong></p>

<p><strong>Answer:</strong></p>

<p><strong>fs.readFile():</strong></p>

<p>- Loads entire file into memory</p>
<p>- Returns complete file content</p>
<p>- Good for small files</p>
<p>- Higher memory usage</p>


<p><strong>fs.createReadStream():</strong></p>

<p>- Reads file in chunks</p>
<p>- Returns a stream object</p>
<p>- Good for large files</p>
<p>- Lower memory usage</p>


<p><strong>Comparison:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20fs%20%3D%20require('fs')%3B%0A%0A%2F%2F%20fs.readFile%20-%20loads%20everything%20at%20once%0Afs.readFile('large-file.txt'%2C%20'utf8'%2C%20(err%2C%20data)%20%3D%3E%20%7B%0A%20%20console.log(%60File%20size%3A%20%24%7Bdata.length%7D%20characters%60)%3B%0A%20%20%2F%2F%20Entire%20file%20is%20in%20memory%0A%7D)%3B%0A%0A%2F%2F%20fs.createReadStream%20-%20processes%20chunks%0Aconst%20stream%20%3D%20fs.createReadStream('large-file.txt'%2C%20%7B%20%0A%20%20encoding%3A%20'utf8'%2C%0A%20%20highWaterMark%3A%201024%20%2F%2F%201KB%20chunks%0A%7D)%3B%0A%0Alet%20totalSize%20%3D%200%3B%0Astream.on('data'%2C%20(chunk)%20%3D%3E%20%7B%0A%20%20totalSize%20%2B%3D%20chunk.length%3B%0A%20%20console.log(%60Chunk%20size%3A%20%24%7Bchunk.length%7D%60)%3B%0A%20%20%2F%2F%20Only%20current%20chunk%20is%20in%20memory%0A%7D)%3B%0A%0Astream.on('end'%2C%20()%20%3D%3E%20%7B%0A%20%20console.log(%60Total%20size%3A%20%24%7BtotalSize%7D%20characters%60)%3B%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const fs = require('fs');

// fs.readFile - loads everything at once
fs.readFile('large-file.txt', 'utf8', (err, data) =&gt; {
  console.log(`File size: ${data.length} characters`);
  // Entire file is in memory
});

// fs.createReadStream - processes chunks
const stream = fs.createReadStream('large-file.txt', { 
  encoding: 'utf8',
  highWaterMark: 1024 // 1KB chunks
});

let totalSize = 0;
stream.on('data', (chunk) =&gt; {
  totalSize += chunk.length;
  console.log(`Chunk size: ${chunk.length}`);
  // Only current chunk is in memory
});

stream.on('end', () =&gt; {
  console.log(`Total size: ${totalSize} characters`);
});
</code></pre>
</div>

<p><strong>Memory Usage Example:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%201GB%20file%20processing%0A%0A%2F%2F%20readFile%3A%20Uses%20~1GB%20RAM%0Afs.readFile('1gb-file.txt'%2C%20callback)%3B%0A%0A%2F%2F%20createReadStream%3A%20Uses%20~64KB%20RAM%20(default%20chunk%20size)%0Afs.createReadStream('1gb-file.txt').pipe(process.stdout)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// 1GB file processing

// readFile: Uses ~1GB RAM
fs.readFile('1gb-file.txt', callback);

// createReadStream: Uses ~64KB RAM (default chunk size)
fs.createReadStream('1gb-file.txt').pipe(process.stdout);
</code></pre>
</div>

<p>---</p>

<p><strong>98. How do you watch for file changes?</strong></p>

<p><strong>Answer:</strong> Node.js provides `fs.watch()` and `fs.watchFile()` for monitoring file system changes.</p>

<p><strong>fs.watch() - Efficient:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20fs%20%3D%20require('fs')%3B%0A%0A%2F%2F%20Watch%20a%20single%20file%0Afs.watch('config.json'%2C%20(eventType%2C%20filename)%20%3D%3E%20%7B%0A%20%20console.log(%60Event%3A%20%24%7BeventType%7D%2C%20File%3A%20%24%7Bfilename%7D%60)%3B%0A%20%20%0A%20%20if%20(eventType%20%3D%3D%3D%20'change')%20%7B%0A%20%20%20%20console.log('File%20was%20modified')%3B%0A%20%20%20%20%2F%2F%20Reload%20configuration%0A%20%20%20%20delete%20require.cache%5Brequire.resolve('.%2Fconfig.json')%5D%3B%0A%20%20%20%20const%20newConfig%20%3D%20require('.%2Fconfig.json')%3B%0A%20%20%7D%0A%7D)%3B%0A%0A%2F%2F%20Watch%20a%20directory%0Afs.watch('.%2Fsrc'%2C%20%7B%20recursive%3A%20true%20%7D%2C%20(eventType%2C%20filename)%20%3D%3E%20%7B%0A%20%20console.log(%60%24%7Bfilename%7D%20was%20%24%7BeventType%7Dd%60)%3B%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const fs = require('fs');

// Watch a single file
fs.watch('config.json', (eventType, filename) =&gt; {
  console.log(`Event: ${eventType}, File: ${filename}`);
  
  if (eventType === 'change') {
    console.log('File was modified');
    // Reload configuration
    delete require.cache[require.resolve('./config.json')];
    const newConfig = require('./config.json');
  }
});

// Watch a directory
fs.watch('./src', { recursive: true }, (eventType, filename) =&gt; {
  console.log(`${filename} was ${eventType}d`);
});
</code></pre>
</div>

<p><strong>fs.watchFile() - Polling-based:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Less%20efficient%20but%20more%20reliable%0Afs.watchFile('important.txt'%2C%20%7B%20interval%3A%201000%20%7D%2C%20(curr%2C%20prev)%20%3D%3E%20%7B%0A%20%20console.log(%60File%20changed%3A%20%24%7Bprev.mtime%7D%20-%3E%20%24%7Bcurr.mtime%7D%60)%3B%0A%7D)%3B%0A%0A%2F%2F%20Stop%20watching%0Afs.unwatchFile('important.txt')%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Less efficient but more reliable
fs.watchFile('important.txt', { interval: 1000 }, (curr, prev) =&gt; {
  console.log(`File changed: ${prev.mtime} -&gt; ${curr.mtime}`);
});

// Stop watching
fs.unwatchFile('important.txt');
</code></pre>
</div>

<p><strong>Third-party Solutions:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20chokidar%20-%20more%20reliable%20cross-platform%0Aconst%20chokidar%20%3D%20require('chokidar')%3B%0A%0Aconst%20watcher%20%3D%20chokidar.watch('.%2Fsrc%2F**%2F*.js')%3B%0A%0Awatcher%0A%20%20.on('add'%2C%20path%20%3D%3E%20console.log(%60File%20%24%7Bpath%7D%20has%20been%20added%60))%0A%20%20.on('change'%2C%20path%20%3D%3E%20console.log(%60File%20%24%7Bpath%7D%20has%20been%20changed%60))%0A%20%20.on('unlink'%2C%20path%20%3D%3E%20console.log(%60File%20%24%7Bpath%7D%20has%20been%20removed%60))%3B%0A%0A%2F%2F%20Hot%20reload%20example%0Awatcher.on('change'%2C%20(path)%20%3D%3E%20%7B%0A%20%20console.log('Restarting%20server...')%3B%0A%20%20delete%20require.cache%5Brequire.resolve(path)%5D%3B%0A%20%20%2F%2F%20Restart%20application%20logic%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// chokidar - more reliable cross-platform
const chokidar = require('chokidar');

const watcher = chokidar.watch('./src/**/*.js');

watcher
  .on('add', path =&gt; console.log(`File ${path} has been added`))
  .on('change', path =&gt; console.log(`File ${path} has been changed`))
  .on('unlink', path =&gt; console.log(`File ${path} has been removed`));

// Hot reload example
watcher.on('change', (path) =&gt; {
  console.log('Restarting server...');
  delete require.cache[require.resolve(path)];
  // Restart application logic
});
</code></pre>
</div>

<p>---</p>

<p><strong>99. What are Transform streams and how do you create them?</strong></p>

<p><strong>Answer:</strong> Transform streams are duplex streams that modify data as it passes through them.</p>

<p><strong>Creating Transform Streams:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20%7B%20Transform%20%7D%20%3D%20require('stream')%3B%0A%0A%2F%2F%20Method%201%3A%20Extend%20Transform%20class%0Aclass%20UpperCaseTransform%20extends%20Transform%20%7B%0A%20%20_transform(chunk%2C%20encoding%2C%20callback)%20%7B%0A%20%20%20%20const%20upperChunk%20%3D%20chunk.toString().toUpperCase()%3B%0A%20%20%20%20this.push(upperChunk)%3B%0A%20%20%20%20callback()%3B%0A%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%0Aconst%20upperTransform%20%3D%20new%20UpperCaseTransform()%3B%0Aprocess.stdin%0A%20%20.pipe(upperTransform)%0A%20%20.pipe(process.stdout)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const { Transform } = require('stream');

// Method 1: Extend Transform class
class UpperCaseTransform extends Transform {
  _transform(chunk, encoding, callback) {
    const upperChunk = chunk.toString().toUpperCase();
    this.push(upperChunk);
    callback();
  }
}

// Usage
const upperTransform = new UpperCaseTransform();
process.stdin
  .pipe(upperTransform)
  .pipe(process.stdout);
</code></pre>
</div>

<p><strong>Built-in Transform Streams:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20zlib%20%3D%20require('zlib')%3B%0Aconst%20crypto%20%3D%20require('crypto')%3B%0A%0A%2F%2F%20Compression%0Afs.createReadStream('input.txt')%0A%20%20.pipe(zlib.createGzip())%0A%20%20.pipe(fs.createWriteStream('output.txt.gz'))%3B%0A%0A%2F%2F%20Encryption%0Afs.createReadStream('secret.txt')%0A%20%20.pipe(crypto.createCipher('aes192'%2C%20'password'))%0A%20%20.pipe(fs.createWriteStream('secret.txt.enc'))%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const zlib = require('zlib');
const crypto = require('crypto');

// Compression
fs.createReadStream('input.txt')
  .pipe(zlib.createGzip())
  .pipe(fs.createWriteStream('output.txt.gz'));

// Encryption
fs.createReadStream('secret.txt')
  .pipe(crypto.createCipher('aes192', 'password'))
  .pipe(fs.createWriteStream('secret.txt.enc'));
</code></pre>
</div>

<p><strong>CSV Processing Transform:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="class%20CSVParser%20extends%20Transform%20%7B%0A%20%20constructor(options)%20%7B%0A%20%20%20%20super(%7B%20objectMode%3A%20true%20%7D)%3B%0A%20%20%20%20this.headers%20%3D%20null%3B%0A%20%20%7D%0A%20%20%0A%20%20_transform(chunk%2C%20encoding%2C%20callback)%20%7B%0A%20%20%20%20const%20lines%20%3D%20chunk.toString().split('%5Cn')%3B%0A%20%20%20%20%0A%20%20%20%20lines.forEach((line%2C%20index)%20%3D%3E%20%7B%0A%20%20%20%20%20%20if%20(!this.headers)%20%7B%0A%20%20%20%20%20%20%20%20this.headers%20%3D%20line.split('%2C')%3B%0A%20%20%20%20%20%20%7D%20else%20if%20(line.trim())%20%7B%0A%20%20%20%20%20%20%20%20const%20values%20%3D%20line.split('%2C')%3B%0A%20%20%20%20%20%20%20%20const%20obj%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20%20%20this.headers.forEach((header%2C%20i)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20obj%5Bheader%5D%20%3D%20values%5Bi%5D%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20this.push(obj)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%20%20%0A%20%20%20%20callback()%3B%0A%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%0Afs.createReadStream('data.csv')%0A%20%20.pipe(new%20CSVParser())%0A%20%20.on('data'%2C%20(record)%20%3D%3E%20%7B%0A%20%20%20%20console.log('Parsed%20record%3A'%2C%20record)%3B%0A%20%20%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">class CSVParser extends Transform {
  constructor(options) {
    super({ objectMode: true });
    this.headers = null;
  }
  
  _transform(chunk, encoding, callback) {
    const lines = chunk.toString().split('\n');
    
    lines.forEach((line, index) =&gt; {
      if (!this.headers) {
        this.headers = line.split(',');
      } else if (line.trim()) {
        const values = line.split(',');
        const obj = {};
        this.headers.forEach((header, i) =&gt; {
          obj[header] = values[i];
        });
        this.push(obj);
      }
    });
    
    callback();
  }
}

// Usage
fs.createReadStream('data.csv')
  .pipe(new CSVParser())
  .on('data', (record) =&gt; {
    console.log('Parsed record:', record);
  });
</code></pre>
</div>

<p>---</p>

<p><strong>100. How do you handle backpressure in streams?</strong></p>

<p><strong>Answer:</strong> Backpressure occurs when data is written faster than it can be consumed. Node.js handles this automatically, but you can manage it manually.</p>

<p><strong>Automatic Backpressure:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20fs%20%3D%20require('fs')%3B%0A%0A%2F%2F%20pipe()%20handles%20backpressure%20automatically%0Afs.createReadStream('large-file.txt')%0A%20%20.pipe(fs.createWriteStream('copy.txt'))%3B%0A%0A%2F%2F%20If%20write%20stream%20is%20slower%2C%20read%20stream%20will%20pause%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const fs = require('fs');

// pipe() handles backpressure automatically
fs.createReadStream('large-file.txt')
  .pipe(fs.createWriteStream('copy.txt'));

// If write stream is slower, read stream will pause
</code></pre>
</div>

<p><strong>Manual Backpressure Handling:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20readStream%20%3D%20fs.createReadStream('large-file.txt')%3B%0Aconst%20writeStream%20%3D%20fs.createWriteStream('copy.txt')%3B%0A%0AreadStream.on('data'%2C%20(chunk)%20%3D%3E%20%7B%0A%20%20const%20canWriteMore%20%3D%20writeStream.write(chunk)%3B%0A%20%20%0A%20%20if%20(!canWriteMore)%20%7B%0A%20%20%20%20%2F%2F%20Write%20buffer%20is%20full%2C%20pause%20reading%0A%20%20%20%20readStream.pause()%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Resume%20when%20buffer%20drains%0A%20%20%20%20writeStream.once('drain'%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20readStream.resume()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const readStream = fs.createReadStream('large-file.txt');
const writeStream = fs.createWriteStream('copy.txt');

readStream.on('data', (chunk) =&gt; {
  const canWriteMore = writeStream.write(chunk);
  
  if (!canWriteMore) {
    // Write buffer is full, pause reading
    readStream.pause();
    
    // Resume when buffer drains
    writeStream.once('drain', () =&gt; {
      readStream.resume();
    });
  }
});
</code></pre>
</div>

<p><strong>Transform Stream Backpressure:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="class%20SlowTransform%20extends%20Transform%20%7B%0A%20%20_transform(chunk%2C%20encoding%2C%20callback)%20%7B%0A%20%20%20%20%2F%2F%20Simulate%20slow%20processing%0A%20%20%20%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20this.push(chunk.toString().toUpperCase())%3B%0A%20%20%20%20%20%20callback()%3B%0A%20%20%20%20%7D%2C%20100)%3B%0A%20%20%7D%0A%7D%0A%0A%2F%2F%20The%20stream%20will%20automatically%20handle%20backpressure%0Afs.createReadStream('input.txt')%0A%20%20.pipe(new%20SlowTransform())%0A%20%20.pipe(fs.createWriteStream('output.txt'))%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">class SlowTransform extends Transform {
  _transform(chunk, encoding, callback) {
    // Simulate slow processing
    setTimeout(() =&gt; {
      this.push(chunk.toString().toUpperCase());
      callback();
    }, 100);
  }
}

// The stream will automatically handle backpressure
fs.createReadStream('input.txt')
  .pipe(new SlowTransform())
  .pipe(fs.createWriteStream('output.txt'));
</code></pre>
</div>

<p><strong>Monitoring Backpressure:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20stream%20%3D%20fs.createWriteStream('output.txt')%3B%0A%0Astream.on('drain'%2C%20()%20%3D%3E%20%7B%0A%20%20console.log('Buffer%20drained%2C%20can%20write%20more')%3B%0A%7D)%3B%0A%0Aconst%20success%20%3D%20stream.write('data')%3B%0Aif%20(!success)%20%7B%0A%20%20console.log('Buffer%20full%2C%20waiting%20for%20drain')%3B%0A%7D%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const stream = fs.createWriteStream('output.txt');

stream.on('drain', () =&gt; {
  console.log('Buffer drained, can write more');
});

const success = stream.write('data');
if (!success) {
  console.log('Buffer full, waiting for drain');
}
</code></pre>
</div>

<p>---</p>

<p><strong>101. What is the `Buffer` class and when do you use it?</strong></p>

<p><strong>Answer:</strong> Buffer is a global class for handling binary data in Node.js, similar to arrays but for raw memory allocation.</p>

<p><strong>Creating Buffers:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Different%20ways%20to%20create%20buffers%0Aconst%20buf1%20%3D%20Buffer.alloc(10)%3B%20%2F%2F%20Safe%2C%20filled%20with%20zeros%0Aconst%20buf2%20%3D%20Buffer.allocUnsafe(10)%3B%20%2F%2F%20Faster%20but%20uninitialized%0Aconst%20buf3%20%3D%20Buffer.from('Hello'%2C%20'utf8')%3B%20%2F%2F%20From%20string%0Aconst%20buf4%20%3D%20Buffer.from(%5B1%2C%202%2C%203%2C%204%5D)%3B%20%2F%2F%20From%20array%0A%0Aconsole.log(buf1)%3B%20%2F%2F%20%3CBuffer%2000%2000%2000%2000%2000%2000%2000%2000%2000%2000%3E%0Aconsole.log(buf3)%3B%20%2F%2F%20%3CBuffer%2048%2065%206c%206c%206f%3E%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Different ways to create buffers
const buf1 = Buffer.alloc(10); // Safe, filled with zeros
const buf2 = Buffer.allocUnsafe(10); // Faster but uninitialized
const buf3 = Buffer.from('Hello', 'utf8'); // From string
const buf4 = Buffer.from([1, 2, 3, 4]); // From array

console.log(buf1); // &lt;Buffer 00 00 00 00 00 00 00 00 00 00&gt;
console.log(buf3); // &lt;Buffer 48 65 6c 6c 6f&gt;
</code></pre>
</div>

<p><strong>Buffer Operations:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20buf%20%3D%20Buffer.from('Hello%20World')%3B%0A%0A%2F%2F%20Reading%0Aconsole.log(buf.length)%3B%20%2F%2F%2011%0Aconsole.log(buf%5B0%5D)%3B%20%2F%2F%2072%20(ASCII%20for%20'H')%0Aconsole.log(buf.toString())%3B%20%2F%2F%20'Hello%20World'%0Aconsole.log(buf.toString('hex'))%3B%20%2F%2F%20'48656c6c6f20576f726c64'%0A%0A%2F%2F%20Writing%0Abuf.write('Hi'%2C%200)%3B%20%2F%2F%20Overwrite%20from%20position%200%0Aconsole.log(buf.toString())%3B%20%2F%2F%20'Hi%20World'%0A%0A%2F%2F%20Slicing%0Aconst%20slice%20%3D%20buf.slice(0%2C%202)%3B%0Aconsole.log(slice.toString())%3B%20%2F%2F%20'Hi'%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const buf = Buffer.from('Hello World');

// Reading
console.log(buf.length); // 11
console.log(buf[0]); // 72 (ASCII for 'H')
console.log(buf.toString()); // 'Hello World'
console.log(buf.toString('hex')); // '48656c6c6f20576f726c64'

// Writing
buf.write('Hi', 0); // Overwrite from position 0
console.log(buf.toString()); // 'Hi World'

// Slicing
const slice = buf.slice(0, 2);
console.log(slice.toString()); // 'Hi'
</code></pre>
</div>

<p><strong>Use Cases:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20File%20operations%0Afs.readFile('image.jpg'%2C%20(err%2C%20buffer)%20%3D%3E%20%7B%0A%20%20console.log(%60Image%20size%3A%20%24%7Bbuffer.length%7D%20bytes%60)%3B%0A%20%20%0A%20%20%2F%2F%20Modify%20binary%20data%0A%20%20const%20header%20%3D%20buffer.slice(0%2C%2010)%3B%0A%20%20console.log('File%20header%3A'%2C%20header)%3B%0A%7D)%3B%0A%0A%2F%2F%20Network%20operations%0Aconst%20server%20%3D%20net.createServer((socket)%20%3D%3E%20%7B%0A%20%20socket.on('data'%2C%20(buffer)%20%3D%3E%20%7B%0A%20%20%20%20console.log('Received%20binary%20data%3A'%2C%20buffer)%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Echo%20back%0A%20%20%20%20socket.write(buffer)%3B%0A%20%20%7D)%3B%0A%7D)%3B%0A%0A%2F%2F%20Crypto%20operations%0Aconst%20crypto%20%3D%20require('crypto')%3B%0Aconst%20hash%20%3D%20crypto.createHash('sha256')%3B%0Ahash.update(Buffer.from('secret%20data'))%3B%0Aconst%20digest%20%3D%20hash.digest()%3B%20%2F%2F%20Returns%20Buffer%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// File operations
fs.readFile('image.jpg', (err, buffer) =&gt; {
  console.log(`Image size: ${buffer.length} bytes`);
  
  // Modify binary data
  const header = buffer.slice(0, 10);
  console.log('File header:', header);
});

// Network operations
const server = net.createServer((socket) =&gt; {
  socket.on('data', (buffer) =&gt; {
    console.log('Received binary data:', buffer);
    
    // Echo back
    socket.write(buffer);
  });
});

// Crypto operations
const crypto = require('crypto');
const hash = crypto.createHash('sha256');
hash.update(Buffer.from('secret data'));
const digest = hash.digest(); // Returns Buffer
</code></pre>
</div>

<p>---</p>

<p><strong>102. How do you work with different file encodings?</strong></p>

<p><strong>Answer:</strong> Node.js supports various text encodings for reading and writing files.</p>

<p><strong>Common Encodings:</strong></p>

<p>- <strong>utf8</strong>: Default, supports all Unicode characters</p>
<p>- <strong>ascii</strong>: 7-bit ASCII</p>
<p>- <strong>utf16le</strong>: UTF-16 Little Endian</p>
<p>- <strong>base64</strong>: Base64 encoding</p>
<p>- <strong>hex</strong>: Hexadecimal</p>
<p>- <strong>binary</strong>: Latin-1 (deprecated)</p>


<p><strong>Reading with Encodings:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20fs%20%3D%20require('fs')%3B%0A%0A%2F%2F%20UTF-8%20(default)%0Afs.readFile('text.txt'%2C%20'utf8'%2C%20(err%2C%20data)%20%3D%3E%20%7B%0A%20%20console.log(typeof%20data)%3B%20%2F%2F%20string%0A%7D)%3B%0A%0A%2F%2F%20Without%20encoding%20(returns%20Buffer)%0Afs.readFile('text.txt'%2C%20(err%2C%20data)%20%3D%3E%20%7B%0A%20%20console.log(data%20instanceof%20Buffer)%3B%20%2F%2F%20true%0A%20%20console.log(data.toString('utf8'))%3B%20%2F%2F%20Convert%20to%20string%0A%7D)%3B%0A%0A%2F%2F%20Different%20encodings%0Afs.readFile('data.txt'%2C%20'ascii'%2C%20callback)%3B%0Afs.readFile('data.txt'%2C%20'utf16le'%2C%20callback)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const fs = require('fs');

// UTF-8 (default)
fs.readFile('text.txt', 'utf8', (err, data) =&gt; {
  console.log(typeof data); // string
});

// Without encoding (returns Buffer)
fs.readFile('text.txt', (err, data) =&gt; {
  console.log(data instanceof Buffer); // true
  console.log(data.toString('utf8')); // Convert to string
});

// Different encodings
fs.readFile('data.txt', 'ascii', callback);
fs.readFile('data.txt', 'utf16le', callback);
</code></pre>
</div>

<p><strong>Writing with Encodings:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Write%20UTF-8%0Afs.writeFile('output.txt'%2C%20'Hello%20%E4%B8%96%E7%95%8C'%2C%20'utf8'%2C%20callback)%3B%0A%0A%2F%2F%20Write%20different%20encodings%0Aconst%20text%20%3D%20'Hello%20World'%3B%0Afs.writeFile('ascii.txt'%2C%20text%2C%20'ascii'%2C%20callback)%3B%0Afs.writeFile('utf16.txt'%2C%20text%2C%20'utf16le'%2C%20callback)%3B%0A%0A%2F%2F%20Write%20binary%20data%0Aconst%20buffer%20%3D%20Buffer.from('Hello'%2C%20'utf8')%3B%0Afs.writeFile('binary.dat'%2C%20buffer%2C%20callback)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Write UTF-8
fs.writeFile('output.txt', 'Hello ‰∏ñÁïå', 'utf8', callback);

// Write different encodings
const text = 'Hello World';
fs.writeFile('ascii.txt', text, 'ascii', callback);
fs.writeFile('utf16.txt', text, 'utf16le', callback);

// Write binary data
const buffer = Buffer.from('Hello', 'utf8');
fs.writeFile('binary.dat', buffer, callback);
</code></pre>
</div>

<p><strong>Encoding Conversion:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20iconv%20%3D%20require('iconv-lite')%3B%0A%0A%2F%2F%20Convert%20between%20encodings%0Aconst%20utf8Buffer%20%3D%20Buffer.from('Hello%20%E4%B8%96%E7%95%8C'%2C%20'utf8')%3B%0Aconst%20latin1Buffer%20%3D%20iconv.encode('Hello%20World'%2C%20'latin1')%3B%0Aconst%20utf8String%20%3D%20iconv.decode(latin1Buffer%2C%20'latin1')%3B%0A%0A%2F%2F%20Stream%20conversion%0Afs.createReadStream('input-latin1.txt')%0A%20%20.pipe(iconv.decodeStream('latin1'))%0A%20%20.pipe(iconv.encodeStream('utf8'))%0A%20%20.pipe(fs.createWriteStream('output-utf8.txt'))%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const iconv = require('iconv-lite');

// Convert between encodings
const utf8Buffer = Buffer.from('Hello ‰∏ñÁïå', 'utf8');
const latin1Buffer = iconv.encode('Hello World', 'latin1');
const utf8String = iconv.decode(latin1Buffer, 'latin1');

// Stream conversion
fs.createReadStream('input-latin1.txt')
  .pipe(iconv.decodeStream('latin1'))
  .pipe(iconv.encodeStream('utf8'))
  .pipe(fs.createWriteStream('output-utf8.txt'));
</code></pre>
</div>

<p>---</p>

<p><strong>103. How do you create directories and check if they exist?</strong></p>

<p><strong>Answer:</strong> Use the `fs` module to create directories and check existence.</p>

<p><strong>Checking Existence:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20fs%20%3D%20require('fs')%3B%0Aconst%20path%20%3D%20require('path')%3B%0A%0A%2F%2F%20Method%201%3A%20fs.existsSync()%20(synchronous)%0Aif%20(fs.existsSync('.%2Fuploads'))%20%7B%0A%20%20console.log('Directory%20exists')%3B%0A%7D%0A%0A%2F%2F%20Method%202%3A%20fs.access()%20(asynchronous%2C%20recommended)%0Afs.access('.%2Fuploads'%2C%20fs.constants.F_OK%2C%20(err)%20%3D%3E%20%7B%0A%20%20if%20(err)%20%7B%0A%20%20%20%20console.log('Directory%20does%20not%20exist')%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20console.log('Directory%20exists')%3B%0A%20%20%7D%0A%7D)%3B%0A%0A%2F%2F%20Method%203%3A%20Using%20fs.stat()%0Afs.stat('.%2Fuploads'%2C%20(err%2C%20stats)%20%3D%3E%20%7B%0A%20%20if%20(err)%20%7B%0A%20%20%20%20console.log('Path%20does%20not%20exist')%3B%0A%20%20%7D%20else%20if%20(stats.isDirectory())%20%7B%0A%20%20%20%20console.log('It%20is%20a%20directory')%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20console.log('It%20is%20a%20file')%3B%0A%20%20%7D%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const fs = require('fs');
const path = require('path');

// Method 1: fs.existsSync() (synchronous)
if (fs.existsSync('./uploads')) {
  console.log('Directory exists');
}

// Method 2: fs.access() (asynchronous, recommended)
fs.access('./uploads', fs.constants.F_OK, (err) =&gt; {
  if (err) {
    console.log('Directory does not exist');
  } else {
    console.log('Directory exists');
  }
});

// Method 3: Using fs.stat()
fs.stat('./uploads', (err, stats) =&gt; {
  if (err) {
    console.log('Path does not exist');
  } else if (stats.isDirectory()) {
    console.log('It is a directory');
  } else {
    console.log('It is a file');
  }
});
</code></pre>
</div>

<p><strong>Creating Directories:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Create%20single%20directory%0Afs.mkdir('.%2Fuploads'%2C%20(err)%20%3D%3E%20%7B%0A%20%20if%20(err%20%26%26%20err.code%20!%3D%3D%20'EEXIST')%20%7B%0A%20%20%20%20console.error('Error%20creating%20directory%3A'%2C%20err)%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20console.log('Directory%20created%20or%20already%20exists')%3B%0A%20%20%7D%0A%7D)%3B%0A%0A%2F%2F%20Create%20nested%20directories%20(recursive)%0Afs.mkdir('.%2Fuploads%2Fimages%2Fthumbnails'%2C%20%7B%20recursive%3A%20true%20%7D%2C%20(err)%20%3D%3E%20%7B%0A%20%20if%20(err)%20%7B%0A%20%20%20%20console.error('Error%3A'%2C%20err)%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20console.log('Nested%20directories%20created')%3B%0A%20%20%7D%0A%7D)%3B%0A%0A%2F%2F%20Synchronous%20version%0Atry%20%7B%0A%20%20fs.mkdirSync('.%2Ftemp'%2C%20%7B%20recursive%3A%20true%20%7D)%3B%0A%20%20console.log('Directory%20created')%3B%0A%7D%20catch%20(err)%20%7B%0A%20%20console.error('Error%3A'%2C%20err)%3B%0A%7D%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Create single directory
fs.mkdir('./uploads', (err) =&gt; {
  if (err && err.code !== 'EEXIST') {
    console.error('Error creating directory:', err);
  } else {
    console.log('Directory created or already exists');
  }
});

// Create nested directories (recursive)
fs.mkdir('./uploads/images/thumbnails', { recursive: true }, (err) =&gt; {
  if (err) {
    console.error('Error:', err);
  } else {
    console.log('Nested directories created');
  }
});

// Synchronous version
try {
  fs.mkdirSync('./temp', { recursive: true });
  console.log('Directory created');
} catch (err) {
  console.error('Error:', err);
}
</code></pre>
</div>

<p><strong>Utility Function:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="async%20function%20ensureDirectory(dirPath)%20%7B%0A%20%20try%20%7B%0A%20%20%20%20await%20fs.promises.access(dirPath)%3B%0A%20%20%20%20console.log('Directory%20already%20exists')%3B%0A%20%20%7D%20catch%20(err)%20%7B%0A%20%20%20%20if%20(err.code%20%3D%3D%3D%20'ENOENT')%20%7B%0A%20%20%20%20%20%20await%20fs.promises.mkdir(dirPath%2C%20%7B%20recursive%3A%20true%20%7D)%3B%0A%20%20%20%20%20%20console.log('Directory%20created')%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20throw%20err%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%0Aawait%20ensureDirectory('.%2Fuploads%2Fuser-files')%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">async function ensureDirectory(dirPath) {
  try {
    await fs.promises.access(dirPath);
    console.log('Directory already exists');
  } catch (err) {
    if (err.code === 'ENOENT') {
      await fs.promises.mkdir(dirPath, { recursive: true });
      console.log('Directory created');
    } else {
      throw err;
    }
  }
}

// Usage
await ensureDirectory('./uploads/user-files');
</code></pre>
</div>

<p>---</p>

<p><strong>104. How do you list files and directories?</strong></p>

<p><strong>Answer:</strong> Use `fs.readdir()` and related methods to list directory contents.</p>

<p><strong>Basic Directory Listing:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20fs%20%3D%20require('fs')%3B%0Aconst%20path%20%3D%20require('path')%3B%0A%0A%2F%2F%20Asynchronous%0Afs.readdir('.%2Fsrc'%2C%20(err%2C%20files)%20%3D%3E%20%7B%0A%20%20if%20(err)%20%7B%0A%20%20%20%20console.error('Error%20reading%20directory%3A'%2C%20err)%3B%0A%20%20%20%20return%3B%0A%20%20%7D%0A%20%20%0A%20%20console.log('Files%20and%20directories%3A')%3B%0A%20%20files.forEach(file%20%3D%3E%20%7B%0A%20%20%20%20console.log(file)%3B%0A%20%20%7D)%3B%0A%7D)%3B%0A%0A%2F%2F%20Synchronous%0Atry%20%7B%0A%20%20const%20files%20%3D%20fs.readdirSync('.%2Fsrc')%3B%0A%20%20console.log(files)%3B%0A%7D%20catch%20(err)%20%7B%0A%20%20console.error('Error%3A'%2C%20err)%3B%0A%7D%0A%0A%2F%2F%20Promise-based%0Aconst%20files%20%3D%20await%20fs.promises.readdir('.%2Fsrc')%3B%0Aconsole.log(files)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const fs = require('fs');
const path = require('path');

// Asynchronous
fs.readdir('./src', (err, files) =&gt; {
  if (err) {
    console.error('Error reading directory:', err);
    return;
  }
  
  console.log('Files and directories:');
  files.forEach(file =&gt; {
    console.log(file);
  });
});

// Synchronous
try {
  const files = fs.readdirSync('./src');
  console.log(files);
} catch (err) {
  console.error('Error:', err);
}

// Promise-based
const files = await fs.promises.readdir('./src');
console.log(files);
</code></pre>
</div>

<p><strong>Detailed File Information:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="async%20function%20listWithDetails(dirPath)%20%7B%0A%20%20try%20%7B%0A%20%20%20%20const%20files%20%3D%20await%20fs.promises.readdir(dirPath)%3B%0A%20%20%20%20%0A%20%20%20%20for%20(const%20file%20of%20files)%20%7B%0A%20%20%20%20%20%20const%20filePath%20%3D%20path.join(dirPath%2C%20file)%3B%0A%20%20%20%20%20%20const%20stats%20%3D%20await%20fs.promises.stat(filePath)%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20console.log(%7B%0A%20%20%20%20%20%20%20%20name%3A%20file%2C%0A%20%20%20%20%20%20%20%20size%3A%20stats.size%2C%0A%20%20%20%20%20%20%20%20isDirectory%3A%20stats.isDirectory()%2C%0A%20%20%20%20%20%20%20%20isFile%3A%20stats.isFile()%2C%0A%20%20%20%20%20%20%20%20modified%3A%20stats.mtime%2C%0A%20%20%20%20%20%20%20%20created%3A%20stats.birthtime%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%20%20%7D%20catch%20(err)%20%7B%0A%20%20%20%20console.error('Error%3A'%2C%20err)%3B%0A%20%20%7D%0A%7D%0A%0Aawait%20listWithDetails('.%2Fsrc')%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">async function listWithDetails(dirPath) {
  try {
    const files = await fs.promises.readdir(dirPath);
    
    for (const file of files) {
      const filePath = path.join(dirPath, file);
      const stats = await fs.promises.stat(filePath);
      
      console.log({
        name: file,
        size: stats.size,
        isDirectory: stats.isDirectory(),
        isFile: stats.isFile(),
        modified: stats.mtime,
        created: stats.birthtime
      });
    }
  } catch (err) {
    console.error('Error:', err);
  }
}

await listWithDetails('./src');
</code></pre>
</div>

<p><strong>Recursive Directory Traversal:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="async%20function%20walkDirectory(dirPath%2C%20callback)%20%7B%0A%20%20const%20files%20%3D%20await%20fs.promises.readdir(dirPath)%3B%0A%20%20%0A%20%20for%20(const%20file%20of%20files)%20%7B%0A%20%20%20%20const%20filePath%20%3D%20path.join(dirPath%2C%20file)%3B%0A%20%20%20%20const%20stats%20%3D%20await%20fs.promises.stat(filePath)%3B%0A%20%20%20%20%0A%20%20%20%20if%20(stats.isDirectory())%20%7B%0A%20%20%20%20%20%20await%20walkDirectory(filePath%2C%20callback)%3B%20%2F%2F%20Recursive%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20callback(filePath%2C%20stats)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%3A%20Find%20all%20.js%20files%0Aawait%20walkDirectory('.%2Fsrc'%2C%20(filePath%2C%20stats)%20%3D%3E%20%7B%0A%20%20if%20(path.extname(filePath)%20%3D%3D%3D%20'.js')%20%7B%0A%20%20%20%20console.log(%60Found%20JS%20file%3A%20%24%7BfilePath%7D%20(%24%7Bstats.size%7D%20bytes)%60)%3B%0A%20%20%7D%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">async function walkDirectory(dirPath, callback) {
  const files = await fs.promises.readdir(dirPath);
  
  for (const file of files) {
    const filePath = path.join(dirPath, file);
    const stats = await fs.promises.stat(filePath);
    
    if (stats.isDirectory()) {
      await walkDirectory(filePath, callback); // Recursive
    } else {
      callback(filePath, stats);
    }
  }
}

// Usage: Find all .js files
await walkDirectory('./src', (filePath, stats) =&gt; {
  if (path.extname(filePath) === '.js') {
    console.log(`Found JS file: ${filePath} (${stats.size} bytes)`);
  }
});
</code></pre>
</div>

<p><strong>Filter and Sort:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="async%20function%20listJavaScriptFiles(dirPath)%20%7B%0A%20%20const%20files%20%3D%20await%20fs.promises.readdir(dirPath)%3B%0A%20%20%0A%20%20%2F%2F%20Filter%20.js%20files%0A%20%20const%20jsFiles%20%3D%20files.filter(file%20%3D%3E%20path.extname(file)%20%3D%3D%3D%20'.js')%3B%0A%20%20%0A%20%20%2F%2F%20Get%20file%20stats%20and%20sort%20by%20size%0A%20%20const%20filesWithStats%20%3D%20await%20Promise.all(%0A%20%20%20%20jsFiles.map(async%20(file)%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20filePath%20%3D%20path.join(dirPath%2C%20file)%3B%0A%20%20%20%20%20%20const%20stats%20%3D%20await%20fs.promises.stat(filePath)%3B%0A%20%20%20%20%20%20return%20%7B%20name%3A%20file%2C%20size%3A%20stats.size%20%7D%3B%0A%20%20%20%20%7D)%0A%20%20)%3B%0A%20%20%0A%20%20%2F%2F%20Sort%20by%20size%20(largest%20first)%0A%20%20filesWithStats.sort((a%2C%20b)%20%3D%3E%20b.size%20-%20a.size)%3B%0A%20%20%0A%20%20return%20filesWithStats%3B%0A%7D%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">async function listJavaScriptFiles(dirPath) {
  const files = await fs.promises.readdir(dirPath);
  
  // Filter .js files
  const jsFiles = files.filter(file =&gt; path.extname(file) === '.js');
  
  // Get file stats and sort by size
  const filesWithStats = await Promise.all(
    jsFiles.map(async (file) =&gt; {
      const filePath = path.join(dirPath, file);
      const stats = await fs.promises.stat(filePath);
      return { name: file, size: stats.size };
    })
  );
  
  // Sort by size (largest first)
  filesWithStats.sort((a, b) =&gt; b.size - a.size);
  
  return filesWithStats;
}
</code></pre>
</div>

<p>---</p>

<p><strong>105. What is the `path` module and its common methods?</strong></p>

<p><strong>Answer:</strong> The `path` module provides utilities for working with file and directory paths in a cross-platform way.</p>

<p><strong>Common Methods:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20path%20%3D%20require('path')%3B%0A%0A%2F%2F%20Join%20paths%0Aconst%20fullPath%20%3D%20path.join('%2Fusers'%2C%20'john'%2C%20'documents'%2C%20'file.txt')%3B%0Aconsole.log(fullPath)%3B%20%2F%2F%20'%2Fusers%2Fjohn%2Fdocuments%2Ffile.txt'%20(Unix)%20or%20'%5Cusers%5Cjohn%5Cdocuments%5Cfile.txt'%20(Windows)%0A%0A%2F%2F%20Resolve%20absolute%20path%0Aconst%20absolutePath%20%3D%20path.resolve('src'%2C%20'utils'%2C%20'helper.js')%3B%0Aconsole.log(absolutePath)%3B%20%2F%2F%20'%2Fcurrent%2Fworking%2Fdirectory%2Fsrc%2Futils%2Fhelper.js'%0A%0A%2F%2F%20Get%20directory%20name%0Aconsole.log(path.dirname('%2Fusers%2Fjohn%2Ffile.txt'))%3B%20%2F%2F%20'%2Fusers%2Fjohn'%0A%0A%2F%2F%20Get%20base%20name%20(filename)%0Aconsole.log(path.basename('%2Fusers%2Fjohn%2Ffile.txt'))%3B%20%2F%2F%20'file.txt'%0Aconsole.log(path.basename('%2Fusers%2Fjohn%2Ffile.txt'%2C%20'.txt'))%3B%20%2F%2F%20'file'%0A%0A%2F%2F%20Get%20extension%0Aconsole.log(path.extname('%2Fusers%2Fjohn%2Ffile.txt'))%3B%20%2F%2F%20'.txt'%0A%0A%2F%2F%20Parse%20path%20into%20components%0Aconst%20parsed%20%3D%20path.parse('%2Fusers%2Fjohn%2Ffile.txt')%3B%0Aconsole.log(parsed)%3B%0A%2F%2F%20%7B%0A%2F%2F%20%20%20root%3A%20'%2F'%2C%0A%2F%2F%20%20%20dir%3A%20'%2Fusers%2Fjohn'%2C%0A%2F%2F%20%20%20base%3A%20'file.txt'%2C%0A%2F%2F%20%20%20ext%3A%20'.txt'%2C%0A%2F%2F%20%20%20name%3A%20'file'%0A%2F%2F%20%7D%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const path = require('path');

// Join paths
const fullPath = path.join('/users', 'john', 'documents', 'file.txt');
console.log(fullPath); // '/users/john/documents/file.txt' (Unix) or '\users\john\documents\file.txt' (Windows)

// Resolve absolute path
const absolutePath = path.resolve('src', 'utils', 'helper.js');
console.log(absolutePath); // '/current/working/directory/src/utils/helper.js'

// Get directory name
console.log(path.dirname('/users/john/file.txt')); // '/users/john'

// Get base name (filename)
console.log(path.basename('/users/john/file.txt')); // 'file.txt'
console.log(path.basename('/users/john/file.txt', '.txt')); // 'file'

// Get extension
console.log(path.extname('/users/john/file.txt')); // '.txt'

// Parse path into components
const parsed = path.parse('/users/john/file.txt');
console.log(parsed);
// {
//   root: '/',
//   dir: '/users/john',
//   base: 'file.txt',
//   ext: '.txt',
//   name: 'file'
// }
</code></pre>
</div>

<p><strong>Cross-platform Path Handling:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Platform-specific%20separators%0Aconsole.log(path.sep)%3B%20%2F%2F%20'%2F'%20on%20Unix%2C%20'%5C'%20on%20Windows%0Aconsole.log(path.delimiter)%3B%20%2F%2F%20'%3A'%20on%20Unix%2C%20'%3B'%20on%20Windows%0A%0A%2F%2F%20Normalize%20paths%0Aconsole.log(path.normalize('%2Fusers%2F%2Fjohn%2F..%2Fjane%2F.%2Ffile.txt'))%3B%20%2F%2F%20'%2Fusers%2Fjane%2Ffile.txt'%0A%0A%2F%2F%20Check%20if%20path%20is%20absolute%0Aconsole.log(path.isAbsolute('%2Fusers%2Fjohn'))%3B%20%2F%2F%20true%0Aconsole.log(path.isAbsolute('users%2Fjohn'))%3B%20%2F%2F%20false%0A%0A%2F%2F%20Get%20relative%20path%0Aconsole.log(path.relative('%2Fusers%2Fjohn'%2C%20'%2Fusers%2Fjane'))%3B%20%2F%2F%20'..%2Fjane'%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Platform-specific separators
console.log(path.sep); // '/' on Unix, '\' on Windows
console.log(path.delimiter); // ':' on Unix, ';' on Windows

// Normalize paths
console.log(path.normalize('/users//john/../jane/./file.txt')); // '/users/jane/file.txt'

// Check if path is absolute
console.log(path.isAbsolute('/users/john')); // true
console.log(path.isAbsolute('users/john')); // false

// Get relative path
console.log(path.relative('/users/john', '/users/jane')); // '../jane'
</code></pre>
</div>

<p><strong>Practical Examples:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Build%20file%20paths%20safely%0Aconst%20configPath%20%3D%20path.join(__dirname%2C%20'..'%2C%20'config'%2C%20'app.json')%3B%0A%0A%2F%2F%20Change%20file%20extension%0Afunction%20changeExtension(filePath%2C%20newExt)%20%7B%0A%20%20const%20parsed%20%3D%20path.parse(filePath)%3B%0A%20%20return%20path.join(parsed.dir%2C%20parsed.name%20%2B%20newExt)%3B%0A%7D%0A%0Aconsole.log(changeExtension('%2Fpath%2Fto%2Ffile.txt'%2C%20'.json'))%3B%20%2F%2F%20'%2Fpath%2Fto%2Ffile.json'%0A%0A%2F%2F%20Get%20all%20files%20with%20specific%20extension%0Afunction%20getFilesByExtension(dirPath%2C%20ext)%20%7B%0A%20%20const%20files%20%3D%20fs.readdirSync(dirPath)%3B%0A%20%20return%20files.filter(file%20%3D%3E%20path.extname(file)%20%3D%3D%3D%20ext)%3B%0A%7D%0A%0Aconst%20jsFiles%20%3D%20getFilesByExtension('.%2Fsrc'%2C%20'.js')%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Build file paths safely
const configPath = path.join(__dirname, '..', 'config', 'app.json');

// Change file extension
function changeExtension(filePath, newExt) {
  const parsed = path.parse(filePath);
  return path.join(parsed.dir, parsed.name + newExt);
}

console.log(changeExtension('/path/to/file.txt', '.json')); // '/path/to/file.json'

// Get all files with specific extension
function getFilesByExtension(dirPath, ext) {
  const files = fs.readdirSync(dirPath);
  return files.filter(file =&gt; path.extname(file) === ext);
}

const jsFiles = getFilesByExtension('./src', '.js');
</code></pre>
</div>

<p>---</p>

<p><strong>106. How do you copy and move files?</strong></p>

<p><strong>Answer:</strong> Node.js provides several methods for copying and moving files.</p>

<p><strong>Copying Files:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20fs%20%3D%20require('fs')%3B%0A%0A%2F%2F%20Method%201%3A%20fs.copyFile()%20(Node.js%208.5%2B)%0Afs.copyFile('source.txt'%2C%20'destination.txt'%2C%20(err)%20%3D%3E%20%7B%0A%20%20if%20(err)%20throw%20err%3B%0A%20%20console.log('File%20copied%20successfully')%3B%0A%7D)%3B%0A%0A%2F%2F%20Synchronous%20version%0Afs.copyFileSync('source.txt'%2C%20'destination.txt')%3B%0A%0A%2F%2F%20Promise%20version%0Aawait%20fs.promises.copyFile('source.txt'%2C%20'destination.txt')%3B%0A%0A%2F%2F%20Method%202%3A%20Using%20streams%20(for%20large%20files)%0Afunction%20copyFileStream(source%2C%20destination)%20%7B%0A%20%20return%20new%20Promise((resolve%2C%20reject)%20%3D%3E%20%7B%0A%20%20%20%20const%20readStream%20%3D%20fs.createReadStream(source)%3B%0A%20%20%20%20const%20writeStream%20%3D%20fs.createWriteStream(destination)%3B%0A%20%20%20%20%0A%20%20%20%20readStream.pipe(writeStream)%3B%0A%20%20%20%20%0A%20%20%20%20writeStream.on('finish'%2C%20resolve)%3B%0A%20%20%20%20writeStream.on('error'%2C%20reject)%3B%0A%20%20%20%20readStream.on('error'%2C%20reject)%3B%0A%20%20%7D)%3B%0A%7D%0A%0Aawait%20copyFileStream('large-file.dat'%2C%20'copy-of-large-file.dat')%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const fs = require('fs');

// Method 1: fs.copyFile() (Node.js 8.5+)
fs.copyFile('source.txt', 'destination.txt', (err) =&gt; {
  if (err) throw err;
  console.log('File copied successfully');
});

// Synchronous version
fs.copyFileSync('source.txt', 'destination.txt');

// Promise version
await fs.promises.copyFile('source.txt', 'destination.txt');

// Method 2: Using streams (for large files)
function copyFileStream(source, destination) {
  return new Promise((resolve, reject) =&gt; {
    const readStream = fs.createReadStream(source);
    const writeStream = fs.createWriteStream(destination);
    
    readStream.pipe(writeStream);
    
    writeStream.on('finish', resolve);
    writeStream.on('error', reject);
    readStream.on('error', reject);
  });
}

await copyFileStream('large-file.dat', 'copy-of-large-file.dat');
</code></pre>
</div>

<p><strong>Moving Files:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Method%201%3A%20fs.rename()%20(works%20for%20move%20within%20same%20filesystem)%0Afs.rename('old-path.txt'%2C%20'new-path.txt'%2C%20(err)%20%3D%3E%20%7B%0A%20%20if%20(err)%20throw%20err%3B%0A%20%20console.log('File%20moved%20successfully')%3B%0A%7D)%3B%0A%0A%2F%2F%20Method%202%3A%20Copy%20then%20delete%20(cross-filesystem)%0Aasync%20function%20moveFile(source%2C%20destination)%20%7B%0A%20%20try%20%7B%0A%20%20%20%20await%20fs.promises.copyFile(source%2C%20destination)%3B%0A%20%20%20%20await%20fs.promises.unlink(source)%3B%20%2F%2F%20Delete%20original%0A%20%20%20%20console.log('File%20moved%20successfully')%3B%0A%20%20%7D%20catch%20(err)%20%7B%0A%20%20%20%20console.error('Error%20moving%20file%3A'%2C%20err)%3B%0A%20%20%7D%0A%7D%0A%0Aawait%20moveFile('source.txt'%2C%20'destination.txt')%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Method 1: fs.rename() (works for move within same filesystem)
fs.rename('old-path.txt', 'new-path.txt', (err) =&gt; {
  if (err) throw err;
  console.log('File moved successfully');
});

// Method 2: Copy then delete (cross-filesystem)
async function moveFile(source, destination) {
  try {
    await fs.promises.copyFile(source, destination);
    await fs.promises.unlink(source); // Delete original
    console.log('File moved successfully');
  } catch (err) {
    console.error('Error moving file:', err);
  }
}

await moveFile('source.txt', 'destination.txt');
</code></pre>
</div>

<p><strong>Copying Directories:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="async%20function%20copyDirectory(source%2C%20destination)%20%7B%0A%20%20try%20%7B%0A%20%20%20%20%2F%2F%20Create%20destination%20directory%0A%20%20%20%20await%20fs.promises.mkdir(destination%2C%20%7B%20recursive%3A%20true%20%7D)%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Read%20source%20directory%0A%20%20%20%20const%20files%20%3D%20await%20fs.promises.readdir(source)%3B%0A%20%20%20%20%0A%20%20%20%20for%20(const%20file%20of%20files)%20%7B%0A%20%20%20%20%20%20const%20sourcePath%20%3D%20path.join(source%2C%20file)%3B%0A%20%20%20%20%20%20const%20destPath%20%3D%20path.join(destination%2C%20file)%3B%0A%20%20%20%20%20%20const%20stats%20%3D%20await%20fs.promises.stat(sourcePath)%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20if%20(stats.isDirectory())%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Recursively%20copy%20subdirectory%0A%20%20%20%20%20%20%20%20await%20copyDirectory(sourcePath%2C%20destPath)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20%2F%2F%20Copy%20file%0A%20%20%20%20%20%20%20%20await%20fs.promises.copyFile(sourcePath%2C%20destPath)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20console.log('Directory%20copied%20successfully')%3B%0A%20%20%7D%20catch%20(err)%20%7B%0A%20%20%20%20console.error('Error%20copying%20directory%3A'%2C%20err)%3B%0A%20%20%7D%0A%7D%0A%0Aawait%20copyDirectory('.%2Fsrc'%2C%20'.%2Fbackup%2Fsrc')%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">async function copyDirectory(source, destination) {
  try {
    // Create destination directory
    await fs.promises.mkdir(destination, { recursive: true });
    
    // Read source directory
    const files = await fs.promises.readdir(source);
    
    for (const file of files) {
      const sourcePath = path.join(source, file);
      const destPath = path.join(destination, file);
      const stats = await fs.promises.stat(sourcePath);
      
      if (stats.isDirectory()) {
        // Recursively copy subdirectory
        await copyDirectory(sourcePath, destPath);
      } else {
        // Copy file
        await fs.promises.copyFile(sourcePath, destPath);
      }
    }
    
    console.log('Directory copied successfully');
  } catch (err) {
    console.error('Error copying directory:', err);
  }
}

await copyDirectory('./src', './backup/src');
</code></pre>
</div>

<p><strong>Using Third-party Libraries:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20fs-extra%20provides%20additional%20file%20system%20methods%0Aconst%20fse%20%3D%20require('fs-extra')%3B%0A%0A%2F%2F%20Copy%20file%20or%20directory%0Aawait%20fse.copy('src'%2C%20'backup')%3B%0A%0A%2F%2F%20Move%20file%20or%20directory%0Aawait%20fse.move('temp'%2C%20'archive')%3B%0A%0A%2F%2F%20Ensure%20directory%20exists%0Aawait%20fse.ensureDir('path%2Fto%2Fdirectory')%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// fs-extra provides additional file system methods
const fse = require('fs-extra');

// Copy file or directory
await fse.copy('src', 'backup');

// Move file or directory
await fse.move('temp', 'archive');

// Ensure directory exists
await fse.ensureDir('path/to/directory');
</code></pre>
</div>

<p>---</p>

<p><strong>107. How do you delete files and directories?</strong></p>

<p><strong>Answer:</strong> Use various `fs` methods to delete files and directories.</p>

<p><strong>Deleting Files:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20fs%20%3D%20require('fs')%3B%0A%0A%2F%2F%20Asynchronous%0Afs.unlink('file-to-delete.txt'%2C%20(err)%20%3D%3E%20%7B%0A%20%20if%20(err)%20%7B%0A%20%20%20%20if%20(err.code%20%3D%3D%3D%20'ENOENT')%20%7B%0A%20%20%20%20%20%20console.log('File%20does%20not%20exist')%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20console.error('Error%20deleting%20file%3A'%2C%20err)%3B%0A%20%20%20%20%7D%0A%20%20%7D%20else%20%7B%0A%20%20%20%20console.log('File%20deleted%20successfully')%3B%0A%20%20%7D%0A%7D)%3B%0A%0A%2F%2F%20Synchronous%0Atry%20%7B%0A%20%20fs.unlinkSync('file-to-delete.txt')%3B%0A%20%20console.log('File%20deleted')%3B%0A%7D%20catch%20(err)%20%7B%0A%20%20console.error('Error%3A'%2C%20err)%3B%0A%7D%0A%0A%2F%2F%20Promise-based%0Atry%20%7B%0A%20%20await%20fs.promises.unlink('file-to-delete.txt')%3B%0A%20%20console.log('File%20deleted')%3B%0A%7D%20catch%20(err)%20%7B%0A%20%20console.error('Error%3A'%2C%20err)%3B%0A%7D%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const fs = require('fs');

// Asynchronous
fs.unlink('file-to-delete.txt', (err) =&gt; {
  if (err) {
    if (err.code === 'ENOENT') {
      console.log('File does not exist');
    } else {
      console.error('Error deleting file:', err);
    }
  } else {
    console.log('File deleted successfully');
  }
});

// Synchronous
try {
  fs.unlinkSync('file-to-delete.txt');
  console.log('File deleted');
} catch (err) {
  console.error('Error:', err);
}

// Promise-based
try {
  await fs.promises.unlink('file-to-delete.txt');
  console.log('File deleted');
} catch (err) {
  console.error('Error:', err);
}
</code></pre>
</div>

<p><strong>Deleting Empty Directories:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Remove%20empty%20directory%0Afs.rmdir('empty-directory'%2C%20(err)%20%3D%3E%20%7B%0A%20%20if%20(err)%20%7B%0A%20%20%20%20console.error('Error%20removing%20directory%3A'%2C%20err)%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20console.log('Directory%20removed')%3B%0A%20%20%7D%0A%7D)%3B%0A%0A%2F%2F%20Promise%20version%0Aawait%20fs.promises.rmdir('empty-directory')%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Remove empty directory
fs.rmdir('empty-directory', (err) =&gt; {
  if (err) {
    console.error('Error removing directory:', err);
  } else {
    console.log('Directory removed');
  }
});

// Promise version
await fs.promises.rmdir('empty-directory');
</code></pre>
</div>

<p><strong>Deleting Non-empty Directories:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Node.js%2014.14.0%2B%20-%20recursive%20option%0Afs.rmdir('directory-with-files'%2C%20%7B%20recursive%3A%20true%20%7D%2C%20(err)%20%3D%3E%20%7B%0A%20%20if%20(err)%20%7B%0A%20%20%20%20console.error('Error%3A'%2C%20err)%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20console.log('Directory%20and%20contents%20removed')%3B%0A%20%20%7D%0A%7D)%3B%0A%0A%2F%2F%20Node.js%2016%2B%20-%20fs.rm()%20(preferred)%0Afs.rm('directory-with-files'%2C%20%7B%20recursive%3A%20true%2C%20force%3A%20true%20%7D%2C%20(err)%20%3D%3E%20%7B%0A%20%20if%20(err)%20%7B%0A%20%20%20%20console.error('Error%3A'%2C%20err)%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20console.log('Directory%20removed')%3B%0A%20%20%7D%0A%7D)%3B%0A%0A%2F%2F%20Promise%20version%0Aawait%20fs.promises.rm('directory-with-files'%2C%20%7B%20recursive%3A%20true%2C%20force%3A%20true%20%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Node.js 14.14.0+ - recursive option
fs.rmdir('directory-with-files', { recursive: true }, (err) =&gt; {
  if (err) {
    console.error('Error:', err);
  } else {
    console.log('Directory and contents removed');
  }
});

// Node.js 16+ - fs.rm() (preferred)
fs.rm('directory-with-files', { recursive: true, force: true }, (err) =&gt; {
  if (err) {
    console.error('Error:', err);
  } else {
    console.log('Directory removed');
  }
});

// Promise version
await fs.promises.rm('directory-with-files', { recursive: true, force: true });
</code></pre>
</div>

<p><strong>Safe Deletion Function:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="async%20function%20safeDelete(filePath)%20%7B%0A%20%20try%20%7B%0A%20%20%20%20const%20stats%20%3D%20await%20fs.promises.stat(filePath)%3B%0A%20%20%20%20%0A%20%20%20%20if%20(stats.isDirectory())%20%7B%0A%20%20%20%20%20%20await%20fs.promises.rm(filePath%2C%20%7B%20recursive%3A%20true%2C%20force%3A%20true%20%7D)%3B%0A%20%20%20%20%20%20console.log(%60Directory%20deleted%3A%20%24%7BfilePath%7D%60)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20await%20fs.promises.unlink(filePath)%3B%0A%20%20%20%20%20%20console.log(%60File%20deleted%3A%20%24%7BfilePath%7D%60)%3B%0A%20%20%20%20%7D%0A%20%20%7D%20catch%20(err)%20%7B%0A%20%20%20%20if%20(err.code%20%3D%3D%3D%20'ENOENT')%20%7B%0A%20%20%20%20%20%20console.log(%60Path%20does%20not%20exist%3A%20%24%7BfilePath%7D%60)%3B%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20console.error(%60Error%20deleting%20%24%7BfilePath%7D%3A%60%2C%20err)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%0Aawait%20safeDelete('.%2Ftemp-file.txt')%3B%0Aawait%20safeDelete('.%2Ftemp-directory')%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">async function safeDelete(filePath) {
  try {
    const stats = await fs.promises.stat(filePath);
    
    if (stats.isDirectory()) {
      await fs.promises.rm(filePath, { recursive: true, force: true });
      console.log(`Directory deleted: ${filePath}`);
    } else {
      await fs.promises.unlink(filePath);
      console.log(`File deleted: ${filePath}`);
    }
  } catch (err) {
    if (err.code === 'ENOENT') {
      console.log(`Path does not exist: ${filePath}`);
    } else {
      console.error(`Error deleting ${filePath}:`, err);
    }
  }
}

// Usage
await safeDelete('./temp-file.txt');
await safeDelete('./temp-directory');
</code></pre>
</div>

<p><strong>Bulk Deletion:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="async%20function%20deleteFilesByPattern(directory%2C%20pattern)%20%7B%0A%20%20try%20%7B%0A%20%20%20%20const%20files%20%3D%20await%20fs.promises.readdir(directory)%3B%0A%20%20%20%20const%20matchingFiles%20%3D%20files.filter(file%20%3D%3E%20file.match(pattern))%3B%0A%20%20%20%20%0A%20%20%20%20for%20(const%20file%20of%20matchingFiles)%20%7B%0A%20%20%20%20%20%20const%20filePath%20%3D%20path.join(directory%2C%20file)%3B%0A%20%20%20%20%20%20await%20fs.promises.unlink(filePath)%3B%0A%20%20%20%20%20%20console.log(%60Deleted%3A%20%24%7Bfile%7D%60)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20console.log(%60Deleted%20%24%7BmatchingFiles.length%7D%20files%60)%3B%0A%20%20%7D%20catch%20(err)%20%7B%0A%20%20%20%20console.error('Error%3A'%2C%20err)%3B%0A%20%20%7D%0A%7D%0A%0A%2F%2F%20Delete%20all%20.tmp%20files%0Aawait%20deleteFilesByPattern('.%2Ftemp'%2C%20%2F%5C.tmp%24%2F)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">async function deleteFilesByPattern(directory, pattern) {
  try {
    const files = await fs.promises.readdir(directory);
    const matchingFiles = files.filter(file =&gt; file.match(pattern));
    
    for (const file of matchingFiles) {
      const filePath = path.join(directory, file);
      await fs.promises.unlink(filePath);
      console.log(`Deleted: ${file}`);
    }
    
    console.log(`Deleted ${matchingFiles.length} files`);
  } catch (err) {
    console.error('Error:', err);
  }
}

// Delete all .tmp files
await deleteFilesByPattern('./temp', /\.tmp$/);
</code></pre>
</div>

<p>---</p>

<p><strong>108. What are file permissions and how do you work with them?</strong></p>

<p><strong>Answer:</strong> File permissions control who can read, write, or execute files. Node.js provides methods to check and modify permissions.</p>

<p><strong>Understanding Permissions:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20fs%20%3D%20require('fs')%3B%0A%0A%2F%2F%20Check%20file%20stats%20including%20permissions%0Afs.stat('file.txt'%2C%20(err%2C%20stats)%20%3D%3E%20%7B%0A%20%20if%20(err)%20throw%20err%3B%0A%20%20%0A%20%20console.log('File%20mode%20(octal)%3A'%2C%20stats.mode.toString(8))%3B%0A%20%20console.log('File%20mode%20(binary)%3A'%2C%20stats.mode.toString(2))%3B%0A%20%20%0A%20%20%2F%2F%20Check%20specific%20permissions%0A%20%20console.log('Is%20readable%3A'%2C%20!!(stats.mode%20%26%20fs.constants.S_IRUSR))%3B%0A%20%20console.log('Is%20writable%3A'%2C%20!!(stats.mode%20%26%20fs.constants.S_IWUSR))%3B%0A%20%20console.log('Is%20executable%3A'%2C%20!!(stats.mode%20%26%20fs.constants.S_IXUSR))%3B%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const fs = require('fs');

// Check file stats including permissions
fs.stat('file.txt', (err, stats) =&gt; {
  if (err) throw err;
  
  console.log('File mode (octal):', stats.mode.toString(8));
  console.log('File mode (binary):', stats.mode.toString(2));
  
  // Check specific permissions
  console.log('Is readable:', !!(stats.mode & fs.constants.S_IRUSR));
  console.log('Is writable:', !!(stats.mode & fs.constants.S_IWUSR));
  console.log('Is executable:', !!(stats.mode & fs.constants.S_IXUSR));
});
</code></pre>
</div>

<p><strong>Permission Constants:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Owner%20permissions%0Afs.constants.S_IRUSR%20%2F%2F%20Read%20permission%20for%20owner%0Afs.constants.S_IWUSR%20%2F%2F%20Write%20permission%20for%20owner%0Afs.constants.S_IXUSR%20%2F%2F%20Execute%20permission%20for%20owner%0A%0A%2F%2F%20Group%20permissions%0Afs.constants.S_IRGRP%20%2F%2F%20Read%20permission%20for%20group%0Afs.constants.S_IWGRP%20%2F%2F%20Write%20permission%20for%20group%0Afs.constants.S_IXGRP%20%2F%2F%20Execute%20permission%20for%20group%0A%0A%2F%2F%20Others%20permissions%0Afs.constants.S_IROTH%20%2F%2F%20Read%20permission%20for%20others%0Afs.constants.S_IWOTH%20%2F%2F%20Write%20permission%20for%20others%0Afs.constants.S_IXOTH%20%2F%2F%20Execute%20permission%20for%20others%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Owner permissions
fs.constants.S_IRUSR // Read permission for owner
fs.constants.S_IWUSR // Write permission for owner
fs.constants.S_IXUSR // Execute permission for owner

// Group permissions
fs.constants.S_IRGRP // Read permission for group
fs.constants.S_IWGRP // Write permission for group
fs.constants.S_IXGRP // Execute permission for group

// Others permissions
fs.constants.S_IROTH // Read permission for others
fs.constants.S_IWOTH // Write permission for others
fs.constants.S_IXOTH // Execute permission for others
</code></pre>
</div>

<p><strong>Changing Permissions:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Change%20file%20permissions%0Afs.chmod('file.txt'%2C%200o755%2C%20(err)%20%3D%3E%20%7B%0A%20%20if%20(err)%20throw%20err%3B%0A%20%20console.log('Permissions%20changed')%3B%0A%7D)%3B%0A%0A%2F%2F%20Using%20constants%0Aconst%20mode%20%3D%20fs.constants.S_IRUSR%20%7C%20fs.constants.S_IWUSR%20%7C%20fs.constants.S_IRGRP%20%7C%20fs.constants.S_IROTH%3B%0Afs.chmod('file.txt'%2C%20mode%2C%20callback)%3B%0A%0A%2F%2F%20Make%20file%20executable%0Afs.chmod('script.sh'%2C%200o755%2C%20(err)%20%3D%3E%20%7B%0A%20%20if%20(err)%20throw%20err%3B%0A%20%20console.log('File%20is%20now%20executable')%3B%0A%7D)%3B%0A%0A%2F%2F%20Promise%20version%0Aawait%20fs.promises.chmod('file.txt'%2C%200o644)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Change file permissions
fs.chmod('file.txt', 0o755, (err) =&gt; {
  if (err) throw err;
  console.log('Permissions changed');
});

// Using constants
const mode = fs.constants.S_IRUSR | fs.constants.S_IWUSR | fs.constants.S_IRGRP | fs.constants.S_IROTH;
fs.chmod('file.txt', mode, callback);

// Make file executable
fs.chmod('script.sh', 0o755, (err) =&gt; {
  if (err) throw err;
  console.log('File is now executable');
});

// Promise version
await fs.promises.chmod('file.txt', 0o644);
</code></pre>
</div>

<p><strong>Checking Access:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Check%20if%20file%20is%20readable%0Afs.access('file.txt'%2C%20fs.constants.R_OK%2C%20(err)%20%3D%3E%20%7B%0A%20%20if%20(err)%20%7B%0A%20%20%20%20console.log('File%20is%20not%20readable')%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20console.log('File%20is%20readable')%3B%0A%20%20%7D%0A%7D)%3B%0A%0A%2F%2F%20Check%20multiple%20permissions%0Afs.access('file.txt'%2C%20fs.constants.R_OK%20%7C%20fs.constants.W_OK%2C%20(err)%20%3D%3E%20%7B%0A%20%20if%20(err)%20%7B%0A%20%20%20%20console.log('File%20is%20not%20readable%20and%20writable')%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20console.log('File%20is%20readable%20and%20writable')%3B%0A%20%20%7D%0A%7D)%3B%0A%0A%2F%2F%20Utility%20function%0Aasync%20function%20checkPermissions(filePath)%20%7B%0A%20%20const%20permissions%20%3D%20%7B%0A%20%20%20%20exists%3A%20false%2C%0A%20%20%20%20readable%3A%20false%2C%0A%20%20%20%20writable%3A%20false%2C%0A%20%20%20%20executable%3A%20false%0A%20%20%7D%3B%0A%20%20%0A%20%20try%20%7B%0A%20%20%20%20await%20fs.promises.access(filePath%2C%20fs.constants.F_OK)%3B%0A%20%20%20%20permissions.exists%20%3D%20true%3B%0A%20%20%20%20%0A%20%20%20%20await%20fs.promises.access(filePath%2C%20fs.constants.R_OK)%3B%0A%20%20%20%20permissions.readable%20%3D%20true%3B%0A%20%20%20%20%0A%20%20%20%20await%20fs.promises.access(filePath%2C%20fs.constants.W_OK)%3B%0A%20%20%20%20permissions.writable%20%3D%20true%3B%0A%20%20%20%20%0A%20%20%20%20await%20fs.promises.access(filePath%2C%20fs.constants.X_OK)%3B%0A%20%20%20%20permissions.executable%20%3D%20true%3B%0A%20%20%7D%20catch%20(err)%20%7B%0A%20%20%20%20%2F%2F%20Permission%20denied%20or%20file%20doesn't%20exist%0A%20%20%7D%0A%20%20%0A%20%20return%20permissions%3B%0A%7D%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Check if file is readable
fs.access('file.txt', fs.constants.R_OK, (err) =&gt; {
  if (err) {
    console.log('File is not readable');
  } else {
    console.log('File is readable');
  }
});

// Check multiple permissions
fs.access('file.txt', fs.constants.R_OK | fs.constants.W_OK, (err) =&gt; {
  if (err) {
    console.log('File is not readable and writable');
  } else {
    console.log('File is readable and writable');
  }
});

// Utility function
async function checkPermissions(filePath) {
  const permissions = {
    exists: false,
    readable: false,
    writable: false,
    executable: false
  };
  
  try {
    await fs.promises.access(filePath, fs.constants.F_OK);
    permissions.exists = true;
    
    await fs.promises.access(filePath, fs.constants.R_OK);
    permissions.readable = true;
    
    await fs.promises.access(filePath, fs.constants.W_OK);
    permissions.writable = true;
    
    await fs.promises.access(filePath, fs.constants.X_OK);
    permissions.executable = true;
  } catch (err) {
    // Permission denied or file doesn't exist
  }
  
  return permissions;
}
</code></pre>
</div>

<p>---</p>

<p><strong>109. How do you work with temporary files?</strong></p>

<p><strong>Answer:</strong> Temporary files are used for short-term storage and should be cleaned up after use.</p>

<p><strong>Creating Temporary Files:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20fs%20%3D%20require('fs')%3B%0Aconst%20path%20%3D%20require('path')%3B%0Aconst%20os%20%3D%20require('os')%3B%0Aconst%20crypto%20%3D%20require('crypto')%3B%0A%0A%2F%2F%20Get%20system%20temp%20directory%0Aconst%20tempDir%20%3D%20os.tmpdir()%3B%0Aconsole.log('Temp%20directory%3A'%2C%20tempDir)%3B%0A%0A%2F%2F%20Create%20unique%20temp%20file%20name%0Afunction%20createTempFileName(prefix%20%3D%20'temp'%2C%20extension%20%3D%20'.tmp')%20%7B%0A%20%20const%20randomName%20%3D%20crypto.randomBytes(16).toString('hex')%3B%0A%20%20return%20path.join(tempDir%2C%20%60%24%7Bprefix%7D-%24%7BrandomName%7D%24%7Bextension%7D%60)%3B%0A%7D%0A%0Aconst%20tempFile%20%3D%20createTempFileName('myapp'%2C%20'.json')%3B%0Aconsole.log('Temp%20file%3A'%2C%20tempFile)%3B%0A%0A%2F%2F%20Write%20to%20temp%20file%0Aconst%20data%20%3D%20%7B%20message%3A%20'Hello%20World'%2C%20timestamp%3A%20Date.now()%20%7D%3B%0Afs.writeFileSync(tempFile%2C%20JSON.stringify(data%2C%20null%2C%202))%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const fs = require('fs');
const path = require('path');
const os = require('os');
const crypto = require('crypto');

// Get system temp directory
const tempDir = os.tmpdir();
console.log('Temp directory:', tempDir);

// Create unique temp file name
function createTempFileName(prefix = 'temp', extension = '.tmp') {
  const randomName = crypto.randomBytes(16).toString('hex');
  return path.join(tempDir, `${prefix}-${randomName}${extension}`);
}

const tempFile = createTempFileName('myapp', '.json');
console.log('Temp file:', tempFile);

// Write to temp file
const data = { message: 'Hello World', timestamp: Date.now() };
fs.writeFileSync(tempFile, JSON.stringify(data, null, 2));
</code></pre>
</div>

<p><strong>Using Third-party Libraries:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20tmp%20library%20for%20better%20temp%20file%20handling%0Aconst%20tmp%20%3D%20require('tmp')%3B%0A%0A%2F%2F%20Create%20temporary%20file%0Atmp.file((err%2C%20path%2C%20fd%2C%20cleanupCallback)%20%3D%3E%20%7B%0A%20%20if%20(err)%20throw%20err%3B%0A%20%20%0A%20%20console.log('Temp%20file%20path%3A'%2C%20path)%3B%0A%20%20console.log('File%20descriptor%3A'%2C%20fd)%3B%0A%20%20%0A%20%20%2F%2F%20Write%20to%20file%20using%20file%20descriptor%0A%20%20fs.write(fd%2C%20'Hello%20temporary%20world!'%2C%20(err)%20%3D%3E%20%7B%0A%20%20%20%20if%20(err)%20throw%20err%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Clean%20up%0A%20%20%20%20cleanupCallback()%3B%0A%20%20%7D)%3B%0A%7D)%3B%0A%0A%2F%2F%20Create%20temporary%20directory%0Atmp.dir((err%2C%20path%2C%20cleanupCallback)%20%3D%3E%20%7B%0A%20%20if%20(err)%20throw%20err%3B%0A%20%20%0A%20%20console.log('Temp%20directory%3A'%2C%20path)%3B%0A%20%20%0A%20%20%2F%2F%20Use%20directory...%0A%20%20%0A%20%20%2F%2F%20Clean%20up%0A%20%20cleanupCallback()%3B%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// tmp library for better temp file handling
const tmp = require('tmp');

// Create temporary file
tmp.file((err, path, fd, cleanupCallback) =&gt; {
  if (err) throw err;
  
  console.log('Temp file path:', path);
  console.log('File descriptor:', fd);
  
  // Write to file using file descriptor
  fs.write(fd, 'Hello temporary world!', (err) =&gt; {
    if (err) throw err;
    
    // Clean up
    cleanupCallback();
  });
});

// Create temporary directory
tmp.dir((err, path, cleanupCallback) =&gt; {
  if (err) throw err;
  
  console.log('Temp directory:', path);
  
  // Use directory...
  
  // Clean up
  cleanupCallback();
});
</code></pre>
</div>

<p><strong>Automatic Cleanup:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="class%20TempFileManager%20%7B%0A%20%20constructor()%20%7B%0A%20%20%20%20this.tempFiles%20%3D%20new%20Set()%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Cleanup%20on%20process%20exit%0A%20%20%20%20process.on('exit'%2C%20()%20%3D%3E%20this.cleanup())%3B%0A%20%20%20%20process.on('SIGINT'%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20this.cleanup()%3B%0A%20%20%20%20%20%20process.exit(0)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%20%20%0A%20%20createTempFile(prefix%20%3D%20'temp'%2C%20extension%20%3D%20'.tmp')%20%7B%0A%20%20%20%20const%20tempFile%20%3D%20createTempFileName(prefix%2C%20extension)%3B%0A%20%20%20%20this.tempFiles.add(tempFile)%3B%0A%20%20%20%20return%20tempFile%3B%0A%20%20%7D%0A%20%20%0A%20%20deleteTempFile(filePath)%20%7B%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20fs.unlinkSync(filePath)%3B%0A%20%20%20%20%20%20this.tempFiles.delete(filePath)%3B%0A%20%20%20%20%7D%20catch%20(err)%20%7B%0A%20%20%20%20%20%20console.error('Error%20deleting%20temp%20file%3A'%2C%20err)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%0A%20%20cleanup()%20%7B%0A%20%20%20%20console.log('Cleaning%20up%20temporary%20files...')%3B%0A%20%20%20%20for%20(const%20tempFile%20of%20this.tempFiles)%20%7B%0A%20%20%20%20%20%20this.deleteTempFile(tempFile)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%0Aconst%20tempManager%20%3D%20new%20TempFileManager()%3B%0Aconst%20tempFile%20%3D%20tempManager.createTempFile('upload'%2C%20'.dat')%3B%0A%0A%2F%2F%20Use%20temp%20file...%0Afs.writeFileSync(tempFile%2C%20'temporary%20data')%3B%0A%0A%2F%2F%20File%20will%20be%20automatically%20cleaned%20up%20on%20exit%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">class TempFileManager {
  constructor() {
    this.tempFiles = new Set();
    
    // Cleanup on process exit
    process.on('exit', () =&gt; this.cleanup());
    process.on('SIGINT', () =&gt; {
      this.cleanup();
      process.exit(0);
    });
  }
  
  createTempFile(prefix = 'temp', extension = '.tmp') {
    const tempFile = createTempFileName(prefix, extension);
    this.tempFiles.add(tempFile);
    return tempFile;
  }
  
  deleteTempFile(filePath) {
    try {
      fs.unlinkSync(filePath);
      this.tempFiles.delete(filePath);
    } catch (err) {
      console.error('Error deleting temp file:', err);
    }
  }
  
  cleanup() {
    console.log('Cleaning up temporary files...');
    for (const tempFile of this.tempFiles) {
      this.deleteTempFile(tempFile);
    }
  }
}

// Usage
const tempManager = new TempFileManager();
const tempFile = tempManager.createTempFile('upload', '.dat');

// Use temp file...
fs.writeFileSync(tempFile, 'temporary data');

// File will be automatically cleaned up on exit
</code></pre>
</div>

<p><strong>Stream Processing with Temp Files:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="async%20function%20processLargeFile(inputPath%2C%20outputPath)%20%7B%0A%20%20const%20tempFile%20%3D%20createTempFileName('processing'%2C%20'.tmp')%3B%0A%20%20%0A%20%20try%20%7B%0A%20%20%20%20%2F%2F%20Step%201%3A%20Process%20to%20temp%20file%0A%20%20%20%20await%20new%20Promise((resolve%2C%20reject)%20%3D%3E%20%7B%0A%20%20%20%20%20%20fs.createReadStream(inputPath)%0A%20%20%20%20%20%20%20%20.pipe(new%20ProcessingTransform())%0A%20%20%20%20%20%20%20%20.pipe(fs.createWriteStream(tempFile))%0A%20%20%20%20%20%20%20%20.on('finish'%2C%20resolve)%0A%20%20%20%20%20%20%20%20.on('error'%2C%20reject)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Step%202%3A%20Move%20temp%20file%20to%20final%20location%0A%20%20%20%20await%20fs.promises.rename(tempFile%2C%20outputPath)%3B%0A%20%20%20%20%0A%20%20%20%20console.log('Processing%20complete')%3B%0A%20%20%7D%20catch%20(err)%20%7B%0A%20%20%20%20%2F%2F%20Clean%20up%20temp%20file%20on%20error%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20await%20fs.promises.unlink(tempFile)%3B%0A%20%20%20%20%7D%20catch%20(cleanupErr)%20%7B%0A%20%20%20%20%20%20console.error('Error%20cleaning%20up%20temp%20file%3A'%2C%20cleanupErr)%3B%0A%20%20%20%20%7D%0A%20%20%20%20throw%20err%3B%0A%20%20%7D%0A%7D%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">async function processLargeFile(inputPath, outputPath) {
  const tempFile = createTempFileName('processing', '.tmp');
  
  try {
    // Step 1: Process to temp file
    await new Promise((resolve, reject) =&gt; {
      fs.createReadStream(inputPath)
        .pipe(new ProcessingTransform())
        .pipe(fs.createWriteStream(tempFile))
        .on('finish', resolve)
        .on('error', reject);
    });
    
    // Step 2: Move temp file to final location
    await fs.promises.rename(tempFile, outputPath);
    
    console.log('Processing complete');
  } catch (err) {
    // Clean up temp file on error
    try {
      await fs.promises.unlink(tempFile);
    } catch (cleanupErr) {
      console.error('Error cleaning up temp file:', cleanupErr);
    }
    throw err;
  }
}
</code></pre>
</div>

<p>---</p>

<p><strong>110. What are symbolic links and how do you create them?</strong></p>

<p><strong>Answer:</strong> Symbolic links (symlinks) are references to other files or directories, similar to shortcuts.</p>

<p><strong>Creating Symbolic Links:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20fs%20%3D%20require('fs')%3B%0A%0A%2F%2F%20Create%20symlink%20to%20file%0Afs.symlink('%2Fpath%2Fto%2Foriginal%2Ffile.txt'%2C%20'%2Fpath%2Fto%2Fsymlink.txt'%2C%20(err)%20%3D%3E%20%7B%0A%20%20if%20(err)%20throw%20err%3B%0A%20%20console.log('Symlink%20created')%3B%0A%7D)%3B%0A%0A%2F%2F%20Create%20symlink%20to%20directory%0Afs.symlink('%2Fpath%2Fto%2Foriginal%2Fdirectory'%2C%20'%2Fpath%2Fto%2Fsymlink-dir'%2C%20'dir'%2C%20(err)%20%3D%3E%20%7B%0A%20%20if%20(err)%20throw%20err%3B%0A%20%20console.log('Directory%20symlink%20created')%3B%0A%7D)%3B%0A%0A%2F%2F%20Synchronous%20version%0Afs.symlinkSync('%2Fpath%2Fto%2Foriginal'%2C%20'%2Fpath%2Fto%2Fsymlink')%3B%0A%0A%2F%2F%20Promise%20version%0Aawait%20fs.promises.symlink('%2Fpath%2Fto%2Foriginal'%2C%20'%2Fpath%2Fto%2Fsymlink')%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const fs = require('fs');

// Create symlink to file
fs.symlink('/path/to/original/file.txt', '/path/to/symlink.txt', (err) =&gt; {
  if (err) throw err;
  console.log('Symlink created');
});

// Create symlink to directory
fs.symlink('/path/to/original/directory', '/path/to/symlink-dir', 'dir', (err) =&gt; {
  if (err) throw err;
  console.log('Directory symlink created');
});

// Synchronous version
fs.symlinkSync('/path/to/original', '/path/to/symlink');

// Promise version
await fs.promises.symlink('/path/to/original', '/path/to/symlink');
</code></pre>
</div>

<p><strong>Reading Symbolic Links:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Read%20symlink%20target%0Afs.readlink('%2Fpath%2Fto%2Fsymlink'%2C%20(err%2C%20linkString)%20%3D%3E%20%7B%0A%20%20if%20(err)%20throw%20err%3B%0A%20%20console.log('Symlink%20points%20to%3A'%2C%20linkString)%3B%0A%7D)%3B%0A%0A%2F%2F%20Check%20if%20path%20is%20a%20symlink%0Afs.lstat('%2Fpath%2Fto%2Fsymlink'%2C%20(err%2C%20stats)%20%3D%3E%20%7B%0A%20%20if%20(err)%20throw%20err%3B%0A%20%20%0A%20%20if%20(stats.isSymbolicLink())%20%7B%0A%20%20%20%20console.log('This%20is%20a%20symbolic%20link')%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20console.log('This%20is%20not%20a%20symbolic%20link')%3B%0A%20%20%7D%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Read symlink target
fs.readlink('/path/to/symlink', (err, linkString) =&gt; {
  if (err) throw err;
  console.log('Symlink points to:', linkString);
});

// Check if path is a symlink
fs.lstat('/path/to/symlink', (err, stats) =&gt; {
  if (err) throw err;
  
  if (stats.isSymbolicLink()) {
    console.log('This is a symbolic link');
  } else {
    console.log('This is not a symbolic link');
  }
});
</code></pre>
</div>

<p><strong>Working with Symlinks:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="async%20function%20analyzeSymlink(linkPath)%20%7B%0A%20%20try%20%7B%0A%20%20%20%20%2F%2F%20Get%20symlink%20stats%20(not%20target%20stats)%0A%20%20%20%20const%20linkStats%20%3D%20await%20fs.promises.lstat(linkPath)%3B%0A%20%20%20%20%0A%20%20%20%20if%20(linkStats.isSymbolicLink())%20%7B%0A%20%20%20%20%20%20%2F%2F%20Read%20where%20symlink%20points%0A%20%20%20%20%20%20const%20target%20%3D%20await%20fs.promises.readlink(linkPath)%3B%0A%20%20%20%20%20%20console.log(%60Symlink%20%24%7BlinkPath%7D%20points%20to%3A%20%24%7Btarget%7D%60)%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20%2F%2F%20Check%20if%20target%20exists%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20const%20targetStats%20%3D%20await%20fs.promises.stat(linkPath)%3B%20%2F%2F%20This%20follows%20the%20symlink%0A%20%20%20%20%20%20%20%20console.log('Target%20exists%20and%20is%3A'%2C%20targetStats.isDirectory()%20%3F%20'directory'%20%3A%20'file')%3B%0A%20%20%20%20%20%20%7D%20catch%20(err)%20%7B%0A%20%20%20%20%20%20%20%20console.log('Target%20does%20not%20exist%20(broken%20symlink)')%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20console.log('Not%20a%20symbolic%20link')%3B%0A%20%20%20%20%7D%0A%20%20%7D%20catch%20(err)%20%7B%0A%20%20%20%20console.error('Error%3A'%2C%20err)%3B%0A%20%20%7D%0A%7D%0A%0Aawait%20analyzeSymlink('.%2Fmy-symlink')%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">async function analyzeSymlink(linkPath) {
  try {
    // Get symlink stats (not target stats)
    const linkStats = await fs.promises.lstat(linkPath);
    
    if (linkStats.isSymbolicLink()) {
      // Read where symlink points
      const target = await fs.promises.readlink(linkPath);
      console.log(`Symlink ${linkPath} points to: ${target}`);
      
      // Check if target exists
      try {
        const targetStats = await fs.promises.stat(linkPath); // This follows the symlink
        console.log('Target exists and is:', targetStats.isDirectory() ? 'directory' : 'file');
      } catch (err) {
        console.log('Target does not exist (broken symlink)');
      }
    } else {
      console.log('Not a symbolic link');
    }
  } catch (err) {
    console.error('Error:', err);
  }
}

await analyzeSymlink('./my-symlink');
</code></pre>
</div>

<p><strong>Practical Examples:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Create%20symlink%20for%20configuration%0Aconst%20configPath%20%3D%20path.join(__dirname%2C%20'config'%2C%20'production.json')%3B%0Aconst%20symlinkPath%20%3D%20path.join(__dirname%2C%20'config'%2C%20'current.json')%3B%0A%0Afs.symlink(configPath%2C%20symlinkPath%2C%20(err)%20%3D%3E%20%7B%0A%20%20if%20(err%20%26%26%20err.code%20!%3D%3D%20'EEXIST')%20throw%20err%3B%0A%20%20console.log('Config%20symlink%20created')%3B%0A%7D)%3B%0A%0A%2F%2F%20Create%20symlinks%20for%20node_modules%20(like%20npm%20link)%0Aconst%20packagePath%20%3D%20'%2Fpath%2Fto%2Fmy-package'%3B%0Aconst%20nodeModulesLink%20%3D%20'.%2Fnode_modules%2Fmy-package'%3B%0A%0Afs.symlink(packagePath%2C%20nodeModulesLink%2C%20'dir'%2C%20(err)%20%3D%3E%20%7B%0A%20%20if%20(err)%20throw%20err%3B%0A%20%20console.log('Package%20linked%20for%20development')%3B%0A%7D)%3B%0A%0A%2F%2F%20Utility%20function%20to%20resolve%20symlinks%0Aasync%20function%20resolveSymlinks(filePath)%20%7B%0A%20%20try%20%7B%0A%20%20%20%20const%20realPath%20%3D%20await%20fs.promises.realpath(filePath)%3B%0A%20%20%20%20return%20realPath%3B%0A%20%20%7D%20catch%20(err)%20%7B%0A%20%20%20%20console.error('Error%20resolving%20symlink%3A'%2C%20err)%3B%0A%20%20%20%20return%20null%3B%0A%20%20%7D%0A%7D%0A%0Aconst%20realPath%20%3D%20await%20resolveSymlinks('.%2Fmy-symlink')%3B%0Aconsole.log('Real%20path%3A'%2C%20realPath)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Create symlink for configuration
const configPath = path.join(__dirname, 'config', 'production.json');
const symlinkPath = path.join(__dirname, 'config', 'current.json');

fs.symlink(configPath, symlinkPath, (err) =&gt; {
  if (err && err.code !== 'EEXIST') throw err;
  console.log('Config symlink created');
});

// Create symlinks for node_modules (like npm link)
const packagePath = '/path/to/my-package';
const nodeModulesLink = './node_modules/my-package';

fs.symlink(packagePath, nodeModulesLink, 'dir', (err) =&gt; {
  if (err) throw err;
  console.log('Package linked for development');
});

// Utility function to resolve symlinks
async function resolveSymlinks(filePath) {
  try {
    const realPath = await fs.promises.realpath(filePath);
    return realPath;
  } catch (err) {
    console.error('Error resolving symlink:', err);
    return null;
  }
}

const realPath = await resolveSymlinks('./my-symlink');
console.log('Real path:', realPath);
</code></pre>
</div>

<p>---</p>

<p>Thought for 2sPerfect! Let me continue with the final section: <strong>Process Management & Performance</strong> (Questions 111-130).</p>

<h2 id="process-management-performance-questions-111-130-">Process Management & Performance (Questions 111-130)</h2>

<p><strong>111. How do you spawn child processes in Node.js?</strong></p>

<p><strong>Answer:</strong> Node.js provides the `child_process` module to spawn child processes for running external commands or scripts.</p>

<p><strong>Methods Available:</strong></p>

<p>- `spawn()`: Launches a new process with given command</p>
<p>- `exec()`: Executes a command in a shell and buffers output</p>
<p>- `execFile()`: Similar to exec but without shell</p>
<p>- `fork()`: Special case of spawn for Node.js scripts</p>


<p><strong>Using spawn():</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20%7B%20spawn%20%7D%20%3D%20require('child_process')%3B%0A%0A%2F%2F%20Spawn%20a%20process%0Aconst%20ls%20%3D%20spawn('ls'%2C%20%5B'-la'%2C%20'%2Fusr'%5D)%3B%0A%0A%2F%2F%20Handle%20stdout%20data%0Als.stdout.on('data'%2C%20(data)%20%3D%3E%20%7B%0A%20%20console.log(%60stdout%3A%20%24%7Bdata%7D%60)%3B%0A%7D)%3B%0A%0A%2F%2F%20Handle%20stderr%20data%0Als.stderr.on('data'%2C%20(data)%20%3D%3E%20%7B%0A%20%20console.error(%60stderr%3A%20%24%7Bdata%7D%60)%3B%0A%7D)%3B%0A%0A%2F%2F%20Handle%20process%20exit%0Als.on('close'%2C%20(code)%20%3D%3E%20%7B%0A%20%20console.log(%60Child%20process%20exited%20with%20code%20%24%7Bcode%7D%60)%3B%0A%7D)%3B%0A%0A%2F%2F%20Handle%20errors%0Als.on('error'%2C%20(err)%20%3D%3E%20%7B%0A%20%20console.error('Failed%20to%20start%20subprocess%3A'%2C%20err)%3B%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const { spawn } = require('child_process');

// Spawn a process
const ls = spawn('ls', ['-la', '/usr']);

// Handle stdout data
ls.stdout.on('data', (data) =&gt; {
  console.log(`stdout: ${data}`);
});

// Handle stderr data
ls.stderr.on('data', (data) =&gt; {
  console.error(`stderr: ${data}`);
});

// Handle process exit
ls.on('close', (code) =&gt; {
  console.log(`Child process exited with code ${code}`);
});

// Handle errors
ls.on('error', (err) =&gt; {
  console.error('Failed to start subprocess:', err);
});
</code></pre>
</div>

<p><strong>Using exec():</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20%7B%20exec%20%7D%20%3D%20require('child_process')%3B%0A%0A%2F%2F%20Execute%20command%20with%20callback%0Aexec('ls%20-la'%2C%20(error%2C%20stdout%2C%20stderr)%20%3D%3E%20%7B%0A%20%20if%20(error)%20%7B%0A%20%20%20%20console.error(%60exec%20error%3A%20%24%7Berror%7D%60)%3B%0A%20%20%20%20return%3B%0A%20%20%7D%0A%20%20console.log(%60stdout%3A%20%24%7Bstdout%7D%60)%3B%0A%20%20console.error(%60stderr%3A%20%24%7Bstderr%7D%60)%3B%0A%7D)%3B%0A%0A%2F%2F%20With%20options%0Aexec('node%20--version'%2C%20%7B%20timeout%3A%205000%20%7D%2C%20(error%2C%20stdout%2C%20stderr)%20%3D%3E%20%7B%0A%20%20console.log('Node%20version%3A'%2C%20stdout.trim())%3B%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const { exec } = require('child_process');

// Execute command with callback
exec('ls -la', (error, stdout, stderr) =&gt; {
  if (error) {
    console.error(`exec error: ${error}`);
    return;
  }
  console.log(`stdout: ${stdout}`);
  console.error(`stderr: ${stderr}`);
});

// With options
exec('node --version', { timeout: 5000 }, (error, stdout, stderr) =&gt; {
  console.log('Node version:', stdout.trim());
});
</code></pre>
</div>

<p><strong>Using fork() for Node.js scripts:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20parent.js%0Aconst%20%7B%20fork%20%7D%20%3D%20require('child_process')%3B%0A%0Aconst%20child%20%3D%20fork('.%2Fworker.js')%3B%0A%0A%2F%2F%20Send%20message%20to%20child%0Achild.send(%7B%20task%3A%20'process-data'%2C%20data%3A%20%5B1%2C%202%2C%203%2C%204%2C%205%5D%20%7D)%3B%0A%0A%2F%2F%20Receive%20message%20from%20child%0Achild.on('message'%2C%20(result)%20%3D%3E%20%7B%0A%20%20console.log('Result%20from%20child%3A'%2C%20result)%3B%0A%7D)%3B%0A%0A%2F%2F%20worker.js%0Aprocess.on('message'%2C%20(msg)%20%3D%3E%20%7B%0A%20%20if%20(msg.task%20%3D%3D%3D%20'process-data')%20%7B%0A%20%20%20%20const%20result%20%3D%20msg.data.map(x%20%3D%3E%20x%20*%202)%3B%0A%20%20%20%20process.send(%7B%20result%20%7D)%3B%0A%20%20%7D%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// parent.js
const { fork } = require('child_process');

const child = fork('./worker.js');

// Send message to child
child.send({ task: 'process-data', data: [1, 2, 3, 4, 5] });

// Receive message from child
child.on('message', (result) =&gt; {
  console.log('Result from child:', result);
});

// worker.js
process.on('message', (msg) =&gt; {
  if (msg.task === 'process-data') {
    const result = msg.data.map(x =&gt; x * 2);
    process.send({ result });
  }
});
</code></pre>
</div>

<p>---</p>

<p><strong>112. What is the difference between `spawn()`, `exec()`, and `fork()`?</strong></p>

<p><strong>Answer:</strong></p>

<p><strong>spawn():</strong></p>

<p>- Launches command without shell</p>
<p>- Streams data (good for large output)</p>
<p>- More efficient for long-running processes</p>
<p>- Returns ChildProcess object immediately</p>


<p><strong>exec():</strong></p>

<p>- Runs command in shell</p>
<p>- Buffers entire output in memory</p>
<p>- Good for small output</p>
<p>- Callback receives complete output</p>


<p><strong>fork():</strong></p>

<p>- Special case of spawn() for Node.js scripts</p>
<p>- Creates IPC channel for communication</p>
<p>- Child inherits parent's environment</p>
<p>- Built-in message passing</p>


<p><strong>Comparison Example:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20%7B%20spawn%2C%20exec%2C%20fork%20%7D%20%3D%20require('child_process')%3B%0A%0A%2F%2F%20spawn%20-%20streaming%2C%20no%20shell%0Aconst%20spawnProcess%20%3D%20spawn('find'%2C%20%5B'.'%2C%20'-name'%2C%20'*.js'%5D)%3B%0AspawnProcess.stdout.on('data'%2C%20(data)%20%3D%3E%20%7B%0A%20%20console.log('spawn%20output%3A'%2C%20data.toString())%3B%0A%7D)%3B%0A%0A%2F%2F%20exec%20-%20buffered%2C%20with%20shell%0Aexec('find%20.%20-name%20%22*.js%22'%2C%20(error%2C%20stdout%2C%20stderr)%20%3D%3E%20%7B%0A%20%20console.log('exec%20output%3A'%2C%20stdout)%3B%0A%7D)%3B%0A%0A%2F%2F%20fork%20-%20Node.js%20script%20with%20IPC%0Aconst%20forkedProcess%20%3D%20fork('.%2Fchild-script.js')%3B%0AforkedProcess.send(%7B%20message%3A%20'Hello%20from%20parent'%20%7D)%3B%0AforkedProcess.on('message'%2C%20(msg)%20%3D%3E%20%7B%0A%20%20console.log('Message%20from%20child%3A'%2C%20msg)%3B%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const { spawn, exec, fork } = require('child_process');

// spawn - streaming, no shell
const spawnProcess = spawn('find', ['.', '-name', '*.js']);
spawnProcess.stdout.on('data', (data) =&gt; {
  console.log('spawn output:', data.toString());
});

// exec - buffered, with shell
exec('find . -name "*.js"', (error, stdout, stderr) =&gt; {
  console.log('exec output:', stdout);
});

// fork - Node.js script with IPC
const forkedProcess = fork('./child-script.js');
forkedProcess.send({ message: 'Hello from parent' });
forkedProcess.on('message', (msg) =&gt; {
  console.log('Message from child:', msg);
});
</code></pre>
</div>

<p><strong>When to use each:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Use%20spawn%20for%3A%0A%2F%2F%20-%20Large%20output%20that%20should%20be%20streamed%0A%2F%2F%20-%20Long-running%20processes%0A%2F%2F%20-%20When%20you%20need%20fine%20control%20over%20stdio%0Aspawn('tail'%2C%20%5B'-f'%2C%20'large-log-file.txt'%5D)%3B%0A%0A%2F%2F%20Use%20exec%20for%3A%0A%2F%2F%20-%20Simple%20commands%20with%20small%20output%0A%2F%2F%20-%20When%20you%20need%20shell%20features%20(pipes%2C%20redirects)%0A%2F%2F%20-%20Quick%20one-off%20commands%0Aexec('git%20status%20--porcelain'%2C%20callback)%3B%0A%0A%2F%2F%20Use%20fork%20for%3A%0A%2F%2F%20-%20Running%20Node.js%20scripts%0A%2F%2F%20-%20CPU-intensive%20tasks%20in%20separate%20process%0A%2F%2F%20-%20When%20you%20need%20IPC%20communication%0Afork('.%2Fcpu-intensive-worker.js')%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Use spawn for:
// - Large output that should be streamed
// - Long-running processes
// - When you need fine control over stdio
spawn('tail', ['-f', 'large-log-file.txt']);

// Use exec for:
// - Simple commands with small output
// - When you need shell features (pipes, redirects)
// - Quick one-off commands
exec('git status --porcelain', callback);

// Use fork for:
// - Running Node.js scripts
// - CPU-intensive tasks in separate process
// - When you need IPC communication
fork('./cpu-intensive-worker.js');
</code></pre>
</div>

<p>---</p>

<p><strong>113. How do you communicate between parent and child processes?</strong></p>

<p><strong>Answer:</strong> Inter-Process Communication (IPC) can be achieved through various methods:</p>

<p><strong>1. Using fork() with built-in IPC:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20parent.js%0Aconst%20%7B%20fork%20%7D%20%3D%20require('child_process')%3B%0A%0Aconst%20child%20%3D%20fork('.%2Fchild.js')%3B%0A%0A%2F%2F%20Send%20data%20to%20child%0Achild.send(%7B%0A%20%20type%3A%20'TASK'%2C%0A%20%20data%3A%20%7B%20numbers%3A%20%5B1%2C%202%2C%203%2C%204%2C%205%5D%20%7D%0A%7D)%3B%0A%0A%2F%2F%20Receive%20data%20from%20child%0Achild.on('message'%2C%20(message)%20%3D%3E%20%7B%0A%20%20console.log('Received%20from%20child%3A'%2C%20message)%3B%0A%20%20%0A%20%20if%20(message.type%20%3D%3D%3D%20'RESULT')%20%7B%0A%20%20%20%20console.log('Calculation%20result%3A'%2C%20message.data)%3B%0A%20%20%7D%0A%7D)%3B%0A%0A%2F%2F%20Handle%20child%20exit%0Achild.on('exit'%2C%20(code)%20%3D%3E%20%7B%0A%20%20console.log(%60Child%20exited%20with%20code%20%24%7Bcode%7D%60)%3B%0A%7D)%3B%0A%0A%2F%2F%20child.js%0Aprocess.on('message'%2C%20(message)%20%3D%3E%20%7B%0A%20%20if%20(message.type%20%3D%3D%3D%20'TASK')%20%7B%0A%20%20%20%20const%20numbers%20%3D%20message.data.numbers%3B%0A%20%20%20%20const%20sum%20%3D%20numbers.reduce((a%2C%20b)%20%3D%3E%20a%20%2B%20b%2C%200)%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Send%20result%20back%20to%20parent%0A%20%20%20%20process.send(%7B%0A%20%20%20%20%20%20type%3A%20'RESULT'%2C%0A%20%20%20%20%20%20data%3A%20sum%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%7D)%3B%0A%0A%2F%2F%20Send%20periodic%20updates%0AsetInterval(()%20%3D%3E%20%7B%0A%20%20process.send(%7B%0A%20%20%20%20type%3A%20'HEARTBEAT'%2C%0A%20%20%20%20timestamp%3A%20Date.now()%0A%20%20%7D)%3B%0A%7D%2C%205000)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// parent.js
const { fork } = require('child_process');

const child = fork('./child.js');

// Send data to child
child.send({
  type: 'TASK',
  data: { numbers: [1, 2, 3, 4, 5] }
});

// Receive data from child
child.on('message', (message) =&gt; {
  console.log('Received from child:', message);
  
  if (message.type === 'RESULT') {
    console.log('Calculation result:', message.data);
  }
});

// Handle child exit
child.on('exit', (code) =&gt; {
  console.log(`Child exited with code ${code}`);
});

// child.js
process.on('message', (message) =&gt; {
  if (message.type === 'TASK') {
    const numbers = message.data.numbers;
    const sum = numbers.reduce((a, b) =&gt; a + b, 0);
    
    // Send result back to parent
    process.send({
      type: 'RESULT',
      data: sum
    });
  }
});

// Send periodic updates
setInterval(() =&gt; {
  process.send({
    type: 'HEARTBEAT',
    timestamp: Date.now()
  });
}, 5000);
</code></pre>
</div>

<p><strong>2. Using stdio pipes:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20parent.js%0Aconst%20%7B%20spawn%20%7D%20%3D%20require('child_process')%3B%0A%0Aconst%20child%20%3D%20spawn('node'%2C%20%5B'child.js'%5D%2C%20%7B%0A%20%20stdio%3A%20%5B'pipe'%2C%20'pipe'%2C%20'pipe'%2C%20'ipc'%5D%0A%7D)%3B%0A%0A%2F%2F%20Send%20data%20via%20stdin%0Achild.stdin.write(JSON.stringify(%7B%20task%3A%20'calculate'%2C%20data%3A%20%5B1%2C%202%2C%203%5D%20%7D))%3B%0Achild.stdin.end()%3B%0A%0A%2F%2F%20Receive%20data%20via%20stdout%0Achild.stdout.on('data'%2C%20(data)%20%3D%3E%20%7B%0A%20%20const%20result%20%3D%20JSON.parse(data.toString())%3B%0A%20%20console.log('Result%3A'%2C%20result)%3B%0A%7D)%3B%0A%0A%2F%2F%20child.js%0Alet%20inputData%20%3D%20''%3B%0A%0Aprocess.stdin.on('data'%2C%20(chunk)%20%3D%3E%20%7B%0A%20%20inputData%20%2B%3D%20chunk%3B%0A%7D)%3B%0A%0Aprocess.stdin.on('end'%2C%20()%20%3D%3E%20%7B%0A%20%20const%20message%20%3D%20JSON.parse(inputData)%3B%0A%20%20%0A%20%20if%20(message.task%20%3D%3D%3D%20'calculate')%20%7B%0A%20%20%20%20const%20sum%20%3D%20message.data.reduce((a%2C%20b)%20%3D%3E%20a%20%2B%20b%2C%200)%3B%0A%20%20%20%20process.stdout.write(JSON.stringify(%7B%20result%3A%20sum%20%7D))%3B%0A%20%20%7D%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// parent.js
const { spawn } = require('child_process');

const child = spawn('node', ['child.js'], {
  stdio: ['pipe', 'pipe', 'pipe', 'ipc']
});

// Send data via stdin
child.stdin.write(JSON.stringify({ task: 'calculate', data: [1, 2, 3] }));
child.stdin.end();

// Receive data via stdout
child.stdout.on('data', (data) =&gt; {
  const result = JSON.parse(data.toString());
  console.log('Result:', result);
});

// child.js
let inputData = '';

process.stdin.on('data', (chunk) =&gt; {
  inputData += chunk;
});

process.stdin.on('end', () =&gt; {
  const message = JSON.parse(inputData);
  
  if (message.task === 'calculate') {
    const sum = message.data.reduce((a, b) =&gt; a + b, 0);
    process.stdout.write(JSON.stringify({ result: sum }));
  }
});
</code></pre>
</div>

<p><strong>3. Using shared files or databases:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20parent.js%0Aconst%20fs%20%3D%20require('fs')%3B%0Aconst%20%7B%20spawn%20%7D%20%3D%20require('child_process')%3B%0A%0A%2F%2F%20Write%20task%20to%20shared%20file%0Aconst%20task%20%3D%20%7B%20id%3A%201%2C%20data%3A%20%5B1%2C%202%2C%203%2C%204%2C%205%5D%20%7D%3B%0Afs.writeFileSync('.%2Fshared-task.json'%2C%20JSON.stringify(task))%3B%0A%0A%2F%2F%20Spawn%20child%0Aconst%20child%20%3D%20spawn('node'%2C%20%5B'worker.js'%5D)%3B%0A%0A%2F%2F%20Watch%20for%20result%20file%0Afs.watchFile('.%2Fshared-result.json'%2C%20(curr%2C%20prev)%20%3D%3E%20%7B%0A%20%20if%20(curr.mtime%20%3E%20prev.mtime)%20%7B%0A%20%20%20%20const%20result%20%3D%20JSON.parse(fs.readFileSync('.%2Fshared-result.json'))%3B%0A%20%20%20%20console.log('Result%3A'%2C%20result)%3B%0A%20%20%20%20fs.unwatchFile('.%2Fshared-result.json')%3B%0A%20%20%7D%0A%7D)%3B%0A%0A%2F%2F%20worker.js%0Aconst%20fs%20%3D%20require('fs')%3B%0A%0A%2F%2F%20Read%20task%0Aconst%20task%20%3D%20JSON.parse(fs.readFileSync('.%2Fshared-task.json'))%3B%0Aconst%20result%20%3D%20task.data.reduce((a%2C%20b)%20%3D%3E%20a%20%2B%20b%2C%200)%3B%0A%0A%2F%2F%20Write%20result%0Afs.writeFileSync('.%2Fshared-result.json'%2C%20JSON.stringify(%7B%20%0A%20%20id%3A%20task.id%2C%20%0A%20%20result%20%0A%7D))%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// parent.js
const fs = require('fs');
const { spawn } = require('child_process');

// Write task to shared file
const task = { id: 1, data: [1, 2, 3, 4, 5] };
fs.writeFileSync('./shared-task.json', JSON.stringify(task));

// Spawn child
const child = spawn('node', ['worker.js']);

// Watch for result file
fs.watchFile('./shared-result.json', (curr, prev) =&gt; {
  if (curr.mtime &gt; prev.mtime) {
    const result = JSON.parse(fs.readFileSync('./shared-result.json'));
    console.log('Result:', result);
    fs.unwatchFile('./shared-result.json');
  }
});

// worker.js
const fs = require('fs');

// Read task
const task = JSON.parse(fs.readFileSync('./shared-task.json'));
const result = task.data.reduce((a, b) =&gt; a + b, 0);

// Write result
fs.writeFileSync('./shared-result.json', JSON.stringify({ 
  id: task.id, 
  result 
}));
</code></pre>
</div>

<p>---</p>

<p><strong>114. How do you handle process signals in Node.js?</strong></p>

<p><strong>Answer:</strong> Process signals are system-level notifications sent to processes. Node.js can listen for and handle these signals.</p>

<p><strong>Common Signals:</strong></p>

<p>- <strong>SIGINT</strong>: Interrupt (Ctrl+C)</p>
<p>- <strong>SIGTERM</strong>: Termination request</p>
<p>- <strong>SIGUSR1</strong>: User-defined signal 1 (triggers debugger)</p>
<p>- <strong>SIGUSR2</strong>: User-defined signal 2</p>
<p>- <strong>SIGHUP</strong>: Hang up (terminal closed)</p>


<p><strong>Handling Signals:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Graceful%20shutdown%20on%20SIGINT%20(Ctrl%2BC)%0Aprocess.on('SIGINT'%2C%20()%20%3D%3E%20%7B%0A%20%20console.log('%5CnReceived%20SIGINT%20(Ctrl%2BC)')%3B%0A%20%20console.log('Shutting%20down%20gracefully...')%3B%0A%20%20%0A%20%20%2F%2F%20Close%20server%0A%20%20if%20(server)%20%7B%0A%20%20%20%20server.close(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20console.log('HTTP%20server%20closed')%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20%2F%2F%20Close%20database%20connections%0A%20%20%20%20%20%20if%20(database)%20%7B%0A%20%20%20%20%20%20%20%20database.close(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20console.log('Database%20connection%20closed')%3B%0A%20%20%20%20%20%20%20%20%20%20process.exit(0)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D%20else%20%7B%0A%20%20%20%20%20%20%20%20process.exit(0)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%7D%20else%20%7B%0A%20%20%20%20process.exit(0)%3B%0A%20%20%7D%0A%7D)%3B%0A%0A%2F%2F%20Handle%20SIGTERM%20(process%20manager%20termination)%0Aprocess.on('SIGTERM'%2C%20()%20%3D%3E%20%7B%0A%20%20console.log('Received%20SIGTERM')%3B%0A%20%20%2F%2F%20Perform%20cleanup%0A%20%20cleanup()%3B%0A%20%20process.exit(0)%3B%0A%7D)%3B%0A%0A%2F%2F%20Handle%20SIGUSR2%20for%20graceful%20restart%20(used%20by%20nodemon)%0Aprocess.on('SIGUSR2'%2C%20()%20%3D%3E%20%7B%0A%20%20console.log('Received%20SIGUSR2%20-%20restarting...')%3B%0A%20%20cleanup()%3B%0A%20%20process.kill(process.pid%2C%20'SIGUSR2')%3B%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Graceful shutdown on SIGINT (Ctrl+C)
process.on('SIGINT', () =&gt; {
  console.log('\nReceived SIGINT (Ctrl+C)');
  console.log('Shutting down gracefully...');
  
  // Close server
  if (server) {
    server.close(() =&gt; {
      console.log('HTTP server closed');
      
      // Close database connections
      if (database) {
        database.close(() =&gt; {
          console.log('Database connection closed');
          process.exit(0);
        });
      } else {
        process.exit(0);
      }
    });
  } else {
    process.exit(0);
  }
});

// Handle SIGTERM (process manager termination)
process.on('SIGTERM', () =&gt; {
  console.log('Received SIGTERM');
  // Perform cleanup
  cleanup();
  process.exit(0);
});

// Handle SIGUSR2 for graceful restart (used by nodemon)
process.on('SIGUSR2', () =&gt; {
  console.log('Received SIGUSR2 - restarting...');
  cleanup();
  process.kill(process.pid, 'SIGUSR2');
});
</code></pre>
</div>

<p><strong>Sending Signals:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Send%20signal%20to%20another%20process%0Aprocess.kill(childProcess.pid%2C%20'SIGTERM')%3B%0A%0A%2F%2F%20Send%20signal%20to%20current%20process%0Aprocess.kill(process.pid%2C%20'SIGUSR1')%3B%0A%0A%2F%2F%20Send%20signal%20by%20PID%0Aprocess.kill(1234%2C%20'SIGINT')%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Send signal to another process
process.kill(childProcess.pid, 'SIGTERM');

// Send signal to current process
process.kill(process.pid, 'SIGUSR1');

// Send signal by PID
process.kill(1234, 'SIGINT');
</code></pre>
</div>

<p><strong>Advanced Signal Handling:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="class%20GracefulShutdown%20%7B%0A%20%20constructor()%20%7B%0A%20%20%20%20this.isShuttingDown%20%3D%20false%3B%0A%20%20%20%20this.connections%20%3D%20new%20Set()%3B%0A%20%20%20%20this.setupSignalHandlers()%3B%0A%20%20%7D%0A%20%20%0A%20%20setupSignalHandlers()%20%7B%0A%20%20%20%20%2F%2F%20Handle%20multiple%20shutdown%20signals%0A%20%20%20%20%5B'SIGINT'%2C%20'SIGTERM'%2C%20'SIGQUIT'%5D.forEach(signal%20%3D%3E%20%7B%0A%20%20%20%20%20%20process.on(signal%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20console.log(%60Received%20%24%7Bsignal%7D%60)%3B%0A%20%20%20%20%20%20%20%20this.shutdown(signal)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Handle%20uncaught%20exceptions%0A%20%20%20%20process.on('uncaughtException'%2C%20(err)%20%3D%3E%20%7B%0A%20%20%20%20%20%20console.error('Uncaught%20Exception%3A'%2C%20err)%3B%0A%20%20%20%20%20%20this.shutdown('UNCAUGHT_EXCEPTION')%3B%0A%20%20%20%20%7D)%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Handle%20unhandled%20promise%20rejections%0A%20%20%20%20process.on('unhandledRejection'%2C%20(reason%2C%20promise)%20%3D%3E%20%7B%0A%20%20%20%20%20%20console.error('Unhandled%20Rejection%20at%3A'%2C%20promise%2C%20'reason%3A'%2C%20reason)%3B%0A%20%20%20%20%20%20this.shutdown('UNHANDLED_REJECTION')%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%20%20%0A%20%20async%20shutdown(signal)%20%7B%0A%20%20%20%20if%20(this.isShuttingDown)%20%7B%0A%20%20%20%20%20%20console.log('Already%20shutting%20down...')%3B%0A%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20this.isShuttingDown%20%3D%20true%3B%0A%20%20%20%20console.log(%60Starting%20graceful%20shutdown%20due%20to%20%24%7Bsignal%7D%60)%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Set%20timeout%20for%20forced%20shutdown%0A%20%20%20%20const%20forceShutdownTimer%20%3D%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20console.log('Forced%20shutdown%20due%20to%20timeout')%3B%0A%20%20%20%20%20%20process.exit(1)%3B%0A%20%20%20%20%7D%2C%2010000)%3B%0A%20%20%20%20%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%2F%2F%20Close%20server%0A%20%20%20%20%20%20await%20this.closeServer()%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20%2F%2F%20Close%20database%20connections%0A%20%20%20%20%20%20await%20this.closeDatabase()%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20%2F%2F%20Wait%20for%20active%20connections%20to%20finish%0A%20%20%20%20%20%20await%20this.waitForConnections()%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20clearTimeout(forceShutdownTimer)%3B%0A%20%20%20%20%20%20console.log('Graceful%20shutdown%20completed')%3B%0A%20%20%20%20%20%20process.exit(0)%3B%0A%20%20%20%20%7D%20catch%20(err)%20%7B%0A%20%20%20%20%20%20console.error('Error%20during%20shutdown%3A'%2C%20err)%3B%0A%20%20%20%20%20%20process.exit(1)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A%0Aconst%20gracefulShutdown%20%3D%20new%20GracefulShutdown()%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">class GracefulShutdown {
  constructor() {
    this.isShuttingDown = false;
    this.connections = new Set();
    this.setupSignalHandlers();
  }
  
  setupSignalHandlers() {
    // Handle multiple shutdown signals
    ['SIGINT', 'SIGTERM', 'SIGQUIT'].forEach(signal =&gt; {
      process.on(signal, () =&gt; {
        console.log(`Received ${signal}`);
        this.shutdown(signal);
      });
    });
    
    // Handle uncaught exceptions
    process.on('uncaughtException', (err) =&gt; {
      console.error('Uncaught Exception:', err);
      this.shutdown('UNCAUGHT_EXCEPTION');
    });
    
    // Handle unhandled promise rejections
    process.on('unhandledRejection', (reason, promise) =&gt; {
      console.error('Unhandled Rejection at:', promise, 'reason:', reason);
      this.shutdown('UNHANDLED_REJECTION');
    });
  }
  
  async shutdown(signal) {
    if (this.isShuttingDown) {
      console.log('Already shutting down...');
      return;
    }
    
    this.isShuttingDown = true;
    console.log(`Starting graceful shutdown due to ${signal}`);
    
    // Set timeout for forced shutdown
    const forceShutdownTimer = setTimeout(() =&gt; {
      console.log('Forced shutdown due to timeout');
      process.exit(1);
    }, 10000);
    
    try {
      // Close server
      await this.closeServer();
      
      // Close database connections
      await this.closeDatabase();
      
      // Wait for active connections to finish
      await this.waitForConnections();
      
      clearTimeout(forceShutdownTimer);
      console.log('Graceful shutdown completed');
      process.exit(0);
    } catch (err) {
      console.error('Error during shutdown:', err);
      process.exit(1);
    }
  }
}

const gracefulShutdown = new GracefulShutdown();
</code></pre>
</div>

<p>---</p>

<p><strong>115. What is clustering in Node.js and how do you implement it?</strong></p>

<p><strong>Answer:</strong> Clustering allows you to create multiple worker processes that share the same server port, utilizing multiple CPU cores.</p>

<p><strong>Basic Clustering:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20cluster%20%3D%20require('cluster')%3B%0Aconst%20http%20%3D%20require('http')%3B%0Aconst%20numCPUs%20%3D%20require('os').cpus().length%3B%0A%0Aif%20(cluster.isMaster)%20%7B%0A%20%20console.log(%60Master%20%24%7Bprocess.pid%7D%20is%20running%60)%3B%0A%20%20%0A%20%20%2F%2F%20Fork%20workers%0A%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20numCPUs%3B%20i%2B%2B)%20%7B%0A%20%20%20%20cluster.fork()%3B%0A%20%20%7D%0A%20%20%0A%20%20%2F%2F%20Handle%20worker%20exit%0A%20%20cluster.on('exit'%2C%20(worker%2C%20code%2C%20signal)%20%3D%3E%20%7B%0A%20%20%20%20console.log(%60Worker%20%24%7Bworker.process.pid%7D%20died%60)%3B%0A%20%20%20%20console.log('Starting%20a%20new%20worker')%3B%0A%20%20%20%20cluster.fork()%3B%0A%20%20%7D)%3B%0A%20%20%0A%7D%20else%20%7B%0A%20%20%2F%2F%20Workers%20can%20share%20any%20TCP%20port%0A%20%20const%20server%20%3D%20http.createServer((req%2C%20res)%20%3D%3E%20%7B%0A%20%20%20%20res.writeHead(200)%3B%0A%20%20%20%20res.end(%60Hello%20from%20worker%20%24%7Bprocess.pid%7D%5Cn%60)%3B%0A%20%20%7D)%3B%0A%20%20%0A%20%20server.listen(8000)%3B%0A%20%20console.log(%60Worker%20%24%7Bprocess.pid%7D%20started%60)%3B%0A%7D%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const cluster = require('cluster');
const http = require('http');
const numCPUs = require('os').cpus().length;

if (cluster.isMaster) {
  console.log(`Master ${process.pid} is running`);
  
  // Fork workers
  for (let i = 0; i &lt; numCPUs; i++) {
    cluster.fork();
  }
  
  // Handle worker exit
  cluster.on('exit', (worker, code, signal) =&gt; {
    console.log(`Worker ${worker.process.pid} died`);
    console.log('Starting a new worker');
    cluster.fork();
  });
  
} else {
  // Workers can share any TCP port
  const server = http.createServer((req, res) =&gt; {
    res.writeHead(200);
    res.end(`Hello from worker ${process.pid}\n`);
  });
  
  server.listen(8000);
  console.log(`Worker ${process.pid} started`);
}
</code></pre>
</div>

<p><strong>Advanced Clustering with Express:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20cluster%20%3D%20require('cluster')%3B%0Aconst%20express%20%3D%20require('express')%3B%0Aconst%20numCPUs%20%3D%20require('os').cpus().length%3B%0A%0Aif%20(cluster.isMaster)%20%7B%0A%20%20console.log(%60Master%20%24%7Bprocess.pid%7D%20is%20running%60)%3B%0A%20%20%0A%20%20%2F%2F%20Fork%20workers%0A%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20numCPUs%3B%20i%2B%2B)%20%7B%0A%20%20%20%20const%20worker%20%3D%20cluster.fork()%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Send%20configuration%20to%20worker%0A%20%20%20%20worker.send(%7B%0A%20%20%20%20%20%20type%3A%20'config'%2C%0A%20%20%20%20%20%20data%3A%20%7B%20workerId%3A%20i%2C%20port%3A%203000%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%20%20%0A%20%20%2F%2F%20Handle%20worker%20messages%0A%20%20cluster.on('message'%2C%20(worker%2C%20message)%20%3D%3E%20%7B%0A%20%20%20%20if%20(message.type%20%3D%3D%3D%20'ready')%20%7B%0A%20%20%20%20%20%20console.log(%60Worker%20%24%7Bworker.process.pid%7D%20is%20ready%60)%3B%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%20%20%0A%20%20%2F%2F%20Graceful%20restart%0A%20%20cluster.on('exit'%2C%20(worker%2C%20code%2C%20signal)%20%3D%3E%20%7B%0A%20%20%20%20if%20(code%20!%3D%3D%200%20%26%26%20!worker.exitedAfterDisconnect)%20%7B%0A%20%20%20%20%20%20console.log(%60Worker%20%24%7Bworker.process.pid%7D%20crashed.%20Starting%20a%20new%20worker...%60)%3B%0A%20%20%20%20%20%20cluster.fork()%3B%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%20%20%0A%20%20%2F%2F%20Graceful%20shutdown%0A%20%20process.on('SIGTERM'%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20console.log('Master%20received%20SIGTERM%2C%20shutting%20down%20workers...')%3B%0A%20%20%20%20%0A%20%20%20%20for%20(const%20id%20in%20cluster.workers)%20%7B%0A%20%20%20%20%20%20cluster.workers%5Bid%5D.kill()%3B%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%20%20%0A%7D%20else%20%7B%0A%20%20const%20app%20%3D%20express()%3B%0A%20%20%0A%20%20%2F%2F%20Worker%20configuration%0A%20%20process.on('message'%2C%20(message)%20%3D%3E%20%7B%0A%20%20%20%20if%20(message.type%20%3D%3D%3D%20'config')%20%7B%0A%20%20%20%20%20%20const%20%7B%20workerId%2C%20port%20%7D%20%3D%20message.data%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20app.get('%2F'%2C%20(req%2C%20res)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20res.json(%7B%0A%20%20%20%20%20%20%20%20%20%20message%3A%20'Hello%20from%20cluster!'%2C%0A%20%20%20%20%20%20%20%20%20%20worker%3A%20process.pid%2C%0A%20%20%20%20%20%20%20%20%20%20workerId%3A%20workerId%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20const%20server%20%3D%20app.listen(port%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20console.log(%60Worker%20%24%7Bprocess.pid%7D%20listening%20on%20port%20%24%7Bport%7D%60)%3B%0A%20%20%20%20%20%20%20%20process.send(%7B%20type%3A%20'ready'%20%7D)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20%2F%2F%20Graceful%20shutdown%20for%20worker%0A%20%20%20%20%20%20process.on('SIGTERM'%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20console.log(%60Worker%20%24%7Bprocess.pid%7D%20received%20SIGTERM%60)%3B%0A%20%20%20%20%20%20%20%20server.close(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20%20%20process.exit(0)%3B%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%7D%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const cluster = require('cluster');
const express = require('express');
const numCPUs = require('os').cpus().length;

if (cluster.isMaster) {
  console.log(`Master ${process.pid} is running`);
  
  // Fork workers
  for (let i = 0; i &lt; numCPUs; i++) {
    const worker = cluster.fork();
    
    // Send configuration to worker
    worker.send({
      type: 'config',
      data: { workerId: i, port: 3000 }
    });
  }
  
  // Handle worker messages
  cluster.on('message', (worker, message) =&gt; {
    if (message.type === 'ready') {
      console.log(`Worker ${worker.process.pid} is ready`);
    }
  });
  
  // Graceful restart
  cluster.on('exit', (worker, code, signal) =&gt; {
    if (code !== 0 && !worker.exitedAfterDisconnect) {
      console.log(`Worker ${worker.process.pid} crashed. Starting a new worker...`);
      cluster.fork();
    }
  });
  
  // Graceful shutdown
  process.on('SIGTERM', () =&gt; {
    console.log('Master received SIGTERM, shutting down workers...');
    
    for (const id in cluster.workers) {
      cluster.workers[id].kill();
    }
  });
  
} else {
  const app = express();
  
  // Worker configuration
  process.on('message', (message) =&gt; {
    if (message.type === 'config') {
      const { workerId, port } = message.data;
      
      app.get('/', (req, res) =&gt; {
        res.json({
          message: 'Hello from cluster!',
          worker: process.pid,
          workerId: workerId
        });
      });
      
      const server = app.listen(port, () =&gt; {
        console.log(`Worker ${process.pid} listening on port ${port}`);
        process.send({ type: 'ready' });
      });
      
      // Graceful shutdown for worker
      process.on('SIGTERM', () =&gt; {
        console.log(`Worker ${process.pid} received SIGTERM`);
        server.close(() =&gt; {
          process.exit(0);
        });
      });
    }
  });
}
</code></pre>
</div>

<p><strong>Zero-downtime Deployment:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20master.js%0Aconst%20cluster%20%3D%20require('cluster')%3B%0A%0Aclass%20ClusterManager%20%7B%0A%20%20constructor()%20%7B%0A%20%20%20%20this.workers%20%3D%20new%20Map()%3B%0A%20%20%20%20this.isRestarting%20%3D%20false%3B%0A%20%20%7D%0A%20%20%0A%20%20start()%20%7B%0A%20%20%20%20const%20numWorkers%20%3D%20require('os').cpus().length%3B%0A%20%20%20%20%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20numWorkers%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20this.createWorker()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Handle%20graceful%20restart%20signal%0A%20%20%20%20process.on('SIGUSR2'%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20%20%20this.gracefulRestart()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%20%20%0A%20%20createWorker()%20%7B%0A%20%20%20%20const%20worker%20%3D%20cluster.fork()%3B%0A%20%20%20%20this.workers.set(worker.id%2C%20worker)%3B%0A%20%20%20%20%0A%20%20%20%20worker.on('exit'%2C%20(code%2C%20signal)%20%3D%3E%20%7B%0A%20%20%20%20%20%20this.workers.delete(worker.id)%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20if%20(!worker.exitedAfterDisconnect)%20%7B%0A%20%20%20%20%20%20%20%20console.log(%60Worker%20%24%7Bworker.process.pid%7D%20crashed%2C%20restarting...%60)%3B%0A%20%20%20%20%20%20%20%20this.createWorker()%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%20%20%0A%20%20async%20gracefulRestart()%20%7B%0A%20%20%20%20if%20(this.isRestarting)%20return%3B%0A%20%20%20%20this.isRestarting%20%3D%20true%3B%0A%20%20%20%20%0A%20%20%20%20console.log('Starting%20graceful%20restart...')%3B%0A%20%20%20%20%0A%20%20%20%20const%20workerIds%20%3D%20Array.from(this.workers.keys())%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Restart%20workers%20one%20by%20one%0A%20%20%20%20for%20(const%20workerId%20of%20workerIds)%20%7B%0A%20%20%20%20%20%20const%20worker%20%3D%20this.workers.get(workerId)%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20%2F%2F%20Create%20new%20worker%20first%0A%20%20%20%20%20%20this.createWorker()%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20%2F%2F%20Wait%20a%20bit%20for%20new%20worker%20to%20be%20ready%0A%20%20%20%20%20%20await%20new%20Promise(resolve%20%3D%3E%20setTimeout(resolve%2C%201000))%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20%2F%2F%20Gracefully%20shutdown%20old%20worker%0A%20%20%20%20%20%20worker.disconnect()%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20%2F%2F%20Force%20kill%20if%20not%20exited%20within%20timeout%0A%20%20%20%20%20%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20if%20(!worker.isDead())%20%7B%0A%20%20%20%20%20%20%20%20%20%20worker.kill()%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%2C%205000)%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20%2F%2F%20Wait%20for%20worker%20to%20exit%0A%20%20%20%20%20%20await%20new%20Promise(resolve%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20worker.on('exit'%2C%20resolve)%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20this.isRestarting%20%3D%20false%3B%0A%20%20%20%20console.log('Graceful%20restart%20completed')%3B%0A%20%20%7D%0A%7D%0A%0Aif%20(cluster.isMaster)%20%7B%0A%20%20const%20manager%20%3D%20new%20ClusterManager()%3B%0A%20%20manager.start()%3B%0A%7D%20else%20%7B%0A%20%20require('.%2Fapp.js')%3B%20%2F%2F%20Your%20Express%20app%0A%7D%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// master.js
const cluster = require('cluster');

class ClusterManager {
  constructor() {
    this.workers = new Map();
    this.isRestarting = false;
  }
  
  start() {
    const numWorkers = require('os').cpus().length;
    
    for (let i = 0; i &lt; numWorkers; i++) {
      this.createWorker();
    }
    
    // Handle graceful restart signal
    process.on('SIGUSR2', () =&gt; {
      this.gracefulRestart();
    });
  }
  
  createWorker() {
    const worker = cluster.fork();
    this.workers.set(worker.id, worker);
    
    worker.on('exit', (code, signal) =&gt; {
      this.workers.delete(worker.id);
      
      if (!worker.exitedAfterDisconnect) {
        console.log(`Worker ${worker.process.pid} crashed, restarting...`);
        this.createWorker();
      }
    });
  }
  
  async gracefulRestart() {
    if (this.isRestarting) return;
    this.isRestarting = true;
    
    console.log('Starting graceful restart...');
    
    const workerIds = Array.from(this.workers.keys());
    
    // Restart workers one by one
    for (const workerId of workerIds) {
      const worker = this.workers.get(workerId);
      
      // Create new worker first
      this.createWorker();
      
      // Wait a bit for new worker to be ready
      await new Promise(resolve =&gt; setTimeout(resolve, 1000));
      
      // Gracefully shutdown old worker
      worker.disconnect();
      
      // Force kill if not exited within timeout
      setTimeout(() =&gt; {
        if (!worker.isDead()) {
          worker.kill();
        }
      }, 5000);
      
      // Wait for worker to exit
      await new Promise(resolve =&gt; {
        worker.on('exit', resolve);
      });
    }
    
    this.isRestarting = false;
    console.log('Graceful restart completed');
  }
}

if (cluster.isMaster) {
  const manager = new ClusterManager();
  manager.start();
} else {
  require('./app.js'); // Your Express app
}
</code></pre>
</div>

<p>---</p>

<p><strong>116. How do you monitor Node.js application performance?</strong></p>

<p><strong>Answer:</strong> Performance monitoring involves tracking various metrics and using appropriate tools.</p>

<p><strong>Built-in Performance Monitoring:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20%7B%20performance%2C%20PerformanceObserver%20%7D%20%3D%20require('perf_hooks')%3B%0A%0A%2F%2F%20Measure%20function%20execution%20time%0Afunction%20measurePerformance(fn%2C%20name)%20%7B%0A%20%20return%20function(...args)%20%7B%0A%20%20%20%20const%20start%20%3D%20performance.now()%3B%0A%20%20%20%20const%20result%20%3D%20fn.apply(this%2C%20args)%3B%0A%20%20%20%20const%20end%20%3D%20performance.now()%3B%0A%20%20%20%20%0A%20%20%20%20console.log(%60%24%7Bname%7D%20took%20%24%7Bend%20-%20start%7D%20milliseconds%60)%3B%0A%20%20%20%20return%20result%3B%0A%20%20%7D%3B%0A%7D%0A%0A%2F%2F%20Usage%0Aconst%20slowFunction%20%3D%20measurePerformance(()%20%3D%3E%20%7B%0A%20%20%2F%2F%20Simulate%20slow%20operation%0A%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%201000000%3B%20i%2B%2B)%20%7B%0A%20%20%20%20Math.random()%3B%0A%20%20%7D%0A%7D%2C%20'slowFunction')%3B%0A%0AslowFunction()%3B%0A%0A%2F%2F%20Performance%20Observer%20for%20detailed%20metrics%0Aconst%20obs%20%3D%20new%20PerformanceObserver((list)%20%3D%3E%20%7B%0A%20%20list.getEntries().forEach((entry)%20%3D%3E%20%7B%0A%20%20%20%20console.log(%60%24%7Bentry.name%7D%3A%20%24%7Bentry.duration%7Dms%60)%3B%0A%20%20%7D)%3B%0A%7D)%3B%0A%0Aobs.observe(%7B%20entryTypes%3A%20%5B'measure'%2C%20'mark'%5D%20%7D)%3B%0A%0A%2F%2F%20Mark%20and%20measure%0Aperformance.mark('start-operation')%3B%0A%2F%2F%20...%20some%20operation%0Aperformance.mark('end-operation')%3B%0Aperformance.measure('operation-duration'%2C%20'start-operation'%2C%20'end-operation')%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const { performance, PerformanceObserver } = require('perf_hooks');

// Measure function execution time
function measurePerformance(fn, name) {
  return function(...args) {
    const start = performance.now();
    const result = fn.apply(this, args);
    const end = performance.now();
    
    console.log(`${name} took ${end - start} milliseconds`);
    return result;
  };
}

// Usage
const slowFunction = measurePerformance(() =&gt; {
  // Simulate slow operation
  for (let i = 0; i &lt; 1000000; i++) {
    Math.random();
  }
}, 'slowFunction');

slowFunction();

// Performance Observer for detailed metrics
const obs = new PerformanceObserver((list) =&gt; {
  list.getEntries().forEach((entry) =&gt; {
    console.log(`${entry.name}: ${entry.duration}ms`);
  });
});

obs.observe({ entryTypes: ['measure', 'mark'] });

// Mark and measure
performance.mark('start-operation');
// ... some operation
performance.mark('end-operation');
performance.measure('operation-duration', 'start-operation', 'end-operation');
</code></pre>
</div>

<p><strong>Memory Usage Monitoring:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="function%20logMemoryUsage()%20%7B%0A%20%20const%20usage%20%3D%20process.memoryUsage()%3B%0A%20%20%0A%20%20console.log(%7B%0A%20%20%20%20rss%3A%20%60%24%7BMath.round(usage.rss%20%2F%201024%20%2F%201024)%7D%20MB%60%2C%20%2F%2F%20Resident%20Set%20Size%0A%20%20%20%20heapTotal%3A%20%60%24%7BMath.round(usage.heapTotal%20%2F%201024%20%2F%201024)%7D%20MB%60%2C%0A%20%20%20%20heapUsed%3A%20%60%24%7BMath.round(usage.heapUsed%20%2F%201024%20%2F%201024)%7D%20MB%60%2C%0A%20%20%20%20external%3A%20%60%24%7BMath.round(usage.external%20%2F%201024%20%2F%201024)%7D%20MB%60%2C%0A%20%20%20%20arrayBuffers%3A%20%60%24%7BMath.round(usage.arrayBuffers%20%2F%201024%20%2F%201024)%7D%20MB%60%0A%20%20%7D)%3B%0A%7D%0A%0A%2F%2F%20Log%20memory%20usage%20every%2010%20seconds%0AsetInterval(logMemoryUsage%2C%2010000)%3B%0A%0A%2F%2F%20Monitor%20for%20memory%20leaks%0Alet%20baseline%20%3D%20process.memoryUsage().heapUsed%3B%0A%0AsetInterval(()%20%3D%3E%20%7B%0A%20%20const%20current%20%3D%20process.memoryUsage().heapUsed%3B%0A%20%20const%20growth%20%3D%20current%20-%20baseline%3B%0A%20%20%0A%20%20if%20(growth%20%3E%2050%20*%201024%20*%201024)%20%7B%20%2F%2F%2050MB%20growth%0A%20%20%20%20console.warn(%60Potential%20memory%20leak%20detected%3A%20%24%7Bgrowth%20%2F%201024%20%2F%201024%7DMB%20growth%60)%3B%0A%20%20%7D%0A%20%20%0A%20%20baseline%20%3D%20current%3B%0A%7D%2C%2060000)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">function logMemoryUsage() {
  const usage = process.memoryUsage();
  
  console.log({
    rss: `${Math.round(usage.rss / 1024 / 1024)} MB`, // Resident Set Size
    heapTotal: `${Math.round(usage.heapTotal / 1024 / 1024)} MB`,
    heapUsed: `${Math.round(usage.heapUsed / 1024 / 1024)} MB`,
    external: `${Math.round(usage.external / 1024 / 1024)} MB`,
    arrayBuffers: `${Math.round(usage.arrayBuffers / 1024 / 1024)} MB`
  });
}

// Log memory usage every 10 seconds
setInterval(logMemoryUsage, 10000);

// Monitor for memory leaks
let baseline = process.memoryUsage().heapUsed;

setInterval(() =&gt; {
  const current = process.memoryUsage().heapUsed;
  const growth = current - baseline;
  
  if (growth &gt; 50 * 1024 * 1024) { // 50MB growth
    console.warn(`Potential memory leak detected: ${growth / 1024 / 1024}MB growth`);
  }
  
  baseline = current;
}, 60000);
</code></pre>
</div>

<p><strong>Event Loop Monitoring:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Monitor%20event%20loop%20lag%0Afunction%20measureEventLoopLag()%20%7B%0A%20%20const%20start%20%3D%20process.hrtime.bigint()%3B%0A%20%20%0A%20%20setImmediate(()%20%3D%3E%20%7B%0A%20%20%20%20const%20lag%20%3D%20Number(process.hrtime.bigint()%20-%20start)%20%2F%201000000%3B%20%2F%2F%20Convert%20to%20ms%0A%20%20%20%20console.log(%60Event%20loop%20lag%3A%20%24%7Blag.toFixed(2)%7Dms%60)%3B%0A%20%20%20%20%0A%20%20%20%20if%20(lag%20%3E%20100)%20%7B%0A%20%20%20%20%20%20console.warn('High%20event%20loop%20lag%20detected!')%3B%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%7D%0A%0AsetInterval(measureEventLoopLag%2C%205000)%3B%0A%0A%2F%2F%20CPU%20usage%20monitoring%0Aconst%20startUsage%20%3D%20process.cpuUsage()%3B%0A%0AsetInterval(()%20%3D%3E%20%7B%0A%20%20const%20currentUsage%20%3D%20process.cpuUsage(startUsage)%3B%0A%20%20const%20userCPU%20%3D%20currentUsage.user%20%2F%201000%3B%20%2F%2F%20Convert%20to%20ms%0A%20%20const%20systemCPU%20%3D%20currentUsage.system%20%2F%201000%3B%0A%20%20%0A%20%20console.log(%60CPU%20Usage%20-%20User%3A%20%24%7BuserCPU%7Dms%2C%20System%3A%20%24%7BsystemCPU%7Dms%60)%3B%0A%7D%2C%2010000)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Monitor event loop lag
function measureEventLoopLag() {
  const start = process.hrtime.bigint();
  
  setImmediate(() =&gt; {
    const lag = Number(process.hrtime.bigint() - start) / 1000000; // Convert to ms
    console.log(`Event loop lag: ${lag.toFixed(2)}ms`);
    
    if (lag &gt; 100) {
      console.warn('High event loop lag detected!');
    }
  });
}

setInterval(measureEventLoopLag, 5000);

// CPU usage monitoring
const startUsage = process.cpuUsage();

setInterval(() =&gt; {
  const currentUsage = process.cpuUsage(startUsage);
  const userCPU = currentUsage.user / 1000; // Convert to ms
  const systemCPU = currentUsage.system / 1000;
  
  console.log(`CPU Usage - User: ${userCPU}ms, System: ${systemCPU}ms`);
}, 10000);
</code></pre>
</div>

<p><strong>Application Performance Monitoring (APM):</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Using%20clinic.js%20for%20performance%20profiling%0A%2F%2F%20Install%3A%20npm%20install%20-g%20clinic%0A%2F%2F%20Usage%3A%20clinic%20doctor%20--%20node%20app.js%0A%0A%2F%2F%20Custom%20metrics%20collection%0Aclass%20MetricsCollector%20%7B%0A%20%20constructor()%20%7B%0A%20%20%20%20this.metrics%20%3D%20%7B%0A%20%20%20%20%20%20requests%3A%200%2C%0A%20%20%20%20%20%20errors%3A%200%2C%0A%20%20%20%20%20%20responseTime%3A%20%5B%5D%2C%0A%20%20%20%20%20%20activeConnections%3A%200%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20%0A%20%20recordRequest(duration)%20%7B%0A%20%20%20%20this.metrics.requests%2B%2B%3B%0A%20%20%20%20this.metrics.responseTime.push(duration)%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Keep%20only%20last%201000%20response%20times%0A%20%20%20%20if%20(this.metrics.responseTime.length%20%3E%201000)%20%7B%0A%20%20%20%20%20%20this.metrics.responseTime.shift()%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%0A%20%20recordError()%20%7B%0A%20%20%20%20this.metrics.errors%2B%2B%3B%0A%20%20%7D%0A%20%20%0A%20%20getStats()%20%7B%0A%20%20%20%20const%20responseTimes%20%3D%20this.metrics.responseTime%3B%0A%20%20%20%20const%20avg%20%3D%20responseTimes.reduce((a%2C%20b)%20%3D%3E%20a%20%2B%20b%2C%200)%20%2F%20responseTimes.length%3B%0A%20%20%20%20const%20sorted%20%3D%20%5B...responseTimes%5D.sort((a%2C%20b)%20%3D%3E%20a%20-%20b)%3B%0A%20%20%20%20const%20p95%20%3D%20sorted%5BMath.floor(sorted.length%20*%200.95)%5D%3B%0A%20%20%20%20%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20totalRequests%3A%20this.metrics.requests%2C%0A%20%20%20%20%20%20totalErrors%3A%20this.metrics.errors%2C%0A%20%20%20%20%20%20errorRate%3A%20(this.metrics.errors%20%2F%20this.metrics.requests%20*%20100).toFixed(2)%20%2B%20'%25'%2C%0A%20%20%20%20%20%20avgResponseTime%3A%20avg.toFixed(2)%20%2B%20'ms'%2C%0A%20%20%20%20%20%20p95ResponseTime%3A%20p95.toFixed(2)%20%2B%20'ms'%2C%0A%20%20%20%20%20%20activeConnections%3A%20this.metrics.activeConnections%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%7D%0A%0Aconst%20metrics%20%3D%20new%20MetricsCollector()%3B%0A%0A%2F%2F%20Express%20middleware%20for%20metrics%0Aapp.use((req%2C%20res%2C%20next)%20%3D%3E%20%7B%0A%20%20const%20start%20%3D%20Date.now()%3B%0A%20%20metrics.metrics.activeConnections%2B%2B%3B%0A%20%20%0A%20%20res.on('finish'%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20const%20duration%20%3D%20Date.now()%20-%20start%3B%0A%20%20%20%20metrics.recordRequest(duration)%3B%0A%20%20%20%20metrics.metrics.activeConnections--%3B%0A%20%20%20%20%0A%20%20%20%20if%20(res.statusCode%20%3E%3D%20400)%20%7B%0A%20%20%20%20%20%20metrics.recordError()%3B%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%20%20%0A%20%20next()%3B%0A%7D)%3B%0A%0A%2F%2F%20Metrics%20endpoint%0Aapp.get('%2Fmetrics'%2C%20(req%2C%20res)%20%3D%3E%20%7B%0A%20%20res.json(metrics.getStats())%3B%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Using clinic.js for performance profiling
// Install: npm install -g clinic
// Usage: clinic doctor -- node app.js

// Custom metrics collection
class MetricsCollector {
  constructor() {
    this.metrics = {
      requests: 0,
      errors: 0,
      responseTime: [],
      activeConnections: 0
    };
  }
  
  recordRequest(duration) {
    this.metrics.requests++;
    this.metrics.responseTime.push(duration);
    
    // Keep only last 1000 response times
    if (this.metrics.responseTime.length &gt; 1000) {
      this.metrics.responseTime.shift();
    }
  }
  
  recordError() {
    this.metrics.errors++;
  }
  
  getStats() {
    const responseTimes = this.metrics.responseTime;
    const avg = responseTimes.reduce((a, b) =&gt; a + b, 0) / responseTimes.length;
    const sorted = [...responseTimes].sort((a, b) =&gt; a - b);
    const p95 = sorted[Math.floor(sorted.length * 0.95)];
    
    return {
      totalRequests: this.metrics.requests,
      totalErrors: this.metrics.errors,
      errorRate: (this.metrics.errors / this.metrics.requests * 100).toFixed(2) + '%',
      avgResponseTime: avg.toFixed(2) + 'ms',
      p95ResponseTime: p95.toFixed(2) + 'ms',
      activeConnections: this.metrics.activeConnections
    };
  }
}

const metrics = new MetricsCollector();

// Express middleware for metrics
app.use((req, res, next) =&gt; {
  const start = Date.now();
  metrics.metrics.activeConnections++;
  
  res.on('finish', () =&gt; {
    const duration = Date.now() - start;
    metrics.recordRequest(duration);
    metrics.metrics.activeConnections--;
    
    if (res.statusCode &gt;= 400) {
      metrics.recordError();
    }
  });
  
  next();
});

// Metrics endpoint
app.get('/metrics', (req, res) =&gt; {
  res.json(metrics.getStats());
});
</code></pre>
</div>

<p>---</p>

<p><strong>117. What are worker threads and when should you use them?</strong></p>

<p><strong>Answer:</strong> Worker threads allow you to run JavaScript in parallel threads, useful for CPU-intensive tasks without blocking the main event loop.</p>

<p><strong>Basic Worker Thread Usage:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20main.js%0Aconst%20%7B%20Worker%2C%20isMainThread%2C%20parentPort%2C%20workerData%20%7D%20%3D%20require('worker_threads')%3B%0A%0Aif%20(isMainThread)%20%7B%0A%20%20%2F%2F%20Main%20thread%0A%20%20console.log('Main%20thread%20starting...')%3B%0A%20%20%0A%20%20const%20worker%20%3D%20new%20Worker(__filename%2C%20%7B%0A%20%20%20%20workerData%3A%20%7B%20numbers%3A%20%5B1%2C%202%2C%203%2C%204%2C%205%5D%20%7D%0A%20%20%7D)%3B%0A%20%20%0A%20%20worker.on('message'%2C%20(result)%20%3D%3E%20%7B%0A%20%20%20%20console.log('Result%20from%20worker%3A'%2C%20result)%3B%0A%20%20%7D)%3B%0A%20%20%0A%20%20worker.on('error'%2C%20(error)%20%3D%3E%20%7B%0A%20%20%20%20console.error('Worker%20error%3A'%2C%20error)%3B%0A%20%20%7D)%3B%0A%20%20%0A%20%20worker.on('exit'%2C%20(code)%20%3D%3E%20%7B%0A%20%20%20%20if%20(code%20!%3D%3D%200)%20%7B%0A%20%20%20%20%20%20console.error(%60Worker%20stopped%20with%20exit%20code%20%24%7Bcode%7D%60)%3B%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%20%20%0A%7D%20else%20%7B%0A%20%20%2F%2F%20Worker%20thread%0A%20%20const%20%7B%20numbers%20%7D%20%3D%20workerData%3B%0A%20%20%0A%20%20%2F%2F%20CPU-intensive%20calculation%0A%20%20const%20result%20%3D%20numbers.map(n%20%3D%3E%20%7B%0A%20%20%20%20let%20sum%20%3D%200%3B%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%201000000%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20sum%20%2B%3D%20Math.sqrt(n%20*%20i)%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20sum%3B%0A%20%20%7D)%3B%0A%20%20%0A%20%20parentPort.postMessage(result)%3B%0A%7D%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// main.js
const { Worker, isMainThread, parentPort, workerData } = require('worker_threads');

if (isMainThread) {
  // Main thread
  console.log('Main thread starting...');
  
  const worker = new Worker(__filename, {
    workerData: { numbers: [1, 2, 3, 4, 5] }
  });
  
  worker.on('message', (result) =&gt; {
    console.log('Result from worker:', result);
  });
  
  worker.on('error', (error) =&gt; {
    console.error('Worker error:', error);
  });
  
  worker.on('exit', (code) =&gt; {
    if (code !== 0) {
      console.error(`Worker stopped with exit code ${code}`);
    }
  });
  
} else {
  // Worker thread
  const { numbers } = workerData;
  
  // CPU-intensive calculation
  const result = numbers.map(n =&gt; {
    let sum = 0;
    for (let i = 0; i &lt; 1000000; i++) {
      sum += Math.sqrt(n * i);
    }
    return sum;
  });
  
  parentPort.postMessage(result);
}
</code></pre>
</div>

<p><strong>Separate Worker File:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20worker.js%0Aconst%20%7B%20parentPort%2C%20workerData%20%7D%20%3D%20require('worker_threads')%3B%0A%0Afunction%20fibonacci(n)%20%7B%0A%20%20if%20(n%20%3C%202)%20return%20n%3B%0A%20%20return%20fibonacci(n%20-%201)%20%2B%20fibonacci(n%20-%202)%3B%0A%7D%0A%0Afunction%20isPrime(n)%20%7B%0A%20%20if%20(n%20%3C%202)%20return%20false%3B%0A%20%20for%20(let%20i%20%3D%202%3B%20i%20%3C%3D%20Math.sqrt(n)%3B%20i%2B%2B)%20%7B%0A%20%20%20%20if%20(n%20%25%20i%20%3D%3D%3D%200)%20return%20false%3B%0A%20%20%7D%0A%20%20return%20true%3B%0A%7D%0A%0AparentPort.on('message'%2C%20(task)%20%3D%3E%20%7B%0A%20%20let%20result%3B%0A%20%20%0A%20%20switch%20(task.type)%20%7B%0A%20%20%20%20case%20'fibonacci'%3A%0A%20%20%20%20%20%20result%20%3D%20fibonacci(task.number)%3B%0A%20%20%20%20%20%20break%3B%0A%20%20%20%20case%20'isPrime'%3A%0A%20%20%20%20%20%20result%20%3D%20isPrime(task.number)%3B%0A%20%20%20%20%20%20break%3B%0A%20%20%20%20case%20'heavyCalculation'%3A%0A%20%20%20%20%20%20result%20%3D%20task.numbers.map(n%20%3D%3E%20n%20*%20n).reduce((a%2C%20b)%20%3D%3E%20a%20%2B%20b%2C%200)%3B%0A%20%20%20%20%20%20break%3B%0A%20%20%20%20default%3A%0A%20%20%20%20%20%20result%20%3D%20%7B%20error%3A%20'Unknown%20task%20type'%20%7D%3B%0A%20%20%7D%0A%20%20%0A%20%20parentPort.postMessage(%7B%20taskId%3A%20task.id%2C%20result%20%7D)%3B%0A%7D)%3B%0A%0A%2F%2F%20main.js%0Aconst%20%7B%20Worker%20%7D%20%3D%20require('worker_threads')%3B%0A%0Aclass%20WorkerPool%20%7B%0A%20%20constructor(workerScript%2C%20poolSize%20%3D%204)%20%7B%0A%20%20%20%20this.workerScript%20%3D%20workerScript%3B%0A%20%20%20%20this.poolSize%20%3D%20poolSize%3B%0A%20%20%20%20this.workers%20%3D%20%5B%5D%3B%0A%20%20%20%20this.queue%20%3D%20%5B%5D%3B%0A%20%20%20%20this.taskId%20%3D%200%3B%0A%20%20%20%20%0A%20%20%20%20this.initializeWorkers()%3B%0A%20%20%7D%0A%20%20%0A%20%20initializeWorkers()%20%7B%0A%20%20%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%20this.poolSize%3B%20i%2B%2B)%20%7B%0A%20%20%20%20%20%20const%20worker%20%3D%20new%20Worker(this.workerScript)%3B%0A%20%20%20%20%20%20worker.isAvailable%20%3D%20true%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20worker.on('message'%2C%20(result)%20%3D%3E%20%7B%0A%20%20%20%20%20%20%20%20worker.isAvailable%20%3D%20true%3B%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Find%20and%20resolve%20the%20corresponding%20promise%0A%20%20%20%20%20%20%20%20const%20task%20%3D%20this.queue.find(t%20%3D%3E%20t.id%20%3D%3D%3D%20result.taskId)%3B%0A%20%20%20%20%20%20%20%20if%20(task)%20%7B%0A%20%20%20%20%20%20%20%20%20%20task.resolve(result.result)%3B%0A%20%20%20%20%20%20%20%20%20%20this.queue%20%3D%20this.queue.filter(t%20%3D%3E%20t.id%20!%3D%3D%20result.taskId)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%2F%2F%20Process%20next%20task%20in%20queue%0A%20%20%20%20%20%20%20%20this.processQueue()%3B%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20this.workers.push(worker)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%0A%20%20execute(taskType%2C%20data)%20%7B%0A%20%20%20%20return%20new%20Promise((resolve%2C%20reject)%20%3D%3E%20%7B%0A%20%20%20%20%20%20const%20task%20%3D%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20%2B%2Bthis.taskId%2C%0A%20%20%20%20%20%20%20%20type%3A%20taskType%2C%0A%20%20%20%20%20%20%20%20...data%2C%0A%20%20%20%20%20%20%20%20resolve%2C%0A%20%20%20%20%20%20%20%20reject%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20this.queue.push(task)%3B%0A%20%20%20%20%20%20this.processQueue()%3B%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%20%20%0A%20%20processQueue()%20%7B%0A%20%20%20%20const%20availableWorker%20%3D%20this.workers.find(w%20%3D%3E%20w.isAvailable)%3B%0A%20%20%20%20const%20pendingTask%20%3D%20this.queue.find(t%20%3D%3E%20!t.assigned)%3B%0A%20%20%20%20%0A%20%20%20%20if%20(availableWorker%20%26%26%20pendingTask)%20%7B%0A%20%20%20%20%20%20availableWorker.isAvailable%20%3D%20false%3B%0A%20%20%20%20%20%20pendingTask.assigned%20%3D%20true%3B%0A%20%20%20%20%20%20%0A%20%20%20%20%20%20availableWorker.postMessage(%7B%0A%20%20%20%20%20%20%20%20id%3A%20pendingTask.id%2C%0A%20%20%20%20%20%20%20%20type%3A%20pendingTask.type%2C%0A%20%20%20%20%20%20%20%20number%3A%20pendingTask.number%2C%0A%20%20%20%20%20%20%20%20numbers%3A%20pendingTask.numbers%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%0A%20%20terminate()%20%7B%0A%20%20%20%20this.workers.forEach(worker%20%3D%3E%20worker.terminate())%3B%0A%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%0Aconst%20pool%20%3D%20new%20WorkerPool('.%2Fworker.js'%2C%204)%3B%0A%0Aasync%20function%20runTasks()%20%7B%0A%20%20try%20%7B%0A%20%20%20%20const%20results%20%3D%20await%20Promise.all(%5B%0A%20%20%20%20%20%20pool.execute('fibonacci'%2C%20%7B%20number%3A%2040%20%7D)%2C%0A%20%20%20%20%20%20pool.execute('isPrime'%2C%20%7B%20number%3A%20982451653%20%7D)%2C%0A%20%20%20%20%20%20pool.execute('heavyCalculation'%2C%20%7B%20numbers%3A%20%5B1%2C%202%2C%203%2C%204%2C%205%5D%20%7D)%0A%20%20%20%20%5D)%3B%0A%20%20%20%20%0A%20%20%20%20console.log('Results%3A'%2C%20results)%3B%0A%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20console.error('Error%3A'%2C%20error)%3B%0A%20%20%7D%20finally%20%7B%0A%20%20%20%20pool.terminate()%3B%0A%20%20%7D%0A%7D%0A%0ArunTasks()%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// worker.js
const { parentPort, workerData } = require('worker_threads');

function fibonacci(n) {
  if (n &lt; 2) return n;
  return fibonacci(n - 1) + fibonacci(n - 2);
}

function isPrime(n) {
  if (n &lt; 2) return false;
  for (let i = 2; i &lt;= Math.sqrt(n); i++) {
    if (n % i === 0) return false;
  }
  return true;
}

parentPort.on('message', (task) =&gt; {
  let result;
  
  switch (task.type) {
    case 'fibonacci':
      result = fibonacci(task.number);
      break;
    case 'isPrime':
      result = isPrime(task.number);
      break;
    case 'heavyCalculation':
      result = task.numbers.map(n =&gt; n * n).reduce((a, b) =&gt; a + b, 0);
      break;
    default:
      result = { error: 'Unknown task type' };
  }
  
  parentPort.postMessage({ taskId: task.id, result });
});

// main.js
const { Worker } = require('worker_threads');

class WorkerPool {
  constructor(workerScript, poolSize = 4) {
    this.workerScript = workerScript;
    this.poolSize = poolSize;
    this.workers = [];
    this.queue = [];
    this.taskId = 0;
    
    this.initializeWorkers();
  }
  
  initializeWorkers() {
    for (let i = 0; i &lt; this.poolSize; i++) {
      const worker = new Worker(this.workerScript);
      worker.isAvailable = true;
      
      worker.on('message', (result) =&gt; {
        worker.isAvailable = true;
        
        // Find and resolve the corresponding promise
        const task = this.queue.find(t =&gt; t.id === result.taskId);
        if (task) {
          task.resolve(result.result);
          this.queue = this.queue.filter(t =&gt; t.id !== result.taskId);
        }
        
        // Process next task in queue
        this.processQueue();
      });
      
      this.workers.push(worker);
    }
  }
  
  execute(taskType, data) {
    return new Promise((resolve, reject) =&gt; {
      const task = {
        id: ++this.taskId,
        type: taskType,
        ...data,
        resolve,
        reject
      };
      
      this.queue.push(task);
      this.processQueue();
    });
  }
  
  processQueue() {
    const availableWorker = this.workers.find(w =&gt; w.isAvailable);
    const pendingTask = this.queue.find(t =&gt; !t.assigned);
    
    if (availableWorker && pendingTask) {
      availableWorker.isAvailable = false;
      pendingTask.assigned = true;
      
      availableWorker.postMessage({
        id: pendingTask.id,
        type: pendingTask.type,
        number: pendingTask.number,
        numbers: pendingTask.numbers
      });
    }
  }
  
  terminate() {
    this.workers.forEach(worker =&gt; worker.terminate());
  }
}

// Usage
const pool = new WorkerPool('./worker.js', 4);

async function runTasks() {
  try {
    const results = await Promise.all([
      pool.execute('fibonacci', { number: 40 }),
      pool.execute('isPrime', { number: 982451653 }),
      pool.execute('heavyCalculation', { numbers: [1, 2, 3, 4, 5] })
    ]);
    
    console.log('Results:', results);
  } catch (error) {
    console.error('Error:', error);
  } finally {
    pool.terminate();
  }
}

runTasks();
</code></pre>
</div>

<p><strong>When to Use Worker Threads:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20%E2%9D%8C%20Don't%20use%20for%20I%2FO%20operations%20(already%20non-blocking)%0A%2F%2F%20fs.readFile%2C%20http%20requests%2C%20database%20queries%0A%0A%2F%2F%20%E2%9C%85%20Use%20for%20CPU-intensive%20tasks%0A%2F%2F%20-%20Image%2Fvideo%20processing%0A%2F%2F%20-%20Cryptographic%20operations%0A%2F%2F%20-%20Mathematical%20calculations%0A%2F%2F%20-%20Data%20parsing%2Ftransformation%0A%0A%2F%2F%20Example%3A%20Image%20processing%0Aconst%20sharp%20%3D%20require('sharp')%3B%0A%0A%2F%2F%20worker-image.js%0Aconst%20%7B%20parentPort%20%7D%20%3D%20require('worker_threads')%3B%0A%0AparentPort.on('message'%2C%20async%20(%7B%20imageBuffer%2C%20operations%20%7D)%20%3D%3E%20%7B%0A%20%20try%20%7B%0A%20%20%20%20let%20pipeline%20%3D%20sharp(imageBuffer)%3B%0A%20%20%20%20%0A%20%20%20%20if%20(operations.resize)%20%7B%0A%20%20%20%20%20%20pipeline%20%3D%20pipeline.resize(operations.resize.width%2C%20operations.resize.height)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20if%20(operations.blur)%20%7B%0A%20%20%20%20%20%20pipeline%20%3D%20pipeline.blur(operations.blur)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20const%20processedBuffer%20%3D%20await%20pipeline.toBuffer()%3B%0A%20%20%20%20parentPort.postMessage(%7B%20success%3A%20true%2C%20buffer%3A%20processedBuffer%20%7D)%3B%0A%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20parentPort.postMessage(%7B%20success%3A%20false%2C%20error%3A%20error.message%20%7D)%3B%0A%20%20%7D%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// ‚ùå Don't use for I/O operations (already non-blocking)
// fs.readFile, http requests, database queries

// ‚úÖ Use for CPU-intensive tasks
// - Image/video processing
// - Cryptographic operations
// - Mathematical calculations
// - Data parsing/transformation

// Example: Image processing
const sharp = require('sharp');

// worker-image.js
const { parentPort } = require('worker_threads');

parentPort.on('message', async ({ imageBuffer, operations }) =&gt; {
  try {
    let pipeline = sharp(imageBuffer);
    
    if (operations.resize) {
      pipeline = pipeline.resize(operations.resize.width, operations.resize.height);
    }
    
    if (operations.blur) {
      pipeline = pipeline.blur(operations.blur);
    }
    
    const processedBuffer = await pipeline.toBuffer();
    parentPort.postMessage({ success: true, buffer: processedBuffer });
  } catch (error) {
    parentPort.postMessage({ success: false, error: error.message });
  }
});
</code></pre>
</div>

<p>---</p>

<p><strong>118. How do you profile Node.js applications?</strong></p>

<p><strong>Answer:</strong> Profiling helps identify performance bottlenecks and optimize application performance.</p>

<p><strong>Built-in V8 Profiler:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Start%20with%20--prof%20flag%0A%2F%2F%20node%20--prof%20app.js%0A%0A%2F%2F%20Generate%20human-readable%20output%0A%2F%2F%20node%20--prof-process%20isolate-0x*.log%20%3E%20profile.txt%0A%0A%2F%2F%20CPU%20profiling%20programmatically%0Aconst%20v8Profiler%20%3D%20require('v8-profiler-next')%3B%0A%0A%2F%2F%20Start%20CPU%20profiling%0Av8Profiler.startProfiling('CPU%20profile')%3B%0A%0A%2F%2F%20Your%20application%20code%20here%0AsetTimeout(()%20%3D%3E%20%7B%0A%20%20%2F%2F%20Stop%20profiling%20and%20get%20result%0A%20%20const%20profile%20%3D%20v8Profiler.stopProfiling('CPU%20profile')%3B%0A%20%20%0A%20%20%2F%2F%20Export%20to%20file%0A%20%20profile.export((error%2C%20result)%20%3D%3E%20%7B%0A%20%20%20%20if%20(error)%20%7B%0A%20%20%20%20%20%20console.error(error)%3B%0A%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20require('fs').writeFileSync('.%2Fcpu-profile.cpuprofile'%2C%20result)%3B%0A%20%20%20%20profile.delete()%3B%0A%20%20%20%20console.log('CPU%20profile%20saved')%3B%0A%20%20%7D)%3B%0A%7D%2C%2010000)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Start with --prof flag
// node --prof app.js

// Generate human-readable output
// node --prof-process isolate-0x*.log &gt; profile.txt

// CPU profiling programmatically
const v8Profiler = require('v8-profiler-next');

// Start CPU profiling
v8Profiler.startProfiling('CPU profile');

// Your application code here
setTimeout(() =&gt; {
  // Stop profiling and get result
  const profile = v8Profiler.stopProfiling('CPU profile');
  
  // Export to file
  profile.export((error, result) =&gt; {
    if (error) {
      console.error(error);
      return;
    }
    
    require('fs').writeFileSync('./cpu-profile.cpuprofile', result);
    profile.delete();
    console.log('CPU profile saved');
  });
}, 10000);
</code></pre>
</div>

<p><strong>Memory Profiling:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Heap%20snapshot%0Aconst%20v8Profiler%20%3D%20require('v8-profiler-next')%3B%0A%0Afunction%20takeHeapSnapshot(name)%20%7B%0A%20%20const%20snapshot%20%3D%20v8Profiler.takeSnapshot(name)%3B%0A%20%20%0A%20%20snapshot.export((error%2C%20result)%20%3D%3E%20%7B%0A%20%20%20%20if%20(error)%20%7B%0A%20%20%20%20%20%20console.error(error)%3B%0A%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20require('fs').writeFileSync(%60.%2F%24%7Bname%7D.heapsnapshot%60%2C%20result)%3B%0A%20%20%20%20snapshot.delete()%3B%0A%20%20%20%20console.log(%60Heap%20snapshot%20%24%7Bname%7D%20saved%60)%3B%0A%20%20%7D)%3B%0A%7D%0A%0A%2F%2F%20Take%20snapshots%20at%20different%20points%0AtakeHeapSnapshot('startup')%3B%0A%0AsetTimeout(()%20%3D%3E%20%7B%0A%20%20takeHeapSnapshot('after-10-seconds')%3B%0A%7D%2C%2010000)%3B%0A%0A%2F%2F%20Monitor%20heap%20usage%0Afunction%20monitorHeap()%20%7B%0A%20%20const%20usage%20%3D%20process.memoryUsage()%3B%0A%20%20const%20heapUsed%20%3D%20Math.round(usage.heapUsed%20%2F%201024%20%2F%201024)%3B%0A%20%20const%20heapTotal%20%3D%20Math.round(usage.heapTotal%20%2F%201024%20%2F%201024)%3B%0A%20%20%0A%20%20console.log(%60Heap%3A%20%24%7BheapUsed%7DMB%20%2F%20%24%7BheapTotal%7DMB%60)%3B%0A%20%20%0A%20%20if%20(heapUsed%20%3E%20100)%20%7B%20%2F%2F%20Alert%20if%20heap%20usage%20%3E%20100MB%0A%20%20%20%20console.warn('High%20memory%20usage%20detected')%3B%0A%20%20%20%20takeHeapSnapshot(%60high-usage-%24%7BDate.now()%7D%60)%3B%0A%20%20%7D%0A%7D%0A%0AsetInterval(monitorHeap%2C%205000)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Heap snapshot
const v8Profiler = require('v8-profiler-next');

function takeHeapSnapshot(name) {
  const snapshot = v8Profiler.takeSnapshot(name);
  
  snapshot.export((error, result) =&gt; {
    if (error) {
      console.error(error);
      return;
    }
    
    require('fs').writeFileSync(`./${name}.heapsnapshot`, result);
    snapshot.delete();
    console.log(`Heap snapshot ${name} saved`);
  });
}

// Take snapshots at different points
takeHeapSnapshot('startup');

setTimeout(() =&gt; {
  takeHeapSnapshot('after-10-seconds');
}, 10000);

// Monitor heap usage
function monitorHeap() {
  const usage = process.memoryUsage();
  const heapUsed = Math.round(usage.heapUsed / 1024 / 1024);
  const heapTotal = Math.round(usage.heapTotal / 1024 / 1024);
  
  console.log(`Heap: ${heapUsed}MB / ${heapTotal}MB`);
  
  if (heapUsed &gt; 100) { // Alert if heap usage &gt; 100MB
    console.warn('High memory usage detected');
    takeHeapSnapshot(`high-usage-${Date.now()}`);
  }
}

setInterval(monitorHeap, 5000);
</code></pre>
</div>

<p><strong>Using Clinic.js:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">shellscript</span>
        <button class="copy-btn" data-code="%23%20Install%20clinic.js%0Anpm%20install%20-g%20clinic%0A%0A%23%20Doctor%20-%20overall%20health%20check%0Aclinic%20doctor%20--%20node%20app.js%0A%0A%23%20Bubbleprof%20-%20async%20operations%0Aclinic%20bubbleprof%20--%20node%20app.js%0A%0A%23%20Flame%20-%20CPU%20profiling%0Aclinic%20flame%20--%20node%20app.js%0A%0A%23%20Heap%20profiler%0Aclinic%20heapprofiler%20--%20node%20app.js%0A">Copy</button>
    </div>
    <pre><code class="language-shellscript"># Install clinic.js
npm install -g clinic

# Doctor - overall health check
clinic doctor -- node app.js

# Bubbleprof - async operations
clinic bubbleprof -- node app.js

# Flame - CPU profiling
clinic flame -- node app.js

# Heap profiler
clinic heapprofiler -- node app.js
</code></pre>
</div>

<p><strong>Custom Performance Profiler:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="class%20PerformanceProfiler%20%7B%0A%20%20constructor()%20%7B%0A%20%20%20%20this.profiles%20%3D%20new%20Map()%3B%0A%20%20%20%20this.activeProfiles%20%3D%20new%20Map()%3B%0A%20%20%7D%0A%20%20%0A%20%20start(name)%20%7B%0A%20%20%20%20this.activeProfiles.set(name%2C%20%7B%0A%20%20%20%20%20%20startTime%3A%20process.hrtime.bigint()%2C%0A%20%20%20%20%20%20startMemory%3A%20process.memoryUsage().heapUsed%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%20%20%0A%20%20end(name)%20%7B%0A%20%20%20%20const%20active%20%3D%20this.activeProfiles.get(name)%3B%0A%20%20%20%20if%20(!active)%20%7B%0A%20%20%20%20%20%20console.warn(%60No%20active%20profile%20found%20for%3A%20%24%7Bname%7D%60)%3B%0A%20%20%20%20%20%20return%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20const%20endTime%20%3D%20process.hrtime.bigint()%3B%0A%20%20%20%20const%20endMemory%20%3D%20process.memoryUsage().heapUsed%3B%0A%20%20%20%20%0A%20%20%20%20const%20duration%20%3D%20Number(endTime%20-%20active.startTime)%20%2F%201000000%3B%20%2F%2F%20Convert%20to%20ms%0A%20%20%20%20const%20memoryDelta%20%3D%20endMemory%20-%20active.startMemory%3B%0A%20%20%20%20%0A%20%20%20%20if%20(!this.profiles.has(name))%20%7B%0A%20%20%20%20%20%20this.profiles.set(name%2C%20%7B%0A%20%20%20%20%20%20%20%20calls%3A%200%2C%0A%20%20%20%20%20%20%20%20totalDuration%3A%200%2C%0A%20%20%20%20%20%20%20%20minDuration%3A%20Infinity%2C%0A%20%20%20%20%20%20%20%20maxDuration%3A%200%2C%0A%20%20%20%20%20%20%20%20totalMemoryDelta%3A%200%0A%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20const%20profile%20%3D%20this.profiles.get(name)%3B%0A%20%20%20%20profile.calls%2B%2B%3B%0A%20%20%20%20profile.totalDuration%20%2B%3D%20duration%3B%0A%20%20%20%20profile.minDuration%20%3D%20Math.min(profile.minDuration%2C%20duration)%3B%0A%20%20%20%20profile.maxDuration%20%3D%20Math.max(profile.maxDuration%2C%20duration)%3B%0A%20%20%20%20profile.totalMemoryDelta%20%2B%3D%20memoryDelta%3B%0A%20%20%20%20%0A%20%20%20%20this.activeProfiles.delete(name)%3B%0A%20%20%20%20%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20duration%2C%0A%20%20%20%20%20%20memoryDelta%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20%0A%20%20getReport()%20%7B%0A%20%20%20%20const%20report%20%3D%20%7B%7D%3B%0A%20%20%20%20%0A%20%20%20%20for%20(const%20%5Bname%2C%20profile%5D%20of%20this.profiles)%20%7B%0A%20%20%20%20%20%20report%5Bname%5D%20%3D%20%7B%0A%20%20%20%20%20%20%20%20calls%3A%20profile.calls%2C%0A%20%20%20%20%20%20%20%20avgDuration%3A%20(profile.totalDuration%20%2F%20profile.calls).toFixed(2)%20%2B%20'ms'%2C%0A%20%20%20%20%20%20%20%20minDuration%3A%20profile.minDuration.toFixed(2)%20%2B%20'ms'%2C%0A%20%20%20%20%20%20%20%20maxDuration%3A%20profile.maxDuration.toFixed(2)%20%2B%20'ms'%2C%0A%20%20%20%20%20%20%20%20totalDuration%3A%20profile.totalDuration.toFixed(2)%20%2B%20'ms'%2C%0A%20%20%20%20%20%20%20%20avgMemoryDelta%3A%20Math.round(profile.totalMemoryDelta%20%2F%20profile.calls%20%2F%201024)%20%2B%20'KB'%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20report%3B%0A%20%20%7D%0A%20%20%0A%20%20reset()%20%7B%0A%20%20%20%20this.profiles.clear()%3B%0A%20%20%20%20this.activeProfiles.clear()%3B%0A%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%0Aconst%20profiler%20%3D%20new%20PerformanceProfiler()%3B%0A%0A%2F%2F%20Profile%20a%20function%0Afunction%20profiledFunction(name%2C%20fn)%20%7B%0A%20%20return%20function(...args)%20%7B%0A%20%20%20%20profiler.start(name)%3B%0A%20%20%20%20const%20result%20%3D%20fn.apply(this%2C%20args)%3B%0A%20%20%20%20profiler.end(name)%3B%0A%20%20%20%20return%20result%3B%0A%20%20%7D%3B%0A%7D%0A%0A%2F%2F%20Profile%20async%20function%0Afunction%20profiledAsyncFunction(name%2C%20fn)%20%7B%0A%20%20return%20async%20function(...args)%20%7B%0A%20%20%20%20profiler.start(name)%3B%0A%20%20%20%20try%20%7B%0A%20%20%20%20%20%20const%20result%20%3D%20await%20fn.apply(this%2C%20args)%3B%0A%20%20%20%20%20%20profiler.end(name)%3B%0A%20%20%20%20%20%20return%20result%3B%0A%20%20%20%20%7D%20catch%20(error)%20%7B%0A%20%20%20%20%20%20profiler.end(name)%3B%0A%20%20%20%20%20%20throw%20error%3B%0A%20%20%20%20%7D%0A%20%20%7D%3B%0A%7D%0A%0A%2F%2F%20Example%20usage%0Aconst%20slowFunction%20%3D%20profiledFunction('slowFunction'%2C%20()%20%3D%3E%20%7B%0A%20%20for%20(let%20i%20%3D%200%3B%20i%20%3C%201000000%3B%20i%2B%2B)%20%7B%0A%20%20%20%20Math.random()%3B%0A%20%20%7D%0A%7D)%3B%0A%0A%2F%2F%20Run%20multiple%20times%0Afor%20(let%20i%20%3D%200%3B%20i%20%3C%2010%3B%20i%2B%2B)%20%7B%0A%20%20slowFunction()%3B%0A%7D%0A%0Aconsole.log(profiler.getReport())%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">class PerformanceProfiler {
  constructor() {
    this.profiles = new Map();
    this.activeProfiles = new Map();
  }
  
  start(name) {
    this.activeProfiles.set(name, {
      startTime: process.hrtime.bigint(),
      startMemory: process.memoryUsage().heapUsed
    });
  }
  
  end(name) {
    const active = this.activeProfiles.get(name);
    if (!active) {
      console.warn(`No active profile found for: ${name}`);
      return;
    }
    
    const endTime = process.hrtime.bigint();
    const endMemory = process.memoryUsage().heapUsed;
    
    const duration = Number(endTime - active.startTime) / 1000000; // Convert to ms
    const memoryDelta = endMemory - active.startMemory;
    
    if (!this.profiles.has(name)) {
      this.profiles.set(name, {
        calls: 0,
        totalDuration: 0,
        minDuration: Infinity,
        maxDuration: 0,
        totalMemoryDelta: 0
      });
    }
    
    const profile = this.profiles.get(name);
    profile.calls++;
    profile.totalDuration += duration;
    profile.minDuration = Math.min(profile.minDuration, duration);
    profile.maxDuration = Math.max(profile.maxDuration, duration);
    profile.totalMemoryDelta += memoryDelta;
    
    this.activeProfiles.delete(name);
    
    return {
      duration,
      memoryDelta
    };
  }
  
  getReport() {
    const report = {};
    
    for (const [name, profile] of this.profiles) {
      report[name] = {
        calls: profile.calls,
        avgDuration: (profile.totalDuration / profile.calls).toFixed(2) + 'ms',
        minDuration: profile.minDuration.toFixed(2) + 'ms',
        maxDuration: profile.maxDuration.toFixed(2) + 'ms',
        totalDuration: profile.totalDuration.toFixed(2) + 'ms',
        avgMemoryDelta: Math.round(profile.totalMemoryDelta / profile.calls / 1024) + 'KB'
      };
    }
    
    return report;
  }
  
  reset() {
    this.profiles.clear();
    this.activeProfiles.clear();
  }
}

// Usage
const profiler = new PerformanceProfiler();

// Profile a function
function profiledFunction(name, fn) {
  return function(...args) {
    profiler.start(name);
    const result = fn.apply(this, args);
    profiler.end(name);
    return result;
  };
}

// Profile async function
function profiledAsyncFunction(name, fn) {
  return async function(...args) {
    profiler.start(name);
    try {
      const result = await fn.apply(this, args);
      profiler.end(name);
      return result;
    } catch (error) {
      profiler.end(name);
      throw error;
    }
  };
}

// Example usage
const slowFunction = profiledFunction('slowFunction', () =&gt; {
  for (let i = 0; i &lt; 1000000; i++) {
    Math.random();
  }
});

// Run multiple times
for (let i = 0; i &lt; 10; i++) {
  slowFunction();
}

console.log(profiler.getReport());
</code></pre>
</div>

<p>---</p>

<p><strong>119. What is memory management in Node.js?</strong></p>

<p><strong>Answer:</strong> Node.js uses V8's garbage collector for automatic memory management, but understanding memory patterns helps prevent leaks.</p>

<p><strong>Memory Structure:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Memory%20usage%20breakdown%0Afunction%20analyzeMemoryUsage()%20%7B%0A%20%20const%20usage%20%3D%20process.memoryUsage()%3B%0A%20%20%0A%20%20return%20%7B%0A%20%20%20%20%2F%2F%20Resident%20Set%20Size%20-%20total%20memory%20allocated%0A%20%20%20%20rss%3A%20%60%24%7BMath.round(usage.rss%20%2F%201024%20%2F%201024)%7D%20MB%60%2C%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20V8%20heap%20total%20allocated%0A%20%20%20%20heapTotal%3A%20%60%24%7BMath.round(usage.heapTotal%20%2F%201024%20%2F%201024)%7D%20MB%60%2C%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20V8%20heap%20actually%20used%0A%20%20%20%20heapUsed%3A%20%60%24%7BMath.round(usage.heapUsed%20%2F%201024%20%2F%201024)%7D%20MB%60%2C%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Memory%20used%20by%20C%2B%2B%20objects%20bound%20to%20JS%20objects%0A%20%20%20%20external%3A%20%60%24%7BMath.round(usage.external%20%2F%201024%20%2F%201024)%7D%20MB%60%2C%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Memory%20used%20by%20ArrayBuffer%20and%20SharedArrayBuffer%0A%20%20%20%20arrayBuffers%3A%20%60%24%7BMath.round(usage.arrayBuffers%20%2F%201024%20%2F%201024)%7D%20MB%60%0A%20%20%7D%3B%0A%7D%0A%0Aconsole.log(analyzeMemoryUsage())%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Memory usage breakdown
function analyzeMemoryUsage() {
  const usage = process.memoryUsage();
  
  return {
    // Resident Set Size - total memory allocated
    rss: `${Math.round(usage.rss / 1024 / 1024)} MB`,
    
    // V8 heap total allocated
    heapTotal: `${Math.round(usage.heapTotal / 1024 / 1024)} MB`,
    
    // V8 heap actually used
    heapUsed: `${Math.round(usage.heapUsed / 1024 / 1024)} MB`,
    
    // Memory used by C++ objects bound to JS objects
    external: `${Math.round(usage.external / 1024 / 1024)} MB`,
    
    // Memory used by ArrayBuffer and SharedArrayBuffer
    arrayBuffers: `${Math.round(usage.arrayBuffers / 1024 / 1024)} MB`
  };
}

console.log(analyzeMemoryUsage());
</code></pre>
</div>

<p><strong>Common Memory Leaks:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20%E2%9D%8C%20Memory%20Leak%3A%20Global%20variables%0Aglobal.cache%20%3D%20%7B%7D%3B%20%2F%2F%20Never%20cleaned%20up%0A%0Afunction%20addToCache(key%2C%20value)%20%7B%0A%20%20global.cache%5Bkey%5D%20%3D%20value%3B%20%2F%2F%20Grows%20indefinitely%0A%7D%0A%0A%2F%2F%20%E2%9C%85%20Better%3A%20Use%20Map%20with%20size%20limit%0Aclass%20LimitedCache%20%7B%0A%20%20constructor(maxSize%20%3D%201000)%20%7B%0A%20%20%20%20this.cache%20%3D%20new%20Map()%3B%0A%20%20%20%20this.maxSize%20%3D%20maxSize%3B%0A%20%20%7D%0A%20%20%0A%20%20set(key%2C%20value)%20%7B%0A%20%20%20%20if%20(this.cache.size%20%3E%3D%20this.maxSize)%20%7B%0A%20%20%20%20%20%20const%20firstKey%20%3D%20this.cache.keys().next().value%3B%0A%20%20%20%20%20%20this.cache.delete(firstKey)%3B%0A%20%20%20%20%7D%0A%20%20%20%20this.cache.set(key%2C%20value)%3B%0A%20%20%7D%0A%20%20%0A%20%20get(key)%20%7B%0A%20%20%20%20return%20this.cache.get(key)%3B%0A%20%20%7D%0A%7D%0A%0A%2F%2F%20%E2%9D%8C%20Memory%20Leak%3A%20Event%20listeners%20not%20removed%0Aconst%20EventEmitter%20%3D%20require('events')%3B%0Aconst%20emitter%20%3D%20new%20EventEmitter()%3B%0A%0Afunction%20createHandler()%20%7B%0A%20%20const%20data%20%3D%20new%20Array(1000000).fill('data')%3B%20%2F%2F%20Large%20object%0A%20%20%0A%20%20const%20handler%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20console.log('Event%20handled')%3B%0A%20%20%20%20%2F%2F%20'data'%20is%20captured%20in%20closure%0A%20%20%7D%3B%0A%20%20%0A%20%20emitter.on('event'%2C%20handler)%3B%0A%20%20%2F%2F%20Handler%20is%20never%20removed%2C%20'data'%20never%20garbage%20collected%0A%7D%0A%0A%2F%2F%20%E2%9C%85%20Better%3A%20Remove%20listeners%0Afunction%20createHandlerCorrect()%20%7B%0A%20%20const%20data%20%3D%20new%20Array(1000000).fill('data')%3B%0A%20%20%0A%20%20const%20handler%20%3D%20()%20%3D%3E%20%7B%0A%20%20%20%20console.log('Event%20handled')%3B%0A%20%20%7D%3B%0A%20%20%0A%20%20emitter.on('event'%2C%20handler)%3B%0A%20%20%0A%20%20%2F%2F%20Remove%20listener%20when%20done%0A%20%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20emitter.removeListener('event'%2C%20handler)%3B%0A%20%20%7D%2C%2010000)%3B%0A%7D%0A%0A%2F%2F%20%E2%9D%8C%20Memory%20Leak%3A%20Timers%20not%20cleared%0Afunction%20createTimer()%20%7B%0A%20%20const%20data%20%3D%20new%20Array(1000000).fill('data')%3B%0A%20%20%0A%20%20setInterval(()%20%3D%3E%20%7B%0A%20%20%20%20console.log('Timer%20tick')%3B%0A%20%20%20%20%2F%2F%20'data'%20is%20captured%20in%20closure%0A%20%20%7D%2C%201000)%3B%0A%20%20%2F%2F%20Timer%20never%20cleared%0A%7D%0A%0A%2F%2F%20%E2%9C%85%20Better%3A%20Clear%20timers%0Afunction%20createTimerCorrect()%20%7B%0A%20%20const%20data%20%3D%20new%20Array(1000000).fill('data')%3B%0A%20%20%0A%20%20const%20timer%20%3D%20setInterval(()%20%3D%3E%20%7B%0A%20%20%20%20console.log('Timer%20tick')%3B%0A%20%20%7D%2C%201000)%3B%0A%20%20%0A%20%20%2F%2F%20Clear%20timer%20when%20done%0A%20%20setTimeout(()%20%3D%3E%20%7B%0A%20%20%20%20clearInterval(timer)%3B%0A%20%20%7D%2C%2010000)%3B%0A%7D%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// ‚ùå Memory Leak: Global variables
global.cache = {}; // Never cleaned up

function addToCache(key, value) {
  global.cache[key] = value; // Grows indefinitely
}

// ‚úÖ Better: Use Map with size limit
class LimitedCache {
  constructor(maxSize = 1000) {
    this.cache = new Map();
    this.maxSize = maxSize;
  }
  
  set(key, value) {
    if (this.cache.size &gt;= this.maxSize) {
      const firstKey = this.cache.keys().next().value;
      this.cache.delete(firstKey);
    }
    this.cache.set(key, value);
  }
  
  get(key) {
    return this.cache.get(key);
  }
}

// ‚ùå Memory Leak: Event listeners not removed
const EventEmitter = require('events');
const emitter = new EventEmitter();

function createHandler() {
  const data = new Array(1000000).fill('data'); // Large object
  
  const handler = () =&gt; {
    console.log('Event handled');
    // 'data' is captured in closure
  };
  
  emitter.on('event', handler);
  // Handler is never removed, 'data' never garbage collected
}

// ‚úÖ Better: Remove listeners
function createHandlerCorrect() {
  const data = new Array(1000000).fill('data');
  
  const handler = () =&gt; {
    console.log('Event handled');
  };
  
  emitter.on('event', handler);
  
  // Remove listener when done
  setTimeout(() =&gt; {
    emitter.removeListener('event', handler);
  }, 10000);
}

// ‚ùå Memory Leak: Timers not cleared
function createTimer() {
  const data = new Array(1000000).fill('data');
  
  setInterval(() =&gt; {
    console.log('Timer tick');
    // 'data' is captured in closure
  }, 1000);
  // Timer never cleared
}

// ‚úÖ Better: Clear timers
function createTimerCorrect() {
  const data = new Array(1000000).fill('data');
  
  const timer = setInterval(() =&gt; {
    console.log('Timer tick');
  }, 1000);
  
  // Clear timer when done
  setTimeout(() =&gt; {
    clearInterval(timer);
  }, 10000);
}
</code></pre>
</div>

<p><strong>Memory Leak Detection:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="class%20MemoryLeakDetector%20%7B%0A%20%20constructor()%20%7B%0A%20%20%20%20this.baseline%20%3D%20null%3B%0A%20%20%20%20this.samples%20%3D%20%5B%5D%3B%0A%20%20%20%20this.isMonitoring%20%3D%20false%3B%0A%20%20%7D%0A%20%20%0A%20%20start()%20%7B%0A%20%20%20%20if%20(this.isMonitoring)%20return%3B%0A%20%20%20%20%0A%20%20%20%20this.isMonitoring%20%3D%20true%3B%0A%20%20%20%20this.baseline%20%3D%20process.memoryUsage().heapUsed%3B%0A%20%20%20%20%0A%20%20%20%20this.interval%20%3D%20setInterval(()%20%3D%3E%20%7B%0A%20%20%20%20%20%20this.takeSample()%3B%0A%20%20%20%20%7D%2C%205000)%3B%0A%20%20%20%20%0A%20%20%20%20console.log('Memory%20leak%20detection%20started')%3B%0A%20%20%7D%0A%20%20%0A%20%20stop()%20%7B%0A%20%20%20%20if%20(!this.isMonitoring)%20return%3B%0A%20%20%20%20%0A%20%20%20%20clearInterval(this.interval)%3B%0A%20%20%20%20this.isMonitoring%20%3D%20false%3B%0A%20%20%20%20%0A%20%20%20%20console.log('Memory%20leak%20detection%20stopped')%3B%0A%20%20%20%20this.generateReport()%3B%0A%20%20%7D%0A%20%20%0A%20%20takeSample()%20%7B%0A%20%20%20%20const%20current%20%3D%20process.memoryUsage().heapUsed%3B%0A%20%20%20%20const%20growth%20%3D%20current%20-%20this.baseline%3B%0A%20%20%20%20%0A%20%20%20%20this.samples.push(%7B%0A%20%20%20%20%20%20timestamp%3A%20Date.now()%2C%0A%20%20%20%20%20%20heapUsed%3A%20current%2C%0A%20%20%20%20%20%20growth%3A%20growth%0A%20%20%20%20%7D)%3B%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Keep%20only%20last%20100%20samples%0A%20%20%20%20if%20(this.samples.length%20%3E%20100)%20%7B%0A%20%20%20%20%20%20this.samples.shift()%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Alert%20on%20significant%20growth%0A%20%20%20%20if%20(growth%20%3E%2050%20*%201024%20*%201024)%20%7B%20%2F%2F%2050MB%0A%20%20%20%20%20%20console.warn(%60Potential%20memory%20leak%3A%20%24%7BMath.round(growth%20%2F%201024%20%2F%201024)%7DMB%20growth%60)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%20%20%0A%20%20generateReport()%20%7B%0A%20%20%20%20if%20(this.samples.length%20%3C%202)%20return%3B%0A%20%20%20%20%0A%20%20%20%20const%20first%20%3D%20this.samples%5B0%5D%3B%0A%20%20%20%20const%20last%20%3D%20this.samples%5Bthis.samples.length%20-%201%5D%3B%0A%20%20%20%20const%20totalGrowth%20%3D%20last.heapUsed%20-%20first.heapUsed%3B%0A%20%20%20%20const%20timeSpan%20%3D%20last.timestamp%20-%20first.timestamp%3B%0A%20%20%20%20const%20growthRate%20%3D%20totalGrowth%20%2F%20(timeSpan%20%2F%201000)%3B%20%2F%2F%20bytes%20per%20second%0A%20%20%20%20%0A%20%20%20%20console.log('Memory%20Leak%20Detection%20Report%3A')%3B%0A%20%20%20%20console.log(%60Total%20growth%3A%20%24%7BMath.round(totalGrowth%20%2F%201024%20%2F%201024)%7DMB%60)%3B%0A%20%20%20%20console.log(%60Time%20span%3A%20%24%7BMath.round(timeSpan%20%2F%201000)%7Ds%60)%3B%0A%20%20%20%20console.log(%60Growth%20rate%3A%20%24%7BMath.round(growthRate%20%2F%201024)%7DKB%2Fs%60)%3B%0A%20%20%20%20%0A%20%20%20%20if%20(growthRate%20%3E%201024)%20%7B%20%2F%2F%201KB%2Fs%0A%20%20%20%20%20%20console.warn('Potential%20memory%20leak%20detected!')%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%0Aconst%20detector%20%3D%20new%20MemoryLeakDetector()%3B%0Adetector.start()%3B%0A%0A%2F%2F%20Stop%20detection%20after%2060%20seconds%0AsetTimeout(()%20%3D%3E%20%7B%0A%20%20detector.stop()%3B%0A%7D%2C%2060000)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">class MemoryLeakDetector {
  constructor() {
    this.baseline = null;
    this.samples = [];
    this.isMonitoring = false;
  }
  
  start() {
    if (this.isMonitoring) return;
    
    this.isMonitoring = true;
    this.baseline = process.memoryUsage().heapUsed;
    
    this.interval = setInterval(() =&gt; {
      this.takeSample();
    }, 5000);
    
    console.log('Memory leak detection started');
  }
  
  stop() {
    if (!this.isMonitoring) return;
    
    clearInterval(this.interval);
    this.isMonitoring = false;
    
    console.log('Memory leak detection stopped');
    this.generateReport();
  }
  
  takeSample() {
    const current = process.memoryUsage().heapUsed;
    const growth = current - this.baseline;
    
    this.samples.push({
      timestamp: Date.now(),
      heapUsed: current,
      growth: growth
    });
    
    // Keep only last 100 samples
    if (this.samples.length &gt; 100) {
      this.samples.shift();
    }
    
    // Alert on significant growth
    if (growth &gt; 50 * 1024 * 1024) { // 50MB
      console.warn(`Potential memory leak: ${Math.round(growth / 1024 / 1024)}MB growth`);
    }
  }
  
  generateReport() {
    if (this.samples.length &lt; 2) return;
    
    const first = this.samples[0];
    const last = this.samples[this.samples.length - 1];
    const totalGrowth = last.heapUsed - first.heapUsed;
    const timeSpan = last.timestamp - first.timestamp;
    const growthRate = totalGrowth / (timeSpan / 1000); // bytes per second
    
    console.log('Memory Leak Detection Report:');
    console.log(`Total growth: ${Math.round(totalGrowth / 1024 / 1024)}MB`);
    console.log(`Time span: ${Math.round(timeSpan / 1000)}s`);
    console.log(`Growth rate: ${Math.round(growthRate / 1024)}KB/s`);
    
    if (growthRate &gt; 1024) { // 1KB/s
      console.warn('Potential memory leak detected!');
    }
  }
}

// Usage
const detector = new MemoryLeakDetector();
detector.start();

// Stop detection after 60 seconds
setTimeout(() =&gt; {
  detector.stop();
}, 60000);
</code></pre>
</div>

<p><strong>Garbage Collection Monitoring:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Enable%20GC%20events%20(requires%20--expose-gc%20flag)%0Aif%20(global.gc)%20%7B%0A%20%20const%20v8%20%3D%20require('v8')%3B%0A%20%20%0A%20%20%2F%2F%20Force%20garbage%20collection%0A%20%20function%20forceGC()%20%7B%0A%20%20%20%20const%20before%20%3D%20process.memoryUsage().heapUsed%3B%0A%20%20%20%20global.gc()%3B%0A%20%20%20%20const%20after%20%3D%20process.memoryUsage().heapUsed%3B%0A%20%20%20%20const%20freed%20%3D%20before%20-%20after%3B%0A%20%20%20%20%0A%20%20%20%20console.log(%60GC%20freed%20%24%7BMath.round(freed%20%2F%201024%20%2F%201024)%7DMB%60)%3B%0A%20%20%7D%0A%20%20%0A%20%20%2F%2F%20Monitor%20GC%20statistics%0A%20%20function%20getGCStats()%20%7B%0A%20%20%20%20const%20stats%20%3D%20v8.getHeapStatistics()%3B%0A%20%20%20%20%0A%20%20%20%20return%20%7B%0A%20%20%20%20%20%20totalHeapSize%3A%20Math.round(stats.total_heap_size%20%2F%201024%20%2F%201024)%20%2B%20'MB'%2C%0A%20%20%20%20%20%20usedHeapSize%3A%20Math.round(stats.used_heap_size%20%2F%201024%20%2F%201024)%20%2B%20'MB'%2C%0A%20%20%20%20%20%20heapSizeLimit%3A%20Math.round(stats.heap_size_limit%20%2F%201024%20%2F%201024)%20%2B%20'MB'%2C%0A%20%20%20%20%20%20mallocedMemory%3A%20Math.round(stats.malloced_memory%20%2F%201024%20%2F%201024)%20%2B%20'MB'%0A%20%20%20%20%7D%3B%0A%20%20%7D%0A%20%20%0A%20%20setInterval(()%20%3D%3E%20%7B%0A%20%20%20%20console.log('GC%20Stats%3A'%2C%20getGCStats())%3B%0A%20%20%7D%2C%2010000)%3B%0A%7D%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Enable GC events (requires --expose-gc flag)
if (global.gc) {
  const v8 = require('v8');
  
  // Force garbage collection
  function forceGC() {
    const before = process.memoryUsage().heapUsed;
    global.gc();
    const after = process.memoryUsage().heapUsed;
    const freed = before - after;
    
    console.log(`GC freed ${Math.round(freed / 1024 / 1024)}MB`);
  }
  
  // Monitor GC statistics
  function getGCStats() {
    const stats = v8.getHeapStatistics();
    
    return {
      totalHeapSize: Math.round(stats.total_heap_size / 1024 / 1024) + 'MB',
      usedHeapSize: Math.round(stats.used_heap_size / 1024 / 1024) + 'MB',
      heapSizeLimit: Math.round(stats.heap_size_limit / 1024 / 1024) + 'MB',
      mallocedMemory: Math.round(stats.malloced_memory / 1024 / 1024) + 'MB'
    };
  }
  
  setInterval(() =&gt; {
    console.log('GC Stats:', getGCStats());
  }, 10000);
}
</code></pre>
</div>

<p>---</p>

<p><strong>120. How do you optimize Node.js application performance?</strong></p>

<p><strong>Answer:</strong> Performance optimization involves multiple strategies across different layers of the application.</p>

<p><strong>1. Code-Level Optimizations:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20%E2%9D%8C%20Inefficient%3A%20Synchronous%20operations%0Aconst%20fs%20%3D%20require('fs')%3B%0Aconst%20data%20%3D%20fs.readFileSync('large-file.txt')%3B%20%2F%2F%20Blocks%20event%20loop%0A%0A%2F%2F%20%E2%9C%85%20Efficient%3A%20Asynchronous%20operations%0Afs.readFile('large-file.txt'%2C%20(err%2C%20data)%20%3D%3E%20%7B%0A%20%20%2F%2F%20Non-blocking%0A%7D)%3B%0A%0A%2F%2F%20%E2%9D%8C%20Inefficient%3A%20Blocking%20CPU-intensive%20tasks%0Afunction%20fibonacci(n)%20%7B%0A%20%20if%20(n%20%3C%202)%20return%20n%3B%0A%20%20return%20fibonacci(n%20-%201)%20%2B%20fibonacci(n%20-%202)%3B%0A%7D%0A%0Aapp.get('%2Ffib%2F%3An'%2C%20(req%2C%20res)%20%3D%3E%20%7B%0A%20%20const%20result%20%3D%20fibonacci(parseInt(req.params.n))%3B%20%2F%2F%20Blocks!%0A%20%20res.json(%7B%20result%20%7D)%3B%0A%7D)%3B%0A%0A%2F%2F%20%E2%9C%85%20Efficient%3A%20Use%20worker%20threads%20for%20CPU-intensive%20tasks%0Aconst%20%7B%20Worker%20%7D%20%3D%20require('worker_threads')%3B%0A%0Aapp.get('%2Ffib%2F%3An'%2C%20async%20(req%2C%20res)%20%3D%3E%20%7B%0A%20%20const%20worker%20%3D%20new%20Worker('.%2Ffibonacci-worker.js'%2C%20%7B%0A%20%20%20%20workerData%3A%20%7B%20n%3A%20parseInt(req.params.n)%20%7D%0A%20%20%7D)%3B%0A%20%20%0A%20%20worker.on('message'%2C%20(result)%20%3D%3E%20%7B%0A%20%20%20%20res.json(%7B%20result%20%7D)%3B%0A%20%20%20%20worker.terminate()%3B%0A%20%20%7D)%3B%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// ‚ùå Inefficient: Synchronous operations
const fs = require('fs');
const data = fs.readFileSync('large-file.txt'); // Blocks event loop

// ‚úÖ Efficient: Asynchronous operations
fs.readFile('large-file.txt', (err, data) =&gt; {
  // Non-blocking
});

// ‚ùå Inefficient: Blocking CPU-intensive tasks
function fibonacci(n) {
  if (n &lt; 2) return n;
  return fibonacci(n - 1) + fibonacci(n - 2);
}

app.get('/fib/:n', (req, res) =&gt; {
  const result = fibonacci(parseInt(req.params.n)); // Blocks!
  res.json({ result });
});

// ‚úÖ Efficient: Use worker threads for CPU-intensive tasks
const { Worker } = require('worker_threads');

app.get('/fib/:n', async (req, res) =&gt; {
  const worker = new Worker('./fibonacci-worker.js', {
    workerData: { n: parseInt(req.params.n) }
  });
  
  worker.on('message', (result) =&gt; {
    res.json({ result });
    worker.terminate();
  });
});
</code></pre>
</div>

<p><strong>2. Memory Optimizations:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20%E2%9D%8C%20Memory%20inefficient%3A%20Loading%20large%20files%20entirely%0Aapp.get('%2Fdownload'%2C%20(req%2C%20res)%20%3D%3E%20%7B%0A%20%20fs.readFile('large-video.mp4'%2C%20(err%2C%20data)%20%3D%3E%20%7B%0A%20%20%20%20res.send(data)%3B%20%2F%2F%20Loads%20entire%20file%20into%20memory%0A%20%20%7D)%3B%0A%7D)%3B%0A%0A%2F%2F%20%E2%9C%85%20Memory%20efficient%3A%20Streaming%0Aapp.get('%2Fdownload'%2C%20(req%2C%20res)%20%3D%3E%20%7B%0A%20%20const%20stream%20%3D%20fs.createReadStream('large-video.mp4')%3B%0A%20%20stream.pipe(res)%3B%20%2F%2F%20Streams%20in%20chunks%0A%7D)%3B%0A%0A%2F%2F%20Object%20pooling%20for%20frequently%20created%20objects%0Aclass%20ObjectPool%20%7B%0A%20%20constructor(createFn%2C%20resetFn%2C%20maxSize%20%3D%20100)%20%7B%0A%20%20%20%20this.createFn%20%3D%20createFn%3B%0A%20%20%20%20this.resetFn%20%3D%20resetFn%3B%0A%20%20%20%20this.pool%20%3D%20%5B%5D%3B%0A%20%20%20%20this.maxSize%20%3D%20maxSize%3B%0A%20%20%7D%0A%20%20%0A%20%20acquire()%20%7B%0A%20%20%20%20if%20(this.pool.length%20%3E%200)%20%7B%0A%20%20%20%20%20%20return%20this.pool.pop()%3B%0A%20%20%20%20%7D%0A%20%20%20%20return%20this.createFn()%3B%0A%20%20%7D%0A%20%20%0A%20%20release(obj)%20%7B%0A%20%20%20%20if%20(this.pool.length%20%3C%20this.maxSize)%20%7B%0A%20%20%20%20%20%20this.resetFn(obj)%3B%0A%20%20%20%20%20%20this.pool.push(obj)%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%7D%0A%0A%2F%2F%20Usage%20for%20database%20connections%0Aconst%20connectionPool%20%3D%20new%20ObjectPool(%0A%20%20()%20%3D%3E%20createDatabaseConnection()%2C%0A%20%20(conn)%20%3D%3E%20conn.reset()%2C%0A%20%2010%0A)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// ‚ùå Memory inefficient: Loading large files entirely
app.get('/download', (req, res) =&gt; {
  fs.readFile('large-video.mp4', (err, data) =&gt; {
    res.send(data); // Loads entire file into memory
  });
});

// ‚úÖ Memory efficient: Streaming
app.get('/download', (req, res) =&gt; {
  const stream = fs.createReadStream('large-video.mp4');
  stream.pipe(res); // Streams in chunks
});

// Object pooling for frequently created objects
class ObjectPool {
  constructor(createFn, resetFn, maxSize = 100) {
    this.createFn = createFn;
    this.resetFn = resetFn;
    this.pool = [];
    this.maxSize = maxSize;
  }
  
  acquire() {
    if (this.pool.length &gt; 0) {
      return this.pool.pop();
    }
    return this.createFn();
  }
  
  release(obj) {
    if (this.pool.length &lt; this.maxSize) {
      this.resetFn(obj);
      this.pool.push(obj);
    }
  }
}

// Usage for database connections
const connectionPool = new ObjectPool(
  () =&gt; createDatabaseConnection(),
  (conn) =&gt; conn.reset(),
  10
);
</code></pre>
</div>

<p><strong>3. Caching Strategies:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20In-memory%20caching%20with%20TTL%0Aclass%20TTLCache%20%7B%0A%20%20constructor(ttl%20%3D%20300000)%20%7B%20%2F%2F%205%20minutes%20default%0A%20%20%20%20this.cache%20%3D%20new%20Map()%3B%0A%20%20%20%20this.ttl%20%3D%20ttl%3B%0A%20%20%7D%0A%20%20%0A%20%20set(key%2C%20value)%20%7B%0A%20%20%20%20this.cache.set(key%2C%20%7B%0A%20%20%20%20%20%20value%2C%0A%20%20%20%20%20%20expires%3A%20Date.now()%20%2B%20this.ttl%0A%20%20%20%20%7D)%3B%0A%20%20%7D%0A%20%20%0A%20%20get(key)%20%7B%0A%20%20%20%20const%20item%20%3D%20this.cache.get(key)%3B%0A%20%20%20%20if%20(!item)%20return%20null%3B%0A%20%20%20%20%0A%20%20%20%20if%20(Date.now()%20%3E%20item.expires)%20%7B%0A%20%20%20%20%20%20this.cache.delete(key)%3B%0A%20%20%20%20%20%20return%20null%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20return%20item.value%3B%0A%20%20%7D%0A%20%20%0A%20%20clear()%20%7B%0A%20%20%20%20this.cache.clear()%3B%0A%20%20%7D%0A%7D%0A%0Aconst%20cache%20%3D%20new%20TTLCache(600000)%3B%20%2F%2F%2010%20minutes%0A%0A%2F%2F%20Caching%20middleware%0Afunction%20cacheMiddleware(duration%20%3D%20300000)%20%7B%0A%20%20return%20(req%2C%20res%2C%20next)%20%3D%3E%20%7B%0A%20%20%20%20const%20key%20%3D%20req.originalUrl%3B%0A%20%20%20%20const%20cached%20%3D%20cache.get(key)%3B%0A%20%20%20%20%0A%20%20%20%20if%20(cached)%20%7B%0A%20%20%20%20%20%20return%20res.json(cached)%3B%0A%20%20%20%20%7D%0A%20%20%20%20%0A%20%20%20%20%2F%2F%20Override%20res.json%20to%20cache%20response%0A%20%20%20%20const%20originalJson%20%3D%20res.json%3B%0A%20%20%20%20res.json%20%3D%20function(data)%20%7B%0A%20%20%20%20%20%20cache.set(key%2C%20data)%3B%0A%20%20%20%20%20%20originalJson.call(this%2C%20data)%3B%0A%20%20%20%20%7D%3B%0A%20%20%20%20%0A%20%20%20%20next()%3B%0A%20%20%7D%3B%0A%7D%0A%0Aapp.get('%2Fapi%2Fdata'%2C%20cacheMiddleware(600000)%2C%20(req%2C%20res)%20%3D%3E%20%7B%0A%20%20%2F%2F%20Expensive%20operation%0A%20%20const%20data%20%3D%20performExpensiveOperation()%3B%0A%20%20res.json(data)%3B%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// In-memory caching with TTL
class TTLCache {
  constructor(ttl = 300000) { // 5 minutes default
    this.cache = new Map();
    this.ttl = ttl;
  }
  
  set(key, value) {
    this.cache.set(key, {
      value,
      expires: Date.now() + this.ttl
    });
  }
  
  get(key) {
    const item = this.cache.get(key);
    if (!item) return null;
    
    if (Date.now() &gt; item.expires) {
      this.cache.delete(key);
      return null;
    }
    
    return item.value;
  }
  
  clear() {
    this.cache.clear();
  }
}

const cache = new TTLCache(600000); // 10 minutes

// Caching middleware
function cacheMiddleware(duration = 300000) {
  return (req, res, next) =&gt; {
    const key = req.originalUrl;
    const cached = cache.get(key);
    
    if (cached) {
      return res.json(cached);
    }
    
    // Override res.json to cache response
    const originalJson = res.json;
    res.json = function(data) {
      cache.set(key, data);
      originalJson.call(this, data);
    };
    
    next();
  };
}

app.get('/api/data', cacheMiddleware(600000), (req, res) =&gt; {
  // Expensive operation
  const data = performExpensiveOperation();
  res.json(data);
});
</code></pre>
</div>

<p><strong>4. Database Optimizations:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Connection%20pooling%0Aconst%20mysql%20%3D%20require('mysql2')%3B%0A%0Aconst%20pool%20%3D%20mysql.createPool(%7B%0A%20%20host%3A%20'localhost'%2C%0A%20%20user%3A%20'user'%2C%0A%20%20password%3A%20'password'%2C%0A%20%20database%3A%20'mydb'%2C%0A%20%20connectionLimit%3A%2010%2C%0A%20%20queueLimit%3A%200%2C%0A%20%20acquireTimeout%3A%2060000%2C%0A%20%20timeout%3A%2060000%0A%7D)%3B%0A%0A%2F%2F%20Prepared%20statements%0Aconst%20promisePool%20%3D%20pool.promise()%3B%0A%0Aasync%20function%20getUserById(id)%20%7B%0A%20%20const%20%5Brows%5D%20%3D%20await%20promisePool.execute(%0A%20%20%20%20'SELECT%20*%20FROM%20users%20WHERE%20id%20%3D%20%3F'%2C%0A%20%20%20%20%5Bid%5D%0A%20%20)%3B%0A%20%20return%20rows%5B0%5D%3B%0A%7D%0A%0A%2F%2F%20Batch%20operations%0Aasync%20function%20insertMultipleUsers(users)%20%7B%0A%20%20const%20values%20%3D%20users.map(user%20%3D%3E%20%5Buser.name%2C%20user.email%5D)%3B%0A%20%20%0A%20%20await%20promisePool.execute(%0A%20%20%20%20'INSERT%20INTO%20users%20(name%2C%20email)%20VALUES%20%3F'%2C%0A%20%20%20%20%5Bvalues%5D%0A%20%20)%3B%0A%7D%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Connection pooling
const mysql = require('mysql2');

const pool = mysql.createPool({
  host: 'localhost',
  user: 'user',
  password: 'password',
  database: 'mydb',
  connectionLimit: 10,
  queueLimit: 0,
  acquireTimeout: 60000,
  timeout: 60000
});

// Prepared statements
const promisePool = pool.promise();

async function getUserById(id) {
  const [rows] = await promisePool.execute(
    'SELECT * FROM users WHERE id = ?',
    [id]
  );
  return rows[0];
}

// Batch operations
async function insertMultipleUsers(users) {
  const values = users.map(user =&gt; [user.name, user.email]);
  
  await promisePool.execute(
    'INSERT INTO users (name, email) VALUES ?',
    [values]
  );
}
</code></pre>
</div>

<p><strong>5. HTTP Optimizations:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="const%20compression%20%3D%20require('compression')%3B%0Aconst%20helmet%20%3D%20require('helmet')%3B%0A%0A%2F%2F%20Enable%20gzip%20compression%0Aapp.use(compression())%3B%0A%0A%2F%2F%20Security%20headers%0Aapp.use(helmet())%3B%0A%0A%2F%2F%20HTTP%2F2%20support%0Aconst%20http2%20%3D%20require('http2')%3B%0Aconst%20fs%20%3D%20require('fs')%3B%0A%0Aconst%20server%20%3D%20http2.createSecureServer(%7B%0A%20%20key%3A%20fs.readFileSync('private-key.pem')%2C%0A%20%20cert%3A%20fs.readFileSync('certificate.pem')%0A%7D)%3B%0A%0A%2F%2F%20Connection%20keep-alive%0Aapp.use((req%2C%20res%2C%20next)%20%3D%3E%20%7B%0A%20%20res.setHeader('Connection'%2C%20'keep-alive')%3B%0A%20%20res.setHeader('Keep-Alive'%2C%20'timeout%3D5%2C%20max%3D1000')%3B%0A%20%20next()%3B%0A%7D)%3B%0A%0A%2F%2F%20Response%20caching%20headers%0Aapp.use('%2Fstatic'%2C%20(req%2C%20res%2C%20next)%20%3D%3E%20%7B%0A%20%20res.setHeader('Cache-Control'%2C%20'public%2C%20max-age%3D31536000')%3B%20%2F%2F%201%20year%0A%20%20next()%3B%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">const compression = require('compression');
const helmet = require('helmet');

// Enable gzip compression
app.use(compression());

// Security headers
app.use(helmet());

// HTTP/2 support
const http2 = require('http2');
const fs = require('fs');

const server = http2.createSecureServer({
  key: fs.readFileSync('private-key.pem'),
  cert: fs.readFileSync('certificate.pem')
});

// Connection keep-alive
app.use((req, res, next) =&gt; {
  res.setHeader('Connection', 'keep-alive');
  res.setHeader('Keep-Alive', 'timeout=5, max=1000');
  next();
});

// Response caching headers
app.use('/static', (req, res, next) =&gt; {
  res.setHeader('Cache-Control', 'public, max-age=31536000'); // 1 year
  next();
});
</code></pre>
</div>

<p><strong>6. Performance Monitoring:</strong></p>


<div class="code-container">
    <div class="code-header">
        <span class="code-language">javascript</span>
        <button class="copy-btn" data-code="%2F%2F%20Request%20timing%20middleware%0Aapp.use((req%2C%20res%2C%20next)%20%3D%3E%20%7B%0A%20%20const%20start%20%3D%20Date.now()%3B%0A%20%20%0A%20%20res.on('finish'%2C%20()%20%3D%3E%20%7B%0A%20%20%20%20const%20duration%20%3D%20Date.now()%20-%20start%3B%0A%20%20%20%20console.log(%60%24%7Breq.method%7D%20%24%7Breq.url%7D%20-%20%24%7Bduration%7Dms%60)%3B%0A%20%20%20%20%0A%20%20%20%20if%20(duration%20%3E%201000)%20%7B%0A%20%20%20%20%20%20console.warn(%60Slow%20request%20detected%3A%20%24%7Breq.url%7D%20took%20%24%7Bduration%7Dms%60)%3B%0A%20%20%20%20%7D%0A%20%20%7D)%3B%0A%20%20%0A%20%20next()%3B%0A%7D)%3B%0A%0A%2F%2F%20Health%20check%20endpoint%0Aapp.get('%2Fhealth'%2C%20(req%2C%20res)%20%3D%3E%20%7B%0A%20%20const%20memUsage%20%3D%20process.memoryUsage()%3B%0A%20%20const%20uptime%20%3D%20process.uptime()%3B%0A%20%20%0A%20%20res.json(%7B%0A%20%20%20%20status%3A%20'healthy'%2C%0A%20%20%20%20uptime%3A%20Math.floor(uptime)%2C%0A%20%20%20%20memory%3A%20%7B%0A%20%20%20%20%20%20used%3A%20Math.round(memUsage.heapUsed%20%2F%201024%20%2F%201024)%2C%0A%20%20%20%20%20%20total%3A%20Math.round(memUsage.heapTotal%20%2F%201024%20%2F%201024)%0A%20%20%20%20%7D%2C%0A%20%20%20%20timestamp%3A%20new%20Date().toISOString()%0A%20%20%7D)%3B%0A%7D)%3B%0A">Copy</button>
    </div>
    <pre><code class="language-javascript">// Request timing middleware
app.use((req, res, next) =&gt; {
  const start = Date.now();
  
  res.on('finish', () =&gt; {
    const duration = Date.now() - start;
    console.log(`${req.method} ${req.url} - ${duration}ms`);
    
    if (duration &gt; 1000) {
      console.warn(`Slow request detected: ${req.url} took ${duration}ms`);
    }
  });
  
  next();
});

// Health check endpoint
app.get('/health', (req, res) =&gt; {
  const memUsage = process.memoryUsage();
  const uptime = process.uptime();
  
  res.json({
    status: 'healthy',
    uptime: Math.floor(uptime),
    memory: {
      used: Math.round(memUsage.heapUsed / 1024 / 1024),
      total: Math.round(memUsage.heapTotal / 1024 / 1024)
    },
    timestamp: new Date().toISOString()
  });
});
</code></pre>
</div>

            </div>
        </main>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        
        // Initialize TOC
        document.getElementById('toc-list').innerHTML = `<li><a href="#architecture-runtime-questions-51-70-" class="h2-link">Architecture & Runtime (Questions 51-70)</a></li><li><a href="#modules-package-management-questions-71-90-" class="h2-link">Modules & Package Management (Questions 71-90)</a></li><li><a href="#file-system-streams-questions-91-110-" class="h2-link">File System & Streams (Questions 91-110)</a></li><li><a href="#process-management-performance-questions-111-130-" class="h2-link">Process Management & Performance (Questions 111-130)</a></li>`;
        
        // Initialize theme from localStorage
        const savedTheme = localStorage.getItem('theme') || 'light';
        document.body.setAttribute('data-theme', savedTheme);
        const themeButton = document.getElementById('theme-toggle');
        themeButton.textContent = savedTheme === 'dark' ? '‚òÄÔ∏è Light Mode' : 'üåô Dark Mode';
        
        // Set initial theme stylesheets
        const lightTheme = document.getElementById('light-theme');
        const darkTheme = document.getElementById('dark-theme');
        if (savedTheme === 'dark') {
            lightTheme.disabled = true;
            darkTheme.disabled = false;
        } else {
            lightTheme.disabled = false;
            darkTheme.disabled = true;
        }
        
        // Mobile menu functionality
        function toggleMobileMenu() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('mobile-overlay');
            const isOpen = sidebar.classList.contains('mobile-open');
            
            if (isOpen) {
                sidebar.classList.remove('mobile-open');
                overlay.classList.remove('active');
            } else {
                sidebar.classList.add('mobile-open');
                overlay.classList.add('active');
            }
        }
        
        // Theme toggle functionality
        function toggleTheme() {
            const body = document.body;
            const button = document.getElementById('theme-toggle');
            const currentTheme = body.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            body.setAttribute('data-theme', newTheme);
            button.textContent = newTheme === 'dark' ? '‚òÄÔ∏è Light Mode' : 'üåô Dark Mode';
            localStorage.setItem('theme', newTheme);
            
            const lightTheme = document.getElementById('light-theme');
            const darkTheme = document.getElementById('dark-theme');
            if (newTheme === 'dark') {
                lightTheme.disabled = true;
                darkTheme.disabled = false;
            } else {
                lightTheme.disabled = false;
                darkTheme.disabled = true;
            }
            
            // Re-highlight code after theme change
            setTimeout(() => {
                if (typeof Prism !== 'undefined') {
                    Prism.highlightAll();
                }
            }, 100);
        }
        
        // Copy code functionality
        function copyCode(text, button) {
            // Modern clipboard API
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(text).then(() => {
                    button.textContent = 'Copied!';
                    button.style.background = '#10b981';
                    setTimeout(() => {
                        button.textContent = 'Copy';
                        button.style.background = 'var(--accent-color)';
                    }, 2000);
                }).catch(() => {
                    fallbackCopyTextToClipboard(text, button);
                });
            } else {
                fallbackCopyTextToClipboard(text, button);
            }
        }
        
        // Fallback copy function for older browsers
        function fallbackCopyTextToClipboard(text, button) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.position = "fixed";
            textArea.style.left = "-999999px";
            textArea.style.top = "-999999px";
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    button.textContent = 'Copied!';
                    button.style.background = '#10b981';
                    setTimeout(() => {
                        button.textContent = 'Copy';
                        button.style.background = 'var(--accent-color)';
                    }, 2000);
                } else {
                    throw new Error('Copy command failed');
                }
            } catch (err) {
                console.error('Copy failed:', err);
                button.textContent = 'Copy failed';
                button.style.background = '#ef4444';
                setTimeout(() => {
                    button.textContent = 'Copy';
                    button.style.background = 'var(--accent-color)';
                }, 2000);
            } finally {
                document.body.removeChild(textArea);
            }
        }
        
        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Mobile menu button
            const mobileMenuBtn = document.getElementById('mobile-menu-btn');
            if (mobileMenuBtn) {
                mobileMenuBtn.addEventListener('click', toggleMobileMenu);
            }
            
            // Theme toggle button
            const themeToggleBtn = document.getElementById('theme-toggle');
            if (themeToggleBtn) {
                themeToggleBtn.addEventListener('click', toggleTheme);
            }
            
            // Copy buttons
            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('copy-btn')) {
                    const encodedCode = e.target.getAttribute('data-code');
                    if (encodedCode) {
                        const code = decodeURIComponent(encodedCode);
                        copyCode(code, e.target);
                    }
                }
            });
            
            // Overlay and TOC link clicks
            const overlay = document.getElementById('mobile-overlay');
            if (overlay) {
                overlay.addEventListener('click', function() {
                    const sidebar = document.getElementById('sidebar');
                    sidebar.classList.remove('mobile-open');
                    overlay.classList.remove('active');
                });
            }
            
            // TOC links
            document.addEventListener('click', function(e) {
                if (e.target.matches('.toc a')) {
                    const sidebar = document.getElementById('sidebar');
                    const overlay = document.getElementById('mobile-overlay');
                    sidebar.classList.remove('mobile-open');
                    overlay.classList.remove('active');
                }
            });
            
            // Highlight code after page load
            setTimeout(() => {
                if (typeof Prism !== 'undefined') {
                    Prism.highlightAll();
                }
            }, 500);
        });

        

    </script>
    <script src="../sidebar-fix.js"></script>

</body>
</html>